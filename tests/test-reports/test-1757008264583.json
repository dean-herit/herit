{
  "executionId": "test-1757008264583",
  "timestamp": "2025-09-04T17:51:04.587Z",
  "status": "failed",
  "overallSuccess": false,
  "results": {
    "backendTests": {
      "command": "npm run test:unit -- tests/api",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:unit\n> NODE_ENV=test vitest run tests/api\n\n\n RUN  v3.2.4 /Users/dean/code/Herit\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nReceived data: {\n  firstName: \u001b[32m'John'\u001b[39m,\n  lastName: \u001b[32m'Doe'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  ppsNumber: \u001b[32m'1234567T'\u001b[39m,\n  addressLine1: \u001b[32m'123 Test Street'\u001b[39m,\n  addressLine2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  photo_url: \u001b[1mnull\u001b[22m,\n  photoMarkedForDeletion: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nCurrent user query result: {\n  id: \u001b[32m'e15742c3-37a1-4793-aacc-5903155e5916'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008281276-c8f4df89@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:21.309Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:21.309Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'John Doe'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008281276-c8f4df89@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'John Doe'\u001b[39m,\n    email: \u001b[32m'test-auth-1757008281276-c8f4df89@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m'1234567T'\u001b[39m,\n    address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n    address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'John'\u001b[39m,\n  last_name: \u001b[32m'Doe'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'John'\u001b[39m,\n  last_name: \u001b[32m'Doe'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Error States > validates required personal info fields\nReceived data: {\n  firstName: \u001b[32m''\u001b[39m,\n  lastName: \u001b[32m''\u001b[39m,\n  phoneNumber: \u001b[32m'invalid-phone'\u001b[39m,\n  dateOfBirth: \u001b[32m'invalid-date'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Error States > validates required personal info fields\nCurrent user query result: {\n  id: \u001b[32m'ea5154de-dd20-42c3-903b-d92adc184394'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008281977-fb1e6c45@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:22.010Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:22.010Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m''\u001b[39m,\n  email: \u001b[32m'test-auth-1757008281977-fb1e6c45@example.com'\u001b[39m,\n  phone: \u001b[32m'invalid-phone'\u001b[39m,\n  date_of_birth: \u001b[32m'invalid-date'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mfalse\u001b[39m,\n  error: ZodError: [\n    {\n      \"origin\": \"string\",\n      \"code\": \"too_small\",\n      \"minimum\": 1,\n      \"inclusive\": true,\n      \"path\": [\n        \"name\"\n      ],\n      \"message\": \"Name is required\"\n    },\n    {\n      \"origin\": \"string\",\n      \"code\": \"invalid_format\",\n      \"format\": \"regex\",\n      \"pattern\": \"/^(\\\\+353|0)[1-9]\\\\d{7,9}$/\",\n      \"path\": [\n        \"phone\"\n      ],\n      \"message\": \"Invalid Irish phone number (e.g., +353 1 234 5678)\"\n    }\n  ]\n      at new ZodError \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/core.js:30:39\u001b[90m)\u001b[39m\n      at Module.<anonymous> \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/parse.js:40:20\u001b[90m)\u001b[39m\n      at _.inst.safeParse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/classic/schemas.js:30:46\u001b[90m)\u001b[39m\n      at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:288:49\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n      at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:142:24\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n}\n\n ❯ tests/api/debug/verification/verification.test.ts (10 tests | 3 failed) 2498ms\n   ✓ /api/debug/verification > Core Functionality > handles GET requests with valid authentication  498ms\n   × /api/debug/verification > Core Functionality > handles POST requests with valid data 315ms\n     → POST is not a function\n   × /api/debug/verification > Error States > returns proper error for unauthenticated requests 1ms\n     → POST is not a function\n   ✓ /api/debug/verification > Security > requires valid JWT authentication 0ms\n   ✓ /api/debug/verification > Security > validates JWT signature integrity 0ms\n   ✓ /api/debug/verification > Performance > responds within acceptable time with real authentication  357ms\n   ✓ /api/debug/verification > Database Integrity > maintains data consistency with real database operations  337ms\n   ✓ /api/debug/verification > Integration Scenarios > integrates with authentication workflow  350ms\n   ✓ /api/debug/verification > Compliance > meets API standards with proper authentication  331ms\n   × /api/debug/verification > Edge Cases > handles malformed JSON appropriately 298ms\n     → POST is not a function\n ❯ tests/api/auth/google/callback/callback.test.ts (10 tests | 6 failed) 2728ms\n   × /api/auth/google/callback > Core Functionality > handles GET requests with valid authentication 552ms\n     → expected 307 to be less than 300\n   × /api/auth/google/callback > Core Functionality > handles POST requests with valid data 279ms\n     → POST is not a function\n   × /api/auth/google/callback > Error States > returns proper error for unauthenticated requests 52ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google/callback > Security > requires valid JWT authentication 66ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google/callback > Security > validates JWT signature integrity 70ms\n     → expected 307 to be greater than or equal to 400\n   ✓ /api/auth/google/callback > Performance > responds within acceptable time with real authentication  355ms\n   ✓ /api/auth/google/callback > Database Integrity > maintains data consistency with real database operations  344ms\n   ✓ /api/auth/google/callback > Integration Scenarios > integrates with authentication workflow  370ms\n   ✓ /api/auth/google/callback > Compliance > meets API standards with proper authentication  337ms\n   × /api/auth/google/callback > Edge Cases > handles malformed JSON appropriately 297ms\n     → POST is not a function\n ❯ tests/api/will/status/status.test.ts (10 tests | 1 failed) 2732ms\n   ✓ /api/will/status > Core Functionality > handles GET requests with valid authentication  537ms\n   × /api/will/status > Core Functionality > handles POST requests with valid data 391ms\n     → expected 404 to be less than 300\n   ✓ /api/will/status > Error States > returns proper error for unauthenticated requests 3ms\n   ✓ /api/will/status > Security > requires valid JWT authentication 0ms\n   ✓ /api/will/status > Security > validates JWT signature integrity 0ms\n   ✓ /api/will/status > Performance > responds within acceptable time with real authentication  395ms\n   ✓ /api/will/status > Database Integrity > maintains data consistency with real database operations  363ms\n   ✓ /api/will/status > Integration Scenarios > integrates with authentication workflow  376ms\n   ✓ /api/will/status > Compliance > meets API standards with proper authentication  365ms\n   ✓ /api/will/status > Edge Cases > handles malformed JSON appropriately 295ms\n ❯ tests/api/beneficiaries/beneficiaries.test.ts (10 tests | 1 failed) 2722ms\n   ✓ /api/beneficiaries > Core Functionality > handles authenticated requests with real JWT tokens  601ms\n   × /api/beneficiaries > Core Functionality > handles POST requests with valid data 299ms\n     → expected 400 to be less than 300\n   ✓ /api/beneficiaries > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/beneficiaries > Security > requires valid JWT authentication 0ms\n   ✓ /api/beneficiaries > Security > validates JWT signature integrity 0ms\n   ✓ /api/beneficiaries > Performance > responds within acceptable time with real authentication  375ms\n   ✓ /api/beneficiaries > Database Integrity > maintains data consistency with real database operations  385ms\n   ✓ /api/beneficiaries > Integration Scenarios > integrates with authentication workflow  383ms\n   ✓ /api/beneficiaries > Compliance > meets API standards with proper authentication  366ms\n   ✓ /api/beneficiaries > Edge Cases > handles malformed requests appropriately  304ms\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts (10 tests | 4 failed) 2766ms\n   ✓ /api/auth/create-test-user > Core Functionality > handles GET requests with valid authentication  522ms\n   ✓ /api/auth/create-test-user > Core Functionality > handles POST requests with valid data  368ms\n   × /api/auth/create-test-user > Error States > returns proper error for unauthenticated requests 48ms\n     → expected 200 to be greater than or equal to 400\n   × /api/auth/create-test-user > Security > requires valid JWT authentication 42ms\n     → expected 200 to be greater than or equal to 400\n   × /api/auth/create-test-user > Security > validates JWT signature integrity 44ms\n     → expected 200 to be greater than or equal to 400\n   ✓ /api/auth/create-test-user > Performance > responds within acceptable time with real authentication  357ms\n   ✓ /api/auth/create-test-user > Database Integrity > maintains data consistency with real database operations  355ms\n   ✓ /api/auth/create-test-user > Integration Scenarios > integrates with authentication workflow  359ms\n   ✓ /api/auth/create-test-user > Compliance > meets API standards with proper authentication  323ms\n   × /api/auth/create-test-user > Edge Cases > handles malformed JSON appropriately 344ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/rules/rules.test.ts (10 tests | 1 failed) 3144ms\n   ✓ /api/rules > Core Functionality > handles GET requests with valid authentication  651ms\n   × /api/rules > Core Functionality > handles POST requests with valid data 357ms\n     → expected 400 to be less than 300\n   ✓ /api/rules > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/rules > Security > requires valid JWT authentication 1ms\n   ✓ /api/rules > Security > validates JWT signature integrity 1ms\n   ✓ /api/rules > Performance > responds within acceptable time with real authentication  435ms\n   ✓ /api/rules > Database Integrity > maintains data consistency with real database operations  467ms\n   ✓ /api/rules > Integration Scenarios > integrates with authentication workflow  451ms\n   ✓ /api/rules > Compliance > meets API standards with proper authentication  436ms\n   ✓ /api/rules > Edge Cases > handles malformed JSON appropriately  337ms\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nReceived data: {\n  firstName: \u001b[32m'Updated'\u001b[39m,\n  lastName: \u001b[32m'Name'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  addressLine1: \u001b[32m'123 New Street'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nCurrent user query result: {\n  id: \u001b[32m'0847f1a4-092a-46bc-91fe-285e5f8de5df'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008284070-5500933a@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:24.110Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:24.110Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Updated Name'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008284070-5500933a@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Updated Name'\u001b[39m,\n    email: \u001b[32m'test-auth-1757008284070-5500933a@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Updated'\u001b[39m,\n  last_name: \u001b[32m'Name'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Updated'\u001b[39m,\n  last_name: \u001b[32m'Name'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  addressLine1: \u001b[32m'123 Test Street'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nCurrent user query result: {\n  id: \u001b[32m'b8d4a434-644a-4c43-975b-0955ad836299'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008285122-5ab0f38d@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mfalse\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mfalse\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mfalse\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mfalse\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:25.156Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:25.156Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008285122-5ab0f38d@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757008285122-5ab0f38d@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles POST requests with valid data\nOnboarding completion check: {\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  allStepsCompleted: \u001b[33mtrue\u001b[39m,\n  alreadyCompleted: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles POST requests with valid data\nMarked onboarding complete for user 8757f598-6702-4163-aa93-accc275eb0c9\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nReceived data: {\n  firstName: \u001b[32m'Seán'\u001b[39m,\n  lastName: \u001b[32m'Ó Súilleabháin'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  ppsNumber: \u001b[32m'1234567T'\u001b[39m,\n  addressLine1: \u001b[32m'123 Sráid na hÉireann'\u001b[39m,\n  city: \u001b[32m'Baile Átha Cliath'\u001b[39m,\n  county: \u001b[32m'Átha Cliath'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nCurrent user query result: {\n  id: \u001b[32m'c0be5477-0d63-43e0-8170-ed47e532cd76'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008286564-904db0dd@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:26.600Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:26.600Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Seán Ó Súilleabháin'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008286564-904db0dd@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Sráid na hÉireann'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Baile Átha Cliath'\u001b[39m,\n  county: \u001b[32m'Átha Cliath'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mfalse\u001b[39m,\n  error: ZodError: [\n    {\n      \"code\": \"invalid_value\",\n      \"values\": [\n        \"\",\n        \"Antrim\",\n        \"Armagh\",\n        \"Carlow\",\n        \"Cavan\",\n        \"Clare\",\n        \"Cork\",\n        \"Derry\",\n        \"Donegal\",\n        \"Down\",\n        \"Dublin\",\n        \"Fermanagh\",\n        \"Galway\",\n        \"Kerry\",\n        \"Kildare\",\n        \"Kilkenny\",\n        \"Laois\",\n        \"Leitrim\",\n        \"Limerick\",\n        \"Longford\",\n        \"Louth\",\n        \"Mayo\",\n        \"Meath\",\n        \"Monaghan\",\n        \"Offaly\",\n        \"Roscommon\",\n        \"Sligo\",\n        \"Tipperary\",\n        \"Tyrone\",\n        \"Waterford\",\n        \"Westmeath\",\n        \"Wexford\",\n        \"Wicklow\"\n      ],\n      \"path\": [\n        \"county\"\n      ],\n      \"message\": \"Invalid option: expected one of \\\"\\\"|\\\"Antrim\\\"|\\\"Armagh\\\"|\\\"Carlow\\\"|\\\"Cavan\\\"|\\\"Clare\\\"|\\\"Cork\\\"|\\\"Derry\\\"|\\\"Donegal\\\"|\\\"Down\\\"|\\\"Dublin\\\"|\\\"Fermanagh\\\"|\\\"Galway\\\"|\\\"Kerry\\\"|\\\"Kildare\\\"|\\\"Kilkenny\\\"|\\\"Laois\\\"|\\\"Leitrim\\\"|\\\"Limerick\\\"|\\\"Longford\\\"|\\\"Louth\\\"|\\\"Mayo\\\"|\\\"Meath\\\"|\\\"Monaghan\\\"|\\\"Offaly\\\"|\\\"Roscommon\\\"|\\\"Sligo\\\"|\\\"Tipperary\\\"|\\\"Tyrone\\\"|\\\"Waterford\\\"|\\\"Westmeath\\\"|\\\"Wexford\\\"|\\\"Wicklow\\\"\"\n    }\n  ]\n      at new ZodError \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/core.js:30:39\u001b[90m)\u001b[39m\n      at Module.<anonymous> \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/parse.js:40:20\u001b[90m)\u001b[39m\n      at _.inst.safeParse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/classic/schemas.js:30:46\u001b[90m)\u001b[39m\n      at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:288:49\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n      at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:397:24\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  photoMarkedForDeletion: \u001b[33mtrue\u001b[39m,\n  photo_url: \u001b[1mnull\u001b[22m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nCurrent user query result: {\n  id: \u001b[32m'1f418fc7-f870-4054-b059-6bf630075370'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008287415-b63f46cc@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:27.446Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:27.446Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008287415-b63f46cc@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757008287415-b63f46cc@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m''\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m''\u001b[39m,\n    county: \u001b[32m''\u001b[39m,\n    eircode: \u001b[32m''\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nOnboarding completion check: {\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  allStepsCompleted: \u001b[33mtrue\u001b[39m,\n  alreadyCompleted: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nMarked onboarding complete for user 996f7cdd-9a4f-46ca-a966-8003d0919978\n\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts (10 tests | 9 failed) 2267ms\n   × /api/rules/validate-allocation > Core Functionality > handles GET requests with valid authentication 445ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Core Functionality > handles POST requests with valid data 292ms\n     → expected 400 to be less than 300\n   × /api/rules/validate-allocation > Error States > returns proper error for unauthenticated requests 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Performance > responds within acceptable time with real authentication 313ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Database Integrity > maintains data consistency with real database operations 304ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Integration Scenarios > integrates with authentication workflow 293ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Compliance > meets API standards with proper authentication 333ms\n     → GET is not a function\n   ✓ /api/rules/validate-allocation > Edge Cases > handles malformed JSON appropriately 279ms\n ❯ tests/api/onboarding/signature/signature.test.ts (10 tests | 1 failed) 2657ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  556ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 307ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 0ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 0ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  354ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  367ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  369ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication  380ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  318ms\n ❯ tests/api/onboarding/complete/complete.test.ts (10 tests | 9 failed) 2576ms\n   × /api/onboarding/complete > Core Functionality > handles GET requests with valid authentication 504ms\n     → GET is not a function\n   ✓ /api/onboarding/complete > Core Functionality > handles POST requests with valid data  399ms\n   × /api/onboarding/complete > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/onboarding/complete > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/onboarding/complete > Security > validates JWT signature integrity 2ms\n     → GET is not a function\n   × /api/onboarding/complete > Performance > responds within acceptable time with real authentication 320ms\n     → GET is not a function\n   × /api/onboarding/complete > Database Integrity > maintains data consistency with real database operations 297ms\n     → GET is not a function\n   × /api/onboarding/complete > Integration Scenarios > integrates with authentication workflow 312ms\n     → GET is not a function\n   × /api/onboarding/complete > Compliance > meets API standards with proper authentication 323ms\n     → GET is not a function\n   × /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately 404ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/onboarding/verification/verification.test.ts (10 tests | 1 failed) 2583ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  537ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 293ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 0ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 0ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  377ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  336ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  351ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication  368ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  315ms\n ❯ tests/api/beneficiaries/count/count.test.ts (10 tests | 1 failed) 2590ms\n   ✓ /api/beneficiaries/count > Core Functionality > handles GET requests with valid authentication  535ms\n   ✓ /api/beneficiaries/count > Core Functionality > returns consistent response format  424ms\n   ✓ /api/beneficiaries/count > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/beneficiaries/count > Security > requires valid JWT authentication 1ms\n   ✓ /api/beneficiaries/count > Security > validates JWT signature integrity 0ms\n   ✓ /api/beneficiaries/count > Performance > responds within acceptable time with real authentication  406ms\n   ✓ /api/beneficiaries/count > Database Integrity > maintains data consistency with real database operations  395ms\n   ✓ /api/beneficiaries/count > Integration Scenarios > integrates with authentication workflow  416ms\n   ✓ /api/beneficiaries/count > Compliance > meets API standards with proper authentication  405ms\n   × /api/beneficiaries/count > Edge Cases > handles edge cases appropriately 3ms\n     → expected 500 to be less than 500\n ❯ tests/api/rules/[id]/[id].test.ts (11 tests | 3 failed) 2511ms\n   × /api/rules/[id] > Core Functionality > handles GET requests with valid authentication 570ms\n     → expected 500 to be less than 300\n   × /api/rules/[id] > Core Functionality > handles PUT requests with valid data 326ms\n     → expected 500 to be less than 300\n   × /api/rules/[id] > Core Functionality > handles DELETE requests with authentication 314ms\n     → expected 500 to be less than 500\n   ✓ /api/rules/[id] > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/rules/[id] > Security > requires valid JWT authentication 1ms\n   ✓ /api/rules/[id] > Security > validates JWT signature integrity 1ms\n   ✓ /api/rules/[id] > Performance > responds within acceptable time with real authentication  309ms\n   ✓ /api/rules/[id] > Database Integrity > maintains data consistency with real database operations  334ms\n   ✓ /api/rules/[id] > Integration Scenarios > integrates with authentication workflow  304ms\n   ✓ /api/rules/[id] > Compliance > meets API standards with proper authentication  348ms\n   ✓ /api/rules/[id] > Edge Cases > handles edge cases appropriately 0ms\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nCurrent user query result: {\n  id: \u001b[32m'95ffd682-0d6a-44af-aa90-3f9cab4b025a'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008288921-a8cbb96e@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T17:51:28.957Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T17:51:28.957Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757008288921-a8cbb96e@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757008288921-a8cbb96e@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m''\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m''\u001b[39m,\n    county: \u001b[32m''\u001b[39m,\n    eircode: \u001b[32m''\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts (25 tests | 4 failed) 9268ms\n   ✓ /api/onboarding/personal-info > Core Functionality > handles GET requests with valid authentication  607ms\n   ✓ /api/onboarding/personal-info > Core Functionality > returns completion status correctly  437ms\n   ✓ /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data  576ms\n   ✓ /api/onboarding/personal-info > Error States > returns 401 for unauthenticated GET requests 58ms\n   ✓ /api/onboarding/personal-info > Error States > returns 401 for unauthenticated POST requests 66ms\n   ✓ /api/onboarding/personal-info > Error States > validates required personal info fields  433ms\n   ✓ /api/onboarding/personal-info > Security > requires valid JWT authentication for GET 61ms\n   ✓ /api/onboarding/personal-info > Security > requires valid JWT authentication for POST 64ms\n   ✓ /api/onboarding/personal-info > Security > validates JWT signature integrity 79ms\n   × /api/onboarding/personal-info > Security > prevents OAuth email tampering 57ms\n     → Failed query: insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"\nparams: f684a3a5-e9e6-479a-b39f-007def086bf8,original@example.com,Test,User,true,true,true,true,verified\n   ✓ /api/onboarding/personal-info > Performance > responds within acceptable time with real authentication  421ms\n   ✓ /api/onboarding/personal-info > Performance > handles concurrent requests efficiently  557ms\n   ✓ /api/onboarding/personal-info > Database Integrity > maintains user data consistency with real database operations  419ms\n   ✓ /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates  594ms\n   × /api/onboarding/personal-info > Integration Scenarios > integrates with OAuth data source tracking 458ms\n     → expected false to be true // Object.is equality\n   ✓ /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression  549ms\n   ✓ /api/onboarding/personal-info > Compliance > meets API standards with proper authentication  467ms\n   ✓ /api/onboarding/personal-info > Compliance > follows REST API conventions  426ms\n   × /api/onboarding/personal-info > Compliance > validates Irish compliance requirements 477ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding/personal-info > Edge Cases > handles requests with malformed JSON  374ms\n   ✓ /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow  567ms\n   × /api/onboarding/personal-info > Edge Cases > handles users with incomplete profile data 442ms\n     → expected 'Test' to be '' // Object.is equality\n   ✓ /api/onboarding/personal-info > Token Management > validates access token structure and claims  434ms\n   ✓ /api/onboarding/personal-info > Token Management > handles expired tokens appropriately 64ms\n   ✓ /api/onboarding/personal-info > Token Management > maintains session consistency across operations  573ms\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\n=== CONSENT SIGNATURE API HIT ===\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\nSession check: {\n  isAuthenticated: \u001b[33mtrue\u001b[39m,\n  userId: \u001b[32m'06817c7d-1eec-4556-b43c-b57415c3f231'\u001b[39m\n}\n\n ❯ tests/api/onboarding/photo/photo.test.ts (10 tests | 1 failed) 2343ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  469ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 310ms\n     → expected 500 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 0ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 0ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  305ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  303ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  314ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication 296ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  341ms\n ❯ tests/api/audit/log-event/log-event.test.ts (10 tests | 9 failed) 2341ms\n   × /api/audit/log-event > Core Functionality > handles GET requests with valid authentication 457ms\n     → GET is not a function\n   ✓ /api/audit/log-event > Core Functionality > handles POST requests with valid data  343ms\n   × /api/audit/log-event > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/audit/log-event > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/audit/log-event > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/audit/log-event > Performance > responds within acceptable time with real authentication 300ms\n     → GET is not a function\n   × /api/audit/log-event > Database Integrity > maintains data consistency with real database operations 300ms\n     → GET is not a function\n   × /api/audit/log-event > Integration Scenarios > integrates with authentication workflow 313ms\n     → GET is not a function\n   × /api/audit/log-event > Compliance > meets API standards with proper authentication 304ms\n     → GET is not a function\n   × /api/audit/log-event > Edge Cases > handles malformed JSON appropriately 320ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts (10 tests | 6 failed) 2419ms\n   × /api/auth/google > Core Functionality > handles GET requests with valid authentication 491ms\n     → expected 307 to be less than 300\n   × /api/auth/google > Core Functionality > handles POST requests with valid data 305ms\n     → POST is not a function\n   × /api/auth/google > Error States > returns proper error for unauthenticated requests 1ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google > Security > requires valid JWT authentication 1ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google > Security > validates JWT signature integrity 0ms\n     → expected 307 to be greater than or equal to 400\n   ✓ /api/auth/google > Performance > responds within acceptable time with real authentication  323ms\n   ✓ /api/auth/google > Database Integrity > maintains data consistency with real database operations  327ms\n   ✓ /api/auth/google > Integration Scenarios > integrates with authentication workflow  311ms\n   ✓ /api/auth/google > Compliance > meets API standards with proper authentication  325ms\n   × /api/auth/google > Edge Cases > handles malformed JSON appropriately 331ms\n     → POST is not a function\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\n=== CONSENT SIGNATURE API HIT ===\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\nSession check: {\n  isAuthenticated: \u001b[33mtrue\u001b[39m,\n  userId: \u001b[32m'7b6a667d-0fc8-4316-9191-24e9a29f4d02'\u001b[39m\n}\n\n ❯ tests/api/auth/refresh/refresh.test.ts (10 tests | 1 failed) 2329ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  452ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 287ms\n     → expected 401 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/auth > Security > requires valid JWT authentication 0ms\n   ✓ /api/auth > Security > validates JWT signature integrity 0ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  320ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations  312ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow 289ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  331ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately  333ms\n ❯ tests/api/auth/register/register.test.ts (10 tests | 1 failed) 2383ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  426ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 324ms\n     → expected 400 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/auth > Security > requires valid JWT authentication 0ms\n   ✓ /api/auth > Security > validates JWT signature integrity 0ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  318ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations  342ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow 288ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  335ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately  346ms\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts (10 tests | 9 failed) 2450ms\n   × /api/onboarding/consent-signature > Core Functionality > handles GET requests with valid authentication 474ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data 330ms\n     → expected 400 to be less than 300\n   × /api/onboarding/consent-signature > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Security > requires valid JWT authentication 1ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Performance > responds within acceptable time with real authentication 325ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Database Integrity > maintains data consistency with real database operations 330ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Integration Scenarios > integrates with authentication workflow 317ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Compliance > meets API standards with proper authentication 330ms\n     → GET is not a function\n   ✓ /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately  338ms\n ❯ tests/api/beneficiaries/photo/photo.test.ts (10 tests | 9 failed) 2389ms\n   × /api/beneficiaries/photo > Core Functionality > handles GET requests with valid authentication 445ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data 335ms\n     → expected 500 to be less than 300\n   × /api/beneficiaries/photo > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Performance > responds within acceptable time with real authentication 285ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Database Integrity > maintains data consistency with real database operations 353ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Integration Scenarios > integrates with authentication workflow 315ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Compliance > meets API standards with proper authentication 332ms\n     → GET is not a function\n   ✓ /api/beneficiaries/photo > Edge Cases > handles malformed JSON appropriately  320ms\n ❯ tests/api/auth/logout/logout.test.ts (10 tests | 9 failed) 2269ms\n   × /api/auth/logout > Core Functionality > handles GET requests with valid authentication 451ms\n     → GET is not a function\n   ✓ /api/auth/logout > Core Functionality > handles POST requests with valid data 281ms\n   × /api/auth/logout > Error States > returns proper error for unauthenticated requests 0ms\n     → GET is not a function\n   × /api/auth/logout > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/auth/logout > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/auth/logout > Performance > responds within acceptable time with real authentication 306ms\n     → GET is not a function\n   × /api/auth/logout > Database Integrity > maintains data consistency with real database operations 304ms\n     → GET is not a function\n   × /api/auth/logout > Integration Scenarios > integrates with authentication workflow 310ms\n     → GET is not a function\n   × /api/auth/logout > Compliance > meets API standards with proper authentication 301ms\n     → GET is not a function\n   × /api/auth/logout > Edge Cases > handles malformed JSON appropriately 311ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/debug-user/debug-user.test.ts (10 tests | 4 failed) 2230ms\n   × /api/debug-user > Core Functionality > handles GET requests with valid authentication 458ms\n     → expected 400 to be less than 300\n   × /api/debug-user > Core Functionality > handles POST requests with valid data 281ms\n     → POST is not a function\n   × /api/debug-user > Error States > returns proper error for unauthenticated requests 1ms\n     → POST is not a function\n   ✓ /api/debug-user > Security > requires valid JWT authentication 0ms\n   ✓ /api/debug-user > Security > validates JWT signature integrity 0ms\n   ✓ /api/debug-user > Performance > responds within acceptable time with real authentication 277ms\n   ✓ /api/debug-user > Database Integrity > maintains data consistency with real database operations 294ms\n   ✓ /api/debug-user > Integration Scenarios > integrates with authentication workflow  311ms\n   ✓ /api/debug-user > Compliance > meets API standards with proper authentication  300ms\n   × /api/debug-user > Edge Cases > handles malformed JSON appropriately 304ms\n     → POST is not a function\n ❯ tests/api/auth/login/login.test.ts (10 tests | 1 failed) 2288ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  442ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 356ms\n     → expected 400 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/auth > Security > requires valid JWT authentication 1ms\n   ✓ /api/auth > Security > validates JWT signature integrity 1ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  318ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations 279ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow 289ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  303ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately 295ms\n ❯ tests/api/documents/requirements/[type]/[type].test.ts (10 tests | 3 failed) 1946ms\n   ✓ /api/documents/requirements/[type] > Core Functionality > handles GET requests with valid authentication  427ms\n   ✓ /api/documents/requirements/[type] > Core Functionality > returns consistent response format  307ms\n   × /api/documents/requirements/[type] > Error States > returns proper error for unauthenticated requests 2ms\n     → expected 200 to be greater than or equal to 400\n   × /api/documents/requirements/[type] > Security > requires valid JWT authentication 0ms\n     → expected 200 to be greater than or equal to 400\n   × /api/documents/requirements/[type] > Security > validates JWT signature integrity 0ms\n     → expected 200 to be greater than or equal to 400\n   ✓ /api/documents/requirements/[type] > Performance > responds within acceptable time with real authentication 296ms\n   ✓ /api/documents/requirements/[type] > Database Integrity > maintains data consistency with real database operations  306ms\n   ✓ /api/documents/requirements/[type] > Integration Scenarios > integrates with authentication workflow 293ms\n   ✓ /api/documents/requirements/[type] > Compliance > meets API standards with proper authentication  310ms\n   ✓ /api/documents/requirements/[type] > Edge Cases > handles edge cases appropriately 1ms\n ❯ tests/api/assets/categories/categories.test.ts (10 tests | 1 failed) 1924ms\n   ✓ /api/assets/categories > Core Functionality > handles GET requests with valid authentication  433ms\n   ✓ /api/assets/categories > Core Functionality > returns consistent response format  301ms\n   ✓ /api/assets/categories > Error States > returns proper error for unauthenticated requests 0ms\n   ✓ /api/assets/categories > Security > requires valid JWT authentication 0ms\n   ✓ /api/assets/categories > Security > validates JWT signature integrity 0ms\n   ✓ /api/assets/categories > Performance > responds within acceptable time with real authentication 282ms\n   ✓ /api/assets/categories > Database Integrity > maintains data consistency with real database operations 298ms\n   ✓ /api/assets/categories > Integration Scenarios > integrates with authentication workflow  300ms\n   ✓ /api/assets/categories > Compliance > meets API standards with proper authentication  301ms\n   × /api/assets/categories > Edge Cases > handles edge cases appropriately 4ms\n     → expected 500 to be less than 500\n ❯ tests/api/stripe/webhook/webhook.test.ts (9 tests | 1 failed) 1963ms\n   × /api/stripe/webhook > Core Functionality > handles POST requests with valid data 457ms\n     → expected 400 to be less than 300\n   ✓ /api/stripe/webhook > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/stripe/webhook > Security > requires valid JWT authentication 0ms\n   ✓ /api/stripe/webhook > Security > validates JWT signature integrity 0ms\n   ✓ /api/stripe/webhook > Performance > responds within acceptable time with real authentication 284ms\n   ✓ /api/stripe/webhook > Database Integrity > maintains data consistency with real database operations  301ms\n   ✓ /api/stripe/webhook > Integration Scenarios > integrates with authentication workflow  315ms\n   ✓ /api/stripe/webhook > Compliance > meets API standards with proper authentication  300ms\n   ✓ /api/stripe/webhook > Edge Cases > handles malformed JSON appropriately  301ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > handles POST requests with valid authentication\nOnboarding step 0 completed for user 59eaf8bb-945f-4454-80eb-3248bc434a31\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > saves step completion data correctly\nOnboarding step 1 completed for user b18d850e-7bcd-4588-96cd-e52e4c34ddb4\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > handles final step completion\nOnboarding step 3 completed for user 87a41a45-7515-4c23-9ca8-74f08fcfd7fb\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Security > prevents data injection through step data\nOnboarding step 0 completed for user 04c5d059-c6d5-4a6e-a9d9-cfe3cd19a354\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > responds within acceptable time with real authentication\nOnboarding step 1 completed for user 05b39d43-c8f9-44ab-a6b3-83102a115e7f\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 0 completed for user ba3d8945-d4be-4b68-8d25-663c6c0e5360\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 1 completed for user ba3d8945-d4be-4b68-8d25-663c6c0e5360\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 2 completed for user ba3d8945-d4be-4b68-8d25-663c6c0e5360\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Database Integrity > maintains user data consistency with real database operations\nOnboarding step 0 completed for user 80e9d312-bf34-4530-8e9b-bd991e0e0881\n\n ✓ tests/api/will/will.test.ts (10 tests) 2915ms\n   ✓ /api/will > Core Functionality > handles GET requests with valid authentication  580ms\n   ✓ /api/will > Core Functionality > handles POST requests with valid data  370ms\n   ✓ /api/will > Performance > responds within acceptable time with real authentication  394ms\n   ✓ /api/will > Database Integrity > maintains data consistency with real database operations  516ms\n   ✓ /api/will > Integration Scenarios > integrates with authentication workflow  375ms\n   ✓ /api/will > Compliance > meets API standards with proper authentication  392ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Database Integrity > creates proper audit trail for step completions\nOnboarding step 2 completed for user ac722fc1-0a81-4725-bc68-b9f63a0667b1\n\n ✓ tests/api/beneficiaries/[id]/[id].test.ts (11 tests) 3217ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles GET requests with valid authentication  549ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles PUT requests with valid data  424ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles DELETE requests with authentication  401ms\n   ✓ /api/beneficiaries/[id] > Performance > responds within acceptable time with real authentication  588ms\n   ✓ /api/beneficiaries/[id] > Database Integrity > maintains data consistency with real database operations  425ms\n   ✓ /api/beneficiaries/[id] > Integration Scenarios > integrates with authentication workflow  408ms\n   ✓ /api/beneficiaries/[id] > Compliance > meets API standards with proper authentication  417ms\n ✓ tests/api/assets/[id]/[id].test.ts (11 tests) 3384ms\n   ✓ /api/assets/[id] > Core Functionality > handles GET requests with valid authentication  616ms\n   ✓ /api/assets/[id] > Core Functionality > handles PUT requests with valid data  482ms\n   ✓ /api/assets/[id] > Core Functionality > handles DELETE requests with authentication  484ms\n   ✓ /api/assets/[id] > Performance > responds within acceptable time with real authentication  502ms\n   ✓ /api/assets/[id] > Database Integrity > maintains data consistency with real database operations  416ms\n   ✓ /api/assets/[id] > Integration Scenarios > integrates with authentication workflow  427ms\n   ✓ /api/assets/[id] > Compliance > meets API standards with proper authentication  447ms\n ✓ tests/api/onboarding/legal-consent/legal-consent.test.ts (12 tests) 3680ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > handles GET requests with authentication  514ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > handles POST requests with valid consent data  349ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > returns user's consent data correctly  353ms\n   ✓ /api/onboarding/legal-consent > Error States > validates consent data format  442ms\n   ✓ /api/onboarding/legal-consent > Security > handles malicious consent data safely  352ms\n   ✓ /api/onboarding/legal-consent > Security > stores IP address and user agent for audit trail  343ms\n   ✓ /api/onboarding/legal-consent > Performance & Edge Cases > responds within acceptable time  334ms\n   ✓ /api/onboarding/legal-consent > Performance & Edge Cases > handles concurrent requests safely  478ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > integrates with onboarding progression workflow\nOnboarding step 0 completed for user afe0e8fb-602e-4d44-9558-5eb558aa174e\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 1 completed for user 09add9ef-5064-48b2-82ac-7ee4f761dfe2\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 2 completed for user 09add9ef-5064-48b2-82ac-7ee4f761dfe2\n\n ✓ tests/api/auth/session/session.test.ts (21 tests) 4706ms\n   ✓ /api/auth/session > Core Functionality > handles GET requests with valid session  480ms\n   ✓ /api/auth/session > Core Functionality > returns user session data correctly  320ms\n   ✓ /api/auth/session > Security > prevents session fixation attacks  313ms\n   ✓ /api/auth/session > Performance > responds within acceptable time with real authentication  313ms\n   ✓ /api/auth/session > Database Integrity > maintains user data consistency with real database queries  416ms\n   ✓ /api/auth/session > Integration Scenarios > provides complete user context for authenticated requests  326ms\n   ✓ /api/auth/session > Compliance > meets API standards with proper authentication  314ms\n   ✓ /api/auth/session > Edge Cases > handles users with incomplete profile data  317ms\n   ✓ /api/auth/session > Token Management > validates access token structure and claims  302ms\n   ✓ /api/auth/session > Token Management > handles refresh token scenarios appropriately  309ms\n   ✓ /api/auth/session > Token Management > maintains session consistency across requests  409ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 3 completed for user 09add9ef-5064-48b2-82ac-7ee4f761dfe2\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Compliance > meets API standards with proper authentication\nOnboarding step 1 completed for user 5edbfddf-90aa-4fb9-a40d-6885b7a2f7bb\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Compliance > follows REST API conventions\nOnboarding step 0 completed for user 1a07a5c7-fb11-458b-993f-b9b74a59d576\n\n ✓ tests/api/test-db/test-db.test.ts (12 tests) 12ms\n ✓ tests/api/health/health.test.ts (12 tests) 12ms\n ✓ tests/api/onboarding/status/status.test.ts (10 tests) 2640ms\n   ✓ /api/onboarding/status > Core Functionality > handles GET requests with valid authentication  451ms\n   ✓ /api/onboarding/status > Core Functionality > returns consistent onboarding status data  456ms\n   ✓ /api/onboarding/status > Performance > responds within acceptable time with real authentication  418ms\n   ✓ /api/onboarding/status > Database Integrity > maintains data consistency with real database operations  333ms\n   ✓ /api/onboarding/status > Integration Scenarios > integrates with authentication workflow  317ms\n   ✓ /api/onboarding/status > Compliance > meets API standards with proper authentication  333ms\n   ✓ /api/onboarding/status > Edge Cases > handles edge cases appropriately  318ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Edge Cases > handles null data for non-personal info steps\nOnboarding step 1 completed for user 34451ca0-a0c7-4b90-9ed0-20fff337b201\n\n ✓ tests/api/assets/assets.test.ts (21 tests) 9588ms\n   ✓ /api/assets > Core Functionality > handles GET requests to retrieve user assets  696ms\n   ✓ /api/assets > Core Functionality > handles POST requests to create new assets  404ms\n   ✓ /api/assets > Error States > returns 400 for POST with missing required fields  342ms\n   ✓ /api/assets > Error States > handles database errors gracefully  342ms\n   ✓ /api/assets > Security > prevents access to other users' assets  441ms\n   ✓ /api/assets > Security > validates asset type enum values  334ms\n   ✓ /api/assets > Security > prevents XSS in asset metadata  343ms\n   ✓ /api/assets > Performance > responds within acceptable time for asset retrieval  1351ms\n   ✓ /api/assets > Performance > handles concurrent asset creation efficiently  685ms\n   ✓ /api/assets > Database Integrity > maintains asset-user relationship integrity  379ms\n   ✓ /api/assets > Database Integrity > handles asset metadata JSON storage correctly  373ms\n   ✓ /api/assets > Integration Scenarios > integrates with asset categorization system  633ms\n   ✓ /api/assets > Integration Scenarios > supports asset valuation workflow  355ms\n   ✓ /api/assets > Compliance > meets API standards for asset management  474ms\n   ✓ /api/assets > Compliance > follows REST API conventions for assets  735ms\n   ✓ /api/assets > Edge Cases > handles assets with zero value  420ms\n   ✓ /api/assets > Edge Cases > handles very long asset names  359ms\n   ✓ /api/assets > Edge Cases > handles empty asset lists gracefully  520ms\n   ✓ /api/assets > Edge Cases > handles unicode characters in asset names  396ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > validates access token structure and claims\nOnboarding step 1 completed for user fb566d34-785b-4b1a-b3a9-dffa5ed2ac14\n\n ✓ tests/api/documents/[id]/[id].test.ts (10 tests) 2027ms\n   ✓ /api/documents/[id] > Core Functionality > handles GET requests with valid authentication  440ms\n   ✓ /api/documents/[id] > Core Functionality > handles DELETE requests with authentication  328ms\n   ✓ /api/documents/[id] > Performance > responds within acceptable time with real authentication  325ms\n   ✓ /api/documents/[id] > Database Integrity > maintains data consistency with real database operations  321ms\n   ✓ /api/documents/[id] > Integration Scenarios > integrates with authentication workflow  301ms\n   ✓ /api/documents/[id] > Compliance > meets API standards with proper authentication  308ms\n ✓ tests/api/onboarding/verification/sync/sync.test.ts (10 tests) 2443ms\n   ✓ /api/onboarding/verification/sync > Core Functionality > handles GET requests with valid authentication  620ms\n   ✓ /api/onboarding/verification/sync > Core Functionality > handles POST requests with valid data  361ms\n   ✓ /api/onboarding/verification/sync > Performance > responds within acceptable time with real authentication  352ms\n   ✓ /api/onboarding/verification/sync > Database Integrity > maintains data consistency with real database operations  362ms\n   ✓ /api/onboarding/verification/sync > Integration Scenarios > integrates with authentication workflow  338ms\n   ✓ /api/onboarding/verification/sync > Compliance > meets API standards with proper authentication  334ms\n ✓ tests/api/assets/[id]/documents/documents.test.ts (9 tests) 1924ms\n   ✓ /api/assets/[id]/documents > Core Functionality > handles GET requests with valid authentication  497ms\n   ✓ /api/assets/[id]/documents > Performance > responds within acceptable time with real authentication  369ms\n   ✓ /api/assets/[id]/documents > Database Integrity > maintains data consistency with real database operations  342ms\n   ✓ /api/assets/[id]/documents > Integration Scenarios > integrates with authentication workflow  365ms\n   ✓ /api/assets/[id]/documents > Compliance > meets API standards with proper authentication  345ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > maintains session consistency across step saves\nOnboarding step 1 completed for user afd746cb-021d-4aa6-96c7-1c07bc47c9b6\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > maintains session consistency across step saves\nOnboarding step 2 completed for user afd746cb-021d-4aa6-96c7-1c07bc47c9b6\n\n ✓ tests/api/onboarding/save-step/save-step.test.ts (23 tests) 8226ms\n   ✓ /api/onboarding/save-step > Core Functionality > handles POST requests with valid authentication  557ms\n   ✓ /api/onboarding/save-step > Core Functionality > saves step completion data correctly  387ms\n   ✓ /api/onboarding/save-step > Core Functionality > handles final step completion  420ms\n   ✓ /api/onboarding/save-step > Security > prevents data injection through step data  490ms\n   ✓ /api/onboarding/save-step > Performance > responds within acceptable time with real authentication  464ms\n   ✓ /api/onboarding/save-step > Performance > handles concurrent requests efficiently  512ms\n   ✓ /api/onboarding/save-step > Database Integrity > maintains user data consistency with real database operations  396ms\n   ✓ /api/onboarding/save-step > Database Integrity > creates proper audit trail for step completions  389ms\n   ✓ /api/onboarding/save-step > Integration Scenarios > integrates with onboarding progression workflow  433ms\n   ✓ /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow  863ms\n   ✓ /api/onboarding/save-step > Compliance > meets API standards with proper authentication  461ms\n   ✓ /api/onboarding/save-step > Compliance > follows REST API conventions  406ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles requests with malformed JSON  318ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles requests with missing step parameter  317ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles null data for non-personal info steps  397ms\n   ✓ /api/onboarding/save-step > Token Management > validates access token structure and claims  421ms\n   ✓ /api/onboarding/save-step > Token Management > maintains session consistency across step saves  406ms\n\n Test Files  26 failed | 13 passed (39)\n      Tests  99 failed | 348 passed (447)\n   Start at  18:51:16\n   Duration  27.88s (transform 976ms, setup 15.99s, collect 27.48s, tests 115.09s, environment 18.42s, prepare 5.77s)\n\nstderr | tests/api/beneficiaries/beneficiaries.test.ts > /api/beneficiaries > Edge Cases > handles malformed requests appropriately\nError creating beneficiary: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/route.ts:107:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/beneficiaries.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/rules.test.ts > /api/rules > Edge Cases > handles malformed JSON appropriately\nError creating rule: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/route.ts:130:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/rules.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles GET requests with valid authentication\nError fetching rule: DrizzleQueryError: Failed query: select \"id\", \"user_id\", \"name\", \"description\", \"rule_definition\", \"priority\", \"is_active\", \"created_at\", \"updated_at\" from \"inheritance_rules\" where (\"inheritance_rules\".\"id\" = $1 and \"inheritance_rules\".\"user_id\" = $2)\nparams: test-id-123,\n    at PostgresJsPreparedQuery.queryWithCache \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/pg-core/session.ts:73:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/postgres-js/session.ts:58:17\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:54:20\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:27:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  query: \u001b[32m'select \"id\", \"user_id\", \"name\", \"description\", \"rule_definition\", \"priority\", \"is_active\", \"created_at\", \"updated_at\" from \"inheritance_rules\" where (\"inheritance_rules\".\"id\" = $1 and \"inheritance_rules\".\"user_id\" = $2)'\u001b[39m,\n  params: [ \u001b[32m'test-id-123'\u001b[39m, \u001b[90mundefined\u001b[39m ],\n  cause: Error: UNDEFINED_VALUE: Undefined values are not allowed\n      at handleValue \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/types.js:83:20\u001b[90m)\u001b[39m\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:225:38\n      at Array.forEach (<anonymous>)\n      at build \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:225:25\u001b[90m)\u001b[39m\n      at Object.execute \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:167:7\u001b[90m)\u001b[39m\n      at go \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/index.js:345:14\u001b[90m)\u001b[39m\n      at Query.handler \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/index.js:334:14\u001b[90m)\u001b[39m\n      at Query.handle \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/query.js:140:65\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m {\n    code: \u001b[32m'UNDEFINED_VALUE'\u001b[39m\n  }\n}\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles PUT requests with valid data\nError updating rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.PUT \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:108:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:43:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles DELETE requests with authentication\nError deleting rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.DELETE \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:267:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:52:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles requests with malformed JSON\nPersonal info save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:184:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:412:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Error States > returns proper error for unauthenticated requests\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:64:27\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Security > requires valid JWT authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:74:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Security > validates JWT signature integrity\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:87:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Performance > responds within acceptable time with real authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:99:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Database Integrity > maintains data consistency with real database operations\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:112:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Integration Scenarios > integrates with authentication workflow\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:123:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Edge Cases > handles malformed JSON appropriately\nError validating allocation: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/validate-allocation/route.ts:45:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/validate-allocation/validate-allocation.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/signature/signature.test.ts > /api/onboarding > Edge Cases > handles malformed requests appropriately\nSignature save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/signature/route.ts:74:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/signature/signature.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Compliance > meets API standards with proper authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:134:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/photo/photo.test.ts:52:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Core Functionality > handles POST requests with valid data\nAudit logging error: DrizzleQueryError: Failed query: insert into \"audit_events\" (\"id\", \"user_id\", \"event_type\", \"event_action\", \"resource_type\", \"resource_id\", \"event_data\", \"old_data\", \"new_data\", \"ip_address\", \"user_agent\", \"session_id\", \"event_time\") values (default, $1, default, default, default, default, $2, default, default, $3, $4, default, default)\nparams: 4c49a3a0-48cb-4d10-9351-988dbcd21116,{},unknown,unknown\n    at PostgresJsPreparedQuery.queryWithCache \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/pg-core/session.ts:73:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/audit/log-event/route.ts:33:5\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/audit/log-event/log-event.test.ts:42:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  query: \u001b[32m'insert into \"audit_events\" (\"id\", \"user_id\", \"event_type\", \"event_action\", \"resource_type\", \"resource_id\", \"event_data\", \"old_data\", \"new_data\", \"ip_address\", \"user_agent\", \"session_id\", \"event_time\") values (default, $1, default, default, default, default, $2, default, default, $3, $4, default, default)'\u001b[39m,\n  params: [\n    \u001b[32m'4c49a3a0-48cb-4d10-9351-988dbcd21116'\u001b[39m,\n    \u001b[32m'{}'\u001b[39m,\n    \u001b[32m'unknown'\u001b[39m,\n    \u001b[32m'unknown'\u001b[39m\n  ],\n  cause: PostgresError: null value in column \"event_type\" of relation \"audit_events\" violates not-null constraint\n      at ErrorResponse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:794:26\u001b[90m)\u001b[39m\n      at handle \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:480:6\u001b[90m)\u001b[39m\n      at Socket.data \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:315:9\u001b[90m)\u001b[39m\n  \u001b[90m    at Socket.emit (node:events:507:28)\u001b[39m\n  \u001b[90m    at addChunk (node:internal/streams/readable:559:12)\u001b[39m\n  \u001b[90m    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\u001b[39m\n  \u001b[90m    at Socket.Readable.push (node:internal/streams/readable:390:5)\u001b[39m\n  \u001b[90m    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)\u001b[39m {\n    severity_local: \u001b[32m'ERROR'\u001b[39m,\n    severity: \u001b[32m'ERROR'\u001b[39m,\n    code: \u001b[32m'23502'\u001b[39m,\n    detail: \u001b[32m'Failing row contains (dacf886e-4e6d-407e-a24b-f14ab3f9c913, 4c49a3a0-48cb-4d10-9351-988dbcd21116, null, null, null, null, {}, null, null, unknown, unknown, null, 2025-09-04 17:51:30.242092).'\u001b[39m,\n    schema_name: \u001b[32m'public'\u001b[39m,\n    table_name: \u001b[32m'audit_events'\u001b[39m,\n    column_name: \u001b[32m'event_type'\u001b[39m,\n    file: \u001b[32m'execMain.c'\u001b[39m,\n    line: \u001b[32m'1982'\u001b[39m,\n    routine: \u001b[32m'ExecConstraints'\u001b[39m\n  }\n}\n\nstderr | tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/photo/photo.test.ts:42:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Edge Cases > handles malformed requests appropriately\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/photo/photo.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Edge Cases > handles malformed JSON appropriately\nAudit logging error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/audit/log-event/route.ts:10:7\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/audit/log-event/log-event.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/auth/register/register.test.ts > /api/auth > Edge Cases > handles malformed requests appropriately\nRegistration error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at registerHandler \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/auth/register/route.ts:11:54\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/lib/rate-limit.ts:111:22\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/auth/register/register.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\nConsent signature save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/consent-signature/route.ts:27:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/consent-signature/consent-signature.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Edge Cases > handles malformed JSON appropriately\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/photo/photo.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/auth/login/login.test.ts > /api/auth > Edge Cases > handles malformed requests appropriately\nLogin error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at loginHandler \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/auth/login/route.ts:11:33\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/lib/rate-limit.ts:111:22\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/auth/login/login.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/assets/categories/categories.test.ts > /api/assets/categories > Edge Cases > handles edge cases appropriately\nAsset categories fetch error: TypeError: Cannot read properties of undefined (reading 'isAuthenticated')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/assets/categories/route.ts:16:18\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/assets/categories/categories.test.ts:134:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Error States > handles database failures gracefully\nDatabase connection test failed: Error: Database connection failed\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:112:23\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at runSuite \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n    at runSuite \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Security > validates authentication when required\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:144:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Compliance > meets API standards\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:223:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Edge Cases > handles empty requests\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:236:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Edge Cases > handles requests with malformed JSON\nSave step error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/save-step/route.ts:20:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/save-step/save-step.test.ts:383:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\n⎯⎯⎯⎯⎯⎯ Failed Tests 99 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/api/beneficiaries/beneficiaries.test.ts > /api/beneficiaries > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/beneficiaries/beneficiaries.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/debug-user/debug-user.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Error States > returns proper error for unauthenticated requests\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:61:48\n     59|         body: JSON.stringify({}),\n     60|       });\n     61|       const postResponse = await routeHandlers.POST(postRequest);\n       |                                                ^\n     62|       expect(postResponse.status).toBeGreaterThanOrEqual(400);\n     63|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/99]⎯\n\n FAIL  tests/api/rules/rules.test.ts > /api/rules > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/rules.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/99]⎯\n\n FAIL  tests/api/assets/categories/categories.test.ts > /api/assets/categories > Edge Cases > handles edge cases appropriately\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/assets/categories/categories.test.ts:136:31\n    134|       const response = await routeHandlers.GET(new NextRequest('http:/…\n    135|       expect(response).toBeDefined();\n    136|       expect(response.status).toBeLessThan(500); // Should not crash\n       |                               ^\n    137|     });\n    138|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/audit/log-event/log-event.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Security > requires valid JWT authentication\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Security > validates JWT signature integrity\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 307 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/google/google.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/auth/google/google.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Security > requires valid JWT authentication\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Security > validates JWT signature integrity\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/auth/google/google.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/99]⎯\n\n FAIL  tests/api/auth/login/login.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/login/login.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/logout/logout.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/99]⎯\n\n FAIL  tests/api/auth/refresh/refresh.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 401 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/refresh/refresh.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/99]⎯\n\n FAIL  tests/api/auth/register/register.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/register/register.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/99]⎯\n\n FAIL  tests/api/beneficiaries/count/count.test.ts > /api/beneficiaries/count > Edge Cases > handles edge cases appropriately\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/beneficiaries/count/count.test.ts:136:31\n    134|       const response = await routeHandlers.GET(new NextRequest('http:/…\n    135|       expect(response).toBeDefined();\n    136|       expect(response.status).toBeLessThan(500); // Should not crash\n       |                               ^\n    137|     });\n    138|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/beneficiaries/photo/photo.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Error States > returns proper error for unauthenticated requests\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:61:48\n     59|         body: JSON.stringify({}),\n     60|       });\n     61|       const postResponse = await routeHandlers.POST(postRequest);\n       |                                                ^\n     62|       expect(postResponse.status).toBeGreaterThanOrEqual(400);\n     63|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/onboarding/complete/complete.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Security > prevents OAuth email tampering\nError: Failed query: insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"\nparams: f684a3a5-e9e6-479a-b39f-007def086bf8,original@example.com,Test,User,true,true,true,true,verified\n ❯ PostgresJsPreparedQuery.queryWithCache node_modules/.pnpm/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/src/pg-core/session.ts:73:11\n ❯ node_modules/.pnpm/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/src/postgres-js/session.ts:58:17\n ❯ Function.createTestUser tests/test-database-utils.ts:35:20\n     33|     verification_status?: string;\n     34|   }) {\n     35|     const [user] = await db.insert(users).values({\n       |                    ^\n     36|       id: randomUUID(),\n     37|       email: userData.email,\n ❯ Function.createAuthenticatedTestUser tests/test-auth-utils.ts:55:18\n ❯ setupAuthenticatedTest tests/test-setup-real-auth.ts:30:23\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:191:27\n\nCaused by: PostgresError: duplicate key value violates unique constraint \"app_users_email_unique\"\n ❯ ErrorResponse node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:794:26\n ❯ handle node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:480:6\n ❯ Socket.data node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:315:9\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯\nSerialized Error: { severity_local: 'ERROR', severity: 'ERROR', code: '23505', detail: 'Key (email)=(original@example.com) already exists.', schema_name: 'public', table_name: 'app_users', constraint_name: 'app_users_email_unique', file: 'nbtinsert.c', routine: '_bt_check_unique', query: 'insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"', parameters: [ 'f684a3a5-e9e6-479a-b39f-007def086bf8', 'original@example.com', 'Test', 'User', 't', 't', 't', 't', 'verified' ], args: [ 'f684a3a5-e9e6-479a-b39f-007def086bf8', 'original@example.com', 'Test', 'User', true, true, true, true, 'verified' ], types: [ 2950, 1043, 1043, 1043, 16, 16, 16, 16, 46250 ] }\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > integrates with OAuth data source tracking\nAssertionError: expected false to be true // Object.is equality\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- true\u001b[39m\n\u001b[31m+ false\u001b[39m\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:315:42\n    313|       \n    314|       const data = await response.json();\n    315|       expect(data.dataSource.from_oauth).toBe(true);\n       |                                          ^\n    316|       expect(data.dataSource.provider).toBe('google');\n    317|       expect(data.dataSource.has_profile_photo).toBe(true);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:399:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles users with incomplete profile data\nAssertionError: expected 'Test' to be '' // Object.is equality\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[31m+ Test\u001b[39m\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:461:44\n    459|       \n    460|       const data = await response.json();\n    461|       expect(data.personalInfo.first_name).toBe('');\n       |                                            ^\n    462|       expect(data.personalInfo.last_name).toBe('');\n    463|       expect(data.personalInfo.phone_number).toBe('');\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/99]⎯\n\n FAIL  tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/photo/photo.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/99]⎯\n\n FAIL  tests/api/onboarding/signature/signature.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/signature/signature.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/99]⎯\n\n FAIL  tests/api/onboarding/verification/verification.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/verification/verification.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/[id]/[id].test.ts:29:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles PUT requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/[id]/[id].test.ts:45:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles DELETE requests with authentication\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/rules/[id]/[id].test.ts:55:31\n     53|       \n     54|       expect(response).toBeDefined();\n     55|       expect(response.status).toBeLessThan(500);\n       |                               ^\n     56|     });\n     57|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/99]⎯\n\n FAIL  tests/api/stripe/webhook/webhook.test.ts > /api/stripe/webhook > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/stripe/webhook/webhook.test.ts:33:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/99]⎯\n\n FAIL  tests/api/will/status/status.test.ts > /api/will/status > Core Functionality > handles POST requests with valid data\nAssertionError: expected 404 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/will/status/status.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 307 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/google/callback/callback.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/auth/google/callback/callback.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Security > requires valid JWT authentication\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Security > validates JWT signature integrity\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/auth/google/callback/callback.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest, { params…\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       // This route only supports GET\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Security > requires valid JWT authentication\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:66:31\n     64|       const request = new NextRequest(url, { method: 'GET' });\n     65|       const response = await routeHandlers.GET(request, { params: Prom…\n     66|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     67|     });\n     68| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Security > validates JWT signature integrity\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:79:31\n     77|       });\n     78|       const response = await routeHandlers.GET(request, { params: Prom…\n     79|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     80|     });\n     81|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/99]⎯\n\n",
      "startTime": 1757008276523,
      "endTime": 1757008304969,
      "duration": 28446,
      "error": "Process exited with code 1",
      "individualTests": {
        "total": 447,
        "passed": 348,
        "failed": 99,
        "skipped": 0,
        "passRate": 78,
        "progress": 100
      }
    },
    "linting": {
      "command": "npm run lint",
      "status": "completed",
      "output": "\n> herit@0.1.0 lint\n> eslint --fix\n\n\n/Users/dean/code/Herit/app/(auth)/layout.tsx\n  1:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(auth)/login/page.tsx\n  22:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/LegalConsentStep.tsx\n  199:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/PersonalInfoStep.cy.tsx\n  23:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/PersonalInfoStep.tsx\n  120:11  warning  Unexpected console statement  no-console\n  142:25  warning  Unexpected console statement  no-console\n  224:27  warning  Unexpected console statement  no-console\n  252:25  warning  Unexpected console statement  no-console\n  273:25  warning  Unexpected console statement  no-console\n  278:7   warning  Unexpected console statement  no-console\n  296:25  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/SignatureStamp-optimized.cy.tsx\n   9:3  warning  'timestamp' is defined but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                          @typescript-eslint/no-unused-vars\n  41:9  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/SignatureStep.tsx\n   29:3  warning  'onChange' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  113:9  warning  'handleBackToCreation' is assigned a value but never used                       @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/VerificationStep.tsx\n   59:5  warning  Unexpected console statement  no-console\n   68:9  warning  Unexpected console statement  no-console\n   82:9  warning  Unexpected console statement  no-console\n   88:7  warning  Unexpected console statement  no-console\n  137:5  warning  Unexpected console statement  no-console\n  153:9  warning  Unexpected console statement  no-console\n  163:9  warning  Unexpected console statement  no-console\n  183:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/page.tsx\n   48:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   86:5   warning  Unexpected console statement                                                           no-console\n  101:9   warning  Unexpected console statement                                                           no-console\n  110:9   warning  Unexpected console statement                                                           no-console\n  135:5   warning  Unexpected console statement                                                           no-console\n  142:5   warning  Unexpected console statement                                                           no-console\n  149:5   warning  Unexpected console statement                                                           no-console\n  153:7   warning  Unexpected console statement                                                           no-console\n  159:9   warning  Unexpected console statement                                                           no-console\n  174:11  warning  Unexpected console statement                                                           no-console\n  182:11  warning  Unexpected console statement                                                           no-console\n  193:13  warning  Unexpected console statement                                                           no-console\n  198:9   warning  Unexpected console statement                                                           no-console\n  206:7   warning  Unexpected console statement                                                           no-console\n  212:9   warning  Unexpected console statement                                                           no-console\n  216:11  warning  Unexpected console statement                                                           no-console\n  219:9   warning  Unexpected console statement                                                           no-console\n  227:7   warning  Unexpected console statement                                                           no-console\n  233:9   warning  Unexpected console statement                                                           no-console\n  241:11  warning  Unexpected console statement                                                           no-console\n  244:9   warning  Unexpected console statement                                                           no-console\n  251:7   warning  Unexpected console statement                                                           no-console\n  283:7   warning  Unexpected console statement                                                           no-console\n  322:7   warning  Unexpected console statement                                                           no-console\n  350:7   warning  Unexpected console statement                                                           no-console\n  355:7   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(auth)/signup/page.tsx\n  14:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  82:15  warning  'confirmPassword' is assigned a value but never used                                   @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/assets/[id]/edit/page.tsx\n  8:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/assets/add/page.tsx\n    62:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   160:5   warning  Unexpected console statement                                                           no-console\n   161:5   warning  Unexpected console statement                                                           no-console\n   166:9   warning  Unexpected console statement                                                           no-console\n   167:9   warning  Unexpected console statement                                                           no-console\n   171:11  warning  Unexpected console statement                                                           no-console\n   176:13  warning  Unexpected console statement                                                           no-console\n   179:11  warning  Unexpected console statement                                                           no-console\n   185:9   warning  Unexpected console statement                                                           no-console\n   189:7   warning  Unexpected console statement                                                           no-console\n   194:5   warning  Unexpected console statement                                                           no-console\n   202:9   warning  Unexpected console statement                                                           no-console\n   203:9   warning  Unexpected console statement                                                           no-console\n   204:9   warning  Unexpected console statement                                                           no-console\n   205:9   warning  Unexpected console statement                                                           no-console\n   209:9   warning  Unexpected console statement                                                           no-console\n   219:9   warning  Unexpected console statement                                                           no-console\n   237:7   warning  Unexpected console statement                                                           no-console\n   238:7   warning  Unexpected console statement                                                           no-console\n   241:7   warning  Unexpected console statement                                                           no-console\n   248:7   warning  Unexpected console statement                                                           no-console\n   249:7   warning  Unexpected console statement                                                           no-console\n   254:9   warning  Unexpected console statement                                                           no-console\n   255:9   warning  Unexpected console statement                                                           no-console\n   260:9   warning  Unexpected console statement                                                           no-console\n   268:9   warning  Unexpected console statement                                                           no-console\n   275:7   warning  Unexpected console statement                                                           no-console\n   288:5   warning  Unexpected console statement                                                           no-console\n   289:5   warning  Unexpected console statement                                                           no-console\n   290:5   warning  Unexpected console statement                                                           no-console\n   303:7   warning  Unexpected console statement                                                           no-console\n   811:21  warning  Unexpected console statement                                                           no-console\n   815:21  warning  Unexpected console statement                                                           no-console\n  1037:17  warning  Unexpected console statement                                                           no-console\n  1038:17  warning  Unexpected console statement                                                           no-console\n  1039:17  warning  Unexpected console statement                                                           no-console\n  1040:17  warning  Unexpected console statement                                                           no-console\n  1041:17  warning  Unexpected console statement                                                           no-console\n  1045:21  warning  Unexpected console statement                                                           no-console\n  1048:21  warning  Unexpected console statement                                                           no-console\n  1054:19  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/assets/page.tsx\n  39:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  46:21  warning  'setSortOrder' is assigned a value but never used                                      @typescript-eslint/no-unused-vars\n  75:9   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/[id]/edit/page.tsx\n  20:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/add/page.tsx\n  13:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/page.tsx\n  29:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/dashboard/DashboardClient.tsx\n  29:11  warning  'DashboardStats' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/dashboard/page.tsx\n  8:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/layout.tsx\n  4:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/CreateRuleModal.cy.tsx\n  20:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/CreateRuleModal.tsx\n  213:9  warning  Unexpected console statement  no-console\n  270:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/EditRuleModal.cy.tsx\n  21:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/EditRuleModal.tsx\n  216:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/ViewRuleModal.tsx\n  46:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/page.tsx\n  27:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  64:9  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/test-shared-form/page.tsx\n   9:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  13:5  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/will/WillClient.tsx\n  22:12  warning  'willError' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/will/page.tsx\n  7:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/_lib/error.tsx\n  5:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/api/assets/[id]/documents/route.ts\n   73:5   warning  Unexpected console statement                 no-console\n   75:7   warning  Unexpected console statement                 no-console\n  121:7   warning  Unexpected console statement                 no-console\n  125:7   warning  Unexpected console statement                 no-console\n  166:5   warning  Unexpected console statement                 no-console\n  167:5   warning  Unexpected console statement                 no-console\n  196:11  warning  'filter' is assigned a value but never used  @typescript-eslint/no-unused-vars\n  221:5   warning  Unexpected console statement                 no-console\n\n/Users/dean/code/Herit/app/api/assets/[id]/route.ts\n   52:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  146:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  210:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/assets/categories/route.ts\n  12:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  37:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/assets/route.ts\n  164:5   warning  Unexpected console statement       no-console\n  277:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/audit/log-event/route.ts\n  45:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/create-test-user/route.ts\n  75:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/google/callback/route.ts\n   39:7  warning  Unexpected console statement  no-console\n  166:7  warning  Unexpected console statement  no-console\n  216:7  warning  Unexpected console statement  no-console\n  505:7  warning  Unexpected console statement  no-console\n  534:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/google/route.ts\n   6:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  56:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/auth/login/route.ts\n  70:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/logout/route.ts\n   5:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  12:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/auth/refresh/route.ts\n  51:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/register/route.ts\n  85:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/session/route.ts\n   5:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  27:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/[id]/route.ts\n   49:5  warning  Unexpected console statement  no-console\n  127:5  warning  Unexpected console statement  no-console\n  180:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/count/route.ts\n   8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  40:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/beneficiaries/photo/route.ts\n  75:7  warning  Unexpected console statement  no-console\n  83:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/route.ts\n   90:5  warning  Unexpected console statement  no-console\n  154:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/debug-user/route.ts\n  68:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/debug/verification/route.ts\n  147:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/documents/[id]/route.ts\n  24:5  warning  Unexpected console statement  no-console\n  55:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/documents/requirements/[type]/route.ts\n  25:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/health/route.ts\n  34:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  55:11  warning  'result' is assigned a value but never used                                    @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/onboarding/complete/route.ts\n    9:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   48:9   warning  Unexpected console statement                                                   no-console\n   61:11  warning  Unexpected console statement                                                   no-console\n   78:9   warning  Unexpected console statement                                                   no-console\n   91:5   warning  Unexpected console statement                                                   no-console\n  127:7   warning  Unexpected console statement                                                   no-console\n  136:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/consent-signature/route.ts\n   9:3  warning  Unexpected console statement  no-console\n  13:5  warning  Unexpected console statement  no-console\n  19:7  warning  Unexpected console statement  no-console\n  91:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/legal-consent/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   38:5   warning  Unexpected console statement                                                   no-console\n  110:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/personal-info/route.ts\n  127:5   warning  Unexpected console statement  no-console\n  186:5   warning  Unexpected console statement  no-console\n  210:5   warning  Unexpected console statement  no-console\n  283:5   warning  Unexpected console statement  no-console\n  289:7   warning  Unexpected console statement  no-console\n  291:7   warning  Unexpected console statement  no-console\n  341:5   warning  Unexpected console statement  no-console\n  349:7   warning  Unexpected console statement  no-console\n  369:5   warning  Unexpected console statement  no-console\n  405:13  warning  Unexpected console statement  no-console\n  406:13  warning  Unexpected console statement  no-console\n  412:13  warning  Unexpected console statement  no-console\n  432:5   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/photo/route.ts\n  75:7  warning  Unexpected console statement  no-console\n  83:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/save-step/route.ts\n   91:5  warning  Unexpected console statement  no-console\n  100:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/signature/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   54:5   warning  Unexpected console statement                                                   no-console\n  173:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/status/route.ts\n   5:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  23:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/verification/route.ts\n   9:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  93:7   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/verification/sync/route.ts\n    9:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   66:11  warning  Unexpected console statement                                                   no-console\n   96:9   warning  Unexpected console statement                                                   no-console\n  139:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/rules/[id]/route.ts\n   86:5  warning  Unexpected console statement  no-console\n  248:5  warning  Unexpected console statement  no-console\n  284:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/rules/route.ts\n   40:6   warning  'CreateRuleRequest' is defined but never used                                  @typescript-eslint/no-unused-vars\n   42:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  105:5   warning  Unexpected console statement                                                   no-console\n  247:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/rules/validate-allocation/route.ts\n   22:6  warning  'ValidateAllocationRequest' is defined but never used  @typescript-eslint/no-unused-vars\n  195:5  warning  Unexpected console statement                           no-console\n\n/Users/dean/code/Herit/app/api/stripe/webhook/route.ts\n   22:7   warning  Unexpected console statement                           no-console\n   39:14  warning  'error' is defined but never used                      @typescript-eslint/no-unused-vars\n   57:12  warning  'error' is defined but never used                      @typescript-eslint/no-unused-vars\n   72:7   warning  Unexpected console statement                           no-console\n   77:29  warning  'verificationData' is assigned a value but never used  @typescript-eslint/no-unused-vars\n  113:7   warning  Unexpected console statement                           no-console\n  128:5   warning  Unexpected console statement                           no-console\n  151:7   warning  Unexpected console statement                           no-console\n  160:5   warning  Unexpected console statement                           no-console\n  168:5   warning  Unexpected console statement                           no-console\n\n/Users/dean/code/Herit/app/api/test-counts/route.ts\n  18:5  warning  Unexpected console statement  no-console\n  25:5  warning  Unexpected console statement  no-console\n  26:5  warning  Unexpected console statement  no-console\n  33:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-db/route.ts\n  18:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-reports/route.ts\n  25:11  warning  Unexpected console statement  no-console\n  43:5   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-runner/route.ts\n   23:5   warning  Unexpected console statement       no-console\n   49:7   warning  Unexpected console statement       no-console\n   83:11  warning  Unexpected console statement       no-console\n  114:24  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  165:13  warning  Unexpected console statement       no-console\n  177:13  warning  Unexpected console statement       no-console\n  196:15  warning  Unexpected console statement       no-console\n  207:11  warning  Unexpected console statement       no-console\n  232:5   warning  Unexpected console statement       no-console\n  248:5   warning  Unexpected console statement       no-console\n  253:7   warning  Unexpected console statement       no-console\n  267:5   warning  Unexpected console statement       no-console\n\n/Users/dean/code/Herit/app/api/will/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   58:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n  116:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/will/status/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   61:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n  136:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.tsx\n  31:7  warning  Unexpected console statement  no-console\n  40:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/auth/EmailSignupForm.tsx\n  62:15  warning  'confirmPassword' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/LoginForm-enhanced.cy.tsx\n  555:13  warning  'currentMode' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/ProtectedRoute.tsx\n  25:5  warning  Unexpected console statement  no-console\n  41:9  warning  Unexpected console statement  no-console\n  50:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/auth/SignatureCanvas.tsx\n  24:11  warning  'theme' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryForm.cy.tsx\n  22:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryList.tsx\n  59:3  warning  'onPageSizeChange' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryPhotoInput.cy.tsx\n  22:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryPhotoInput.tsx\n  24:3  warning  'isInvalid' is assigned a value but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  25:3  warning  'errorMessage' is defined but never used. Allowed unused args must match /^_.*?$/u        @typescript-eslint/no-unused-vars\n  91:7  warning  Unexpected console statement                                                              no-console\n\n/Users/dean/code/Herit/app/components/documents/DocumentManager.tsx\n   53:1   warning  Prefer named exports over default exports for React components to improve testability                                                                                                                                                                                                    storybook-cypress-compliance/require-named-export\n   60:10  warning  'viewMode' is assigned a value but never used                                                                                                                                                                                                                                            @typescript-eslint/no-unused-vars\n   60:20  warning  'setViewMode' is assigned a value but never used                                                                                                                                                                                                                                         @typescript-eslint/no-unused-vars\n  122:5   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  130:11  warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  144:9   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  162:9   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  404:17  warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  430:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/components/documents/DocumentUploadZone.tsx\n   49:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   51:3   warning  'assetType' is defined but never used. Allowed unused args must match /^_.*?$/u        @typescript-eslint/no-unused-vars\n  118:11  warning  'uploadId' is assigned a value but never used                                          @typescript-eslint/no-unused-vars\n  171:13  warning  Unexpected console statement                                                           no-console\n  228:7   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/components/layout/navbar.tsx\n  23:17  warning  'isSessionLoading' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/pages/HomePageClient.tsx\n  31:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/shared/DependencyInjectionExample.tsx\n   60:13  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n   60:18  warning  'value' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   63:13  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n   64:16  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n  141:7   warning  Unexpected console statement                                                 no-console\n  161:7   warning  Unexpected console statement                                                 no-console\n  182:7   warning  Unexpected console statement                                                 no-console\n  303:14  warning  'error' is defined but never used                                            @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/shared/SharedPersonalInfoFormProvider.tsx\n  65:7  warning  Unexpected console statement  no-console\n  69:7  warning  Unexpected console statement  no-console\n  86:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/shared/SharedPhotoUpload.tsx\n   27:3   warning  'name' is assigned a value but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                      @typescript-eslint/no-unused-vars\n   28:3   warning  'isInvalid' is assigned a value but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                 @typescript-eslint/no-unused-vars\n   29:3   warning  'errorMessage' is defined but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                       @typescript-eslint/no-unused-vars\n  129:7   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  171:9   warning  'markPhotoForDeletion' is assigned a value but never used                                                                                                                                                                                                                                @typescript-eslint/no-unused-vars\n  183:9   warning  'restorePhoto' is assigned a value but never used                                                                                                                                                                                                                                        @typescript-eslint/no-unused-vars\n  209:9   warning  'getTitle' is assigned a value but never used                                                                                                                                                                                                                                            @typescript-eslint/no-unused-vars\n  231:9   warning  'getDescription' is assigned a value but never used                                                                                                                                                                                                                                      @typescript-eslint/no-unused-vars\n  313:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/components/ui/ErrorBoundary.tsx\n   29:5  warning  Unexpected console statement  no-console\n  101:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/hooks/useAssets.ts\n  220:22  warning  'assetId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/hooks/useDocuments.ts\n  79:20  warning  'documentId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/hooks/useRules.ts\n  109:7  warning  Unexpected console statement  no-console\n  152:7  warning  Unexpected console statement  no-console\n  185:7  warning  Unexpected console statement  no-console\n  218:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/layout.tsx\n  48:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/lib/audit-middleware.ts\n   66:7   warning  Unexpected console statement                 no-console\n   84:11  warning  'action' is assigned a value but never used  @typescript-eslint/no-unused-vars\n   99:14  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n  185:14  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n  202:16  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/lib/auth-client.ts\n  28:7  warning  Unexpected console statement  no-console\n  40:5  warning  Unexpected console statement  no-console\n  74:5  warning  Unexpected console statement  no-console\n  93:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/auth.ts\n   70:5  warning  Unexpected console statement  no-console\n   89:5  warning  Unexpected console statement  no-console\n  108:5  warning  Unexpected console statement  no-console\n  128:5  warning  Unexpected console statement  no-console\n  150:7  warning  Unexpected console statement  no-console\n  174:7  warning  Unexpected console statement  no-console\n  246:5  warning  Unexpected console statement  no-console\n  302:7  warning  Unexpected console statement  no-console\n  361:7  warning  Unexpected console statement  no-console\n  407:5  warning  Unexpected console statement  no-console\n  517:5  warning  Unexpected console statement  no-console\n  533:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/document-storage.ts\n  103:7   warning  Unexpected console statement                                                   no-console\n  115:7   warning  Unexpected console statement                                                   no-console\n  140:7   warning  Unexpected console statement                                                   no-console\n  219:27  warning  'assetId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  225:7   warning  Unexpected console statement                                                   no-console\n  240:7   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/lib/logger.ts\n  42:11  warning  Unexpected console statement  no-console\n  46:9   warning  Unexpected console statement  no-console\n  49:9   warning  Unexpected console statement  no-console\n  52:9   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/photo-utils.ts\n   54:7  warning  Unexpected console statement  no-console\n   60:5  warning  Unexpected console statement  no-console\n   64:7  warning  Unexpected console statement  no-console\n   73:7  warning  Unexpected console statement  no-console\n   80:7  warning  Unexpected console statement  no-console\n   97:5  warning  Unexpected console statement  no-console\n  101:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/query-error-handling.ts\n  78:9  warning  Unexpected console statement  no-console\n  92:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/signature-extract.ts\n  496:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/stripe.ts\n   51:9  warning  Unexpected console statement  no-console\n  102:9  warning  Unexpected console statement  no-console\n  144:7  warning  Unexpected console statement  no-console\n  168:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/svg-sanitizer.ts\n  80:7  warning  Unexpected console statement  no-console\n  87:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/page.tsx\n  6:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/test-status/page.tsx\n  3:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/components/TestStatusDashboard.tsx\n    54:7   warning  'SSE_CHUNK_TIMEOUT' is assigned a value but never used                       @typescript-eslint/no-unused-vars\n    59:3   warning  'error' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   181:5   warning  Unexpected console statement                                                 no-console\n   531:9   warning  Unexpected console statement                                                 no-console\n   654:9   warning  'calculateWeightedProgress' is assigned a value but never used               @typescript-eslint/no-unused-vars\n   704:7   warning  Unexpected console statement                                                 no-console\n   706:7   warning  Unexpected console statement                                                 no-console\n   717:7   warning  Unexpected console statement                                                 no-console\n   724:7   warning  Unexpected console statement                                                 no-console\n   729:5   warning  Unexpected console statement                                                 no-console\n   769:7   warning  Unexpected console statement                                                 no-console\n   784:11  warning  Unexpected console statement                                                 no-console\n   965:5   warning  Unexpected console statement                                                 no-console\n   979:9   warning  Unexpected console statement                                                 no-console\n   981:9   warning  Unexpected console statement                                                 no-console\n   987:7   warning  Unexpected console statement                                                 no-console\n  1022:9   warning  Unexpected console statement                                                 no-console\n  1028:7   warning  Unexpected console statement                                                 no-console\n  1153:11  warning  Unexpected console statement                                                 no-console\n  1167:9   warning  Unexpected console statement                                                 no-console\n  1470:19  warning  Unexpected console statement                                                 no-console\n  1521:17  warning  Unexpected console statement                                                 no-console\n  1918:7   warning  Unexpected console statement                                                 no-console\n  2014:9   warning  'getSuccessRate' is assigned a value but never used                          @typescript-eslint/no-unused-vars\n  2036:9   warning  'liveTestStats' is assigned a value but never used                           @typescript-eslint/no-unused-vars\n  2369:23  warning  'totalTests' is assigned a value but never used                              @typescript-eslint/no-unused-vars\n  2370:23  warning  'passedTests' is assigned a value but never used                             @typescript-eslint/no-unused-vars\n  2371:23  warning  'failedTests' is assigned a value but never used                             @typescript-eslint/no-unused-vars\n  2374:23  warning  'passRate' is assigned a value but never used                                @typescript-eslint/no-unused-vars\n  2868:59  warning  'index' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/lib/test-counter.ts\n  145:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/lib/test-runner.ts\n   64:7   warning  Unexpected console statement                                                       no-console\n   84:7   warning  Unexpected console statement                                                       no-console\n   88:7   warning  Unexpected console statement                                                       no-console\n  103:11  warning  Unexpected console statement                                                       no-console\n  127:14  warning  'error' is defined but never used                                                  @typescript-eslint/no-unused-vars\n  128:7   warning  Unexpected console statement                                                       no-console\n  223:5   warning  'abortSignal' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  229:5   warning  Unexpected console statement                                                       no-console\n  311:7   warning  Unexpected console statement                                                       no-console\n  316:9   warning  Unexpected console statement                                                       no-console\n  326:9   warning  Unexpected console statement                                                       no-console\n  330:11  warning  Unexpected console statement                                                       no-console\n  344:15  warning  Unexpected console statement                                                       no-console\n  355:13  warning  Unexpected console statement                                                       no-console\n  358:13  warning  Unexpected console statement                                                       no-console\n  373:11  warning  Unexpected console statement                                                       no-console\n  387:15  warning  Unexpected console statement                                                       no-console\n  396:13  warning  Unexpected console statement                                                       no-console\n  399:13  warning  Unexpected console statement                                                       no-console\n  419:9   warning  Unexpected console statement                                                       no-console\n  448:13  warning  Unexpected console statement                                                       no-console\n  473:7   warning  Unexpected console statement                                                       no-console\n  477:7   warning  Unexpected console statement                                                       no-console\n  501:7   warning  Unexpected console statement                                                       no-console\n  535:11  warning  Unexpected console statement                                                       no-console\n  537:11  warning  Unexpected console statement                                                       no-console\n  598:7   warning  Unexpected console statement                                                       no-console\n  600:7   warning  Unexpected console statement                                                       no-console\n\n✖ 415 problems (0 errors, 415 warnings)\n\n",
      "startTime": 1757008264587,
      "endTime": 1757008272919,
      "duration": 8332,
      "individualTests": {
        "total": 1,
        "passed": 1,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    },
    "build": {
      "command": "npm run typecheck",
      "status": "completed",
      "output": "\n> herit@0.1.0 typecheck\n> tsc --noEmit --skipLibCheck\n\n",
      "startTime": 1757008272919,
      "endTime": 1757008276522,
      "duration": 3603,
      "individualTests": {
        "total": 1,
        "passed": 1,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    },
    "componentTestsAccessibility": {
      "command": "npm run test:ct:accessibility",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:ct:accessibility\n> cypress run --component --config video=false,screenshotOnRunFailure=false --quiet --spec 'app/_lib/**/*.cy.tsx,app/components/auth/**/*.cy.tsx,app/components/ui/**/*.cy.tsx,app/components/layout/**/*.cy.tsx,app/components/branding/**/*.cy.tsx,app/components/pages/**/*.cy.tsx,app/components/examples/**/*.cy.tsx'\n\n14 assets\n967 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 1970 ms\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 968 ms\n\n\n  QueryProvider\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) responds to user interactions\n      (Attempt 2 of 3) responds to user interactions\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 216 ms\n      2) responds to user interactions\n    Error Handling\n      (Attempt 1 of 3) handles network failures\n      (Attempt 2 of 3) handles network failures\n      3) handles network failures\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      4) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 179 ms\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 187 ms\n      5) supports keyboard navigation\n    User Interactions\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 116 ms\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 92 ms\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 169 ms\n      (Attempt 1 of 3) handles click events\n      (Attempt 2 of 3) handles click events\n      6) handles click events\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 191 ms\n      (Attempt 2 of 3) adapts to different screen sizes\n      7) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      8) works within parent containers\n\n\n  0 passing (2m)\n  8 failing\n\n  1) QueryProvider\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"queryprovider\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:50:77)\n\n  2) QueryProvider\n       Core Functionality\n         responds to user interactions:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:71:16)\n\n  3) QueryProvider\n       Error Handling\n         handles network failures:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"error\"], [role=\"alert\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:109:61)\n\n  4) QueryProvider\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:132:16)\n\n  5) QueryProvider\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:162:26)\n\n  6) QueryProvider\n       User Interactions\n         handles click events:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:191:16)\n\n  7) QueryProvider\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"queryprovider\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:217:77)\n\n  8) QueryProvider\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"queryprovider\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/QueryProvider.cy.tsx:256:81)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 343 ms\n\n\n  Error Component\n    Core Functionality\n      ✓ renders error message and try again button (56ms)\n      (Attempt 1 of 3) calls reset callback when try again button is clicked\n      (Attempt 2 of 3) calls reset callback when try again button is clicked\n      1) calls reset callback when try again button is clicked\n      ✓ logs error to console on component mount (33ms)\n      ✓ handles different error types and messages (30ms)\n    Error States\n      ✓ handles missing error object gracefully (31ms)\n      (Attempt 1 of 3) handles missing reset callback gracefully\n      (Attempt 2 of 3) handles missing reset callback gracefully\n      2) handles missing reset callback gracefully\n      ✓ handles complex error objects (34ms)\n      (Attempt 1 of 3) handles multiple rapid error occurrences\n      (Attempt 2 of 3) handles multiple rapid error occurrences\n      3) handles multiple rapid error occurrences\n    Accessibility\n      (Attempt 1 of 3) should be accessible\n      (Attempt 2 of 3) should be accessible\n      4) should be accessible\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      5) supports keyboard navigation\n      (Attempt 1 of 3) has proper semantic structure\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 101 ms\n      (Attempt 2 of 3) has proper semantic structure\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 109 ms\n      6) has proper semantic structure\n      ✓ provides clear user guidance (54ms)\n    Performance\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 105 ms\n      (Attempt 1 of 3) should render quickly\n      (Attempt 2 of 3) should render quickly\n      7) should render quickly\n      (Attempt 1 of 3) handles large error objects efficiently\n      (Attempt 2 of 3) handles large error objects efficiently\n      8) handles large error objects efficiently\n      (Attempt 1 of 3) handles rapid reset button clicks efficiently\n      (Attempt 2 of 3) handles rapid reset button clicks efficiently\n      9) handles rapid reset button clicks efficiently\n    Responsive Design\n      ✓ should work on all screen sizes (43ms)\n      ✓ maintains proper spacing on mobile (33ms)\n      ✓ handles long error messages on narrow screens (31ms)\n    Integration Scenarios\n      (Attempt 1 of 3) integrates with error boundary workflow\n      (Attempt 2 of 3) integrates with error boundary workflow\n      10) integrates with error boundary workflow\n      ✓ handles error reporting service integration (15ms)\n      (Attempt 1 of 3) works within Next.js app router context\n      (Attempt 2 of 3) works within Next.js app router context\n      11) works within Next.js app router context\n    Edge Cases\n      ✓ handles circular reference errors (30ms)\n      ✓ handles error objects without message (30ms)\n      ✓ handles non-Error objects passed as error (49ms)\n      ✓ handles rapid component remounting (41ms)\n    Security\n      (Attempt 1 of 3) safely handles malicious error messages\n      (Attempt 2 of 3) safely handles malicious error messages\n      12) safely handles malicious error messages\n      ✓ safely handles error properties with XSS attempts (37ms)\n      (Attempt 1 of 3) prevents reset callback injection attacks\n      (Attempt 2 of 3) prevents reset callback injection attacks\n      13) prevents reset callback injection attacks\n      (Attempt 1 of 3) handles error stack traces safely\n      (Attempt 2 of 3) handles error stack traces safely\n      14) handles error stack traces safely\n    Quality Checks\n      (Attempt 1 of 3) should meet performance standards\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 125 ms\n      (Attempt 2 of 3) should meet performance standards\n      15) should meet performance standards\n      (Attempt 1 of 3) should be accessible\n      (Attempt 2 of 3) should be accessible\n      16) should be accessible\n      ✓ should handle responsive layouts (29ms)\n\n\n  16 passing (1m)\n  16 failing\n\n  1) Error Component\n       Core Functionality\n         calls reset callback when try again button is clicked:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8082/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8082/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8082/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8082/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8082/__cypress/runner/cypress_runner.js:146695:53)\n\n  2) Error Component\n       Error States\n         handles missing reset callback gracefully:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  3) Error Component\n       Error States\n         handles multiple rapid error occurrences:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  4) Error Component\n       Accessibility\n         should be accessible:\n     CypressError: `cy.within()` can only be called on a single element. Your subject contained 2 elements. Narrow down your subject to a single element (using `.first()`, for example) before calling `.within()`.\n\nTo run `.within()` over multiple subjects, use `.each()`.\n\n  `cy.get('div').each($div => {`\n  `  cy.wrap($div).within(() => { ... })`\n  `})`\n\nhttps://on.cypress.io/within\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135977:72)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8082/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8082/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8082/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8082/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8082/__cypress/runner/cypress_runner.js:146695:53)\n\n  5) Error Component\n       Accessibility\n         supports keyboard navigation:\n     CypressError: `cy.focus()` can only be called on a single element. Your subject contained 2 elements.\n\nhttps://on.cypress.io/focus\n      at Context.focus (http://localhost:8082/__cypress/runner/cypress_runner.js:114705:70)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8082/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8082/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8082/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8082/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8082/__cypress/runner/cypress_runner.js:146695:53)\n\n  6) Error Component\n       Accessibility\n         has proper semantic structure:\n\n      Timed out retrying after 4000ms\n      + expected - actual\n\n      -'DIV'\n      +'BUTTON'\n      \n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:344:46)\n\n  7) Error Component\n       Performance\n         should render quickly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:374:80)\n\n  8) Error Component\n       Performance\n         handles large error objects efficiently:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:400:80)\n\n  9) Error Component\n       Performance\n         handles rapid reset button clicks efficiently:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  10) Error Component\n       Integration Scenarios\n         integrates with error boundary workflow:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  11) Error Component\n       Integration Scenarios\n         works within Next.js app router context:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  12) Error Component\n       Security\n         safely handles malicious error messages:\n     AssertionError: Timed out retrying after 4000ms: Expected [ <script>, 3 more... ] not to exist in the DOM, but it was continuously found.\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:835:30)\n\n  13) Error Component\n       Security\n         prevents reset callback injection attacks:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8082/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8082/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  14) Error Component\n       Security\n         handles error stack traces safely:\n     AssertionError: Timed out retrying after 4000ms: Expected [ <script>, 3 more... ] not to exist in the DOM, but it was continuously found.\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:905:30)\n\n  15) Error Component\n       Quality Checks\n         should meet performance standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:913:80)\n\n  16) Error Component\n       Quality Checks\n         should be accessible:\n     CypressError: `cy.within()` can only be called on a single element. Your subject contained 2 elements. Narrow down your subject to a single element (using `.first()`, for example) before calling `.within()`.\n\nTo run `.within()` over multiple subjects, use `.each()`.\n\n  `cy.get('div').each($div => {`\n  `  cy.wrap($div).within(() => { ... })`\n  `})`\n\nhttps://on.cypress.io/within\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135977:72)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n\n\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 317 ms\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 122 ms\n\n\n  providers\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n      (Attempt 1 of 3) handles props correctly\n      (Attempt 2 of 3) handles props correctly\n      3) handles props correctly\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      4) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      5) supports keyboard navigation\n    Responsive Design\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 79 ms\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 167 ms\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 50 ms\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      6) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      7) works within parent containers\n\n\n  0 passing (1m)\n  7 failing\n\n  1) providers\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:38:76)\n\n  2) providers\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:58:76)\n\n  3) providers\n       Core Functionality\n         handles props correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:81:76)\n\n  4) providers\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:104:16)\n\n  5) providers\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:134:26)\n\n  6) providers\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:164:76)\n\n  7) providers\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:203:80)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n15 assets\n969 modules\n\n\u001b[1m\u001b[31mERROR\u001b[39m\u001b[22m in \u001b[1m./app/components/auth/AuthErrorHandler.cy.tsx\u001b[39m\u001b[22m\nModule build failed (from ./node_modules/.pnpm/next@15.4.6_@babel+core@7.28.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   \u001b[31mx\u001b[0m Expected '}', got '<eof>'\n     ,-[\u001b[36;1;4m/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx\u001b[0m:131:1]\n \u001b[2m128\u001b[0m |       });\n \u001b[2m129\u001b[0m |     });\n \u001b[2m130\u001b[0m |   });\n \u001b[2m131\u001b[0m | });\n     : \u001b[35;1m ^\u001b[0m\n     `----\n  \u001b[31mx\u001b[0m Unexpected eof\n     ,-[\u001b[36;1;4m/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx\u001b[0m:131:5]\n \u001b[2m129\u001b[0m |     });\n \u001b[2m130\u001b[0m |   });\n \u001b[2m131\u001b[0m | });\n     `----\n\n\nCaused by:\n    Syntax Error\n\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled with \u001b[1m\u001b[31m1 error\u001b[39m\u001b[22m in 217 ms\n\n\n  (Attempt 1 of 2) An uncaught error was detected outside of a test\n  1) An uncaught error was detected outside of a test\n\n  0 passing (23ms)\n  1 failing\n\n  1) An uncaught error was detected outside of a test:\n     Error: The following error originated from your test code, not from Cypress.\n\n  > Module build failed (from ./node_modules/.pnpm/next@15.4.6_@babel+core@7.28.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   x Expected '}', got '<eof>'\n     ,-[/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx:131:1]\n 128 |       });\n 129 |     });\n 130 |   });\n 131 | });\n     :  ^\n     `----\n  x Unexpected eof\n     ,-[/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx:131:5]\n 129 |     });\n 130 |   });\n 131 | });\n     `----\n\nCaused by:\n    Syntax Error\n\nWhen Cypress detects uncaught errors originating from your test code it will automatically fail the current test.\n\nCypress could not associate this error to any specific test.\n\nWe dynamically generated a new test to display this failure.\n      at ./app/components/auth/AuthErrorHandler.cy.tsx (http://localhost:8082/__cypress/src/spec-0.js:17:7)\n      at __webpack_require__ (http://localhost:8082/__cypress/src/webpack.js:25:43)\n      at __webpack_require__.t (http://localhost:8082/__cypress/src/webpack.js:97:38)\n\n\n\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 602 ms\n\n\n  EmailLoginForm\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 109 ms\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n    Error Handling\n      (Attempt 1 of 3) shows validation errors\n      (Attempt 2 of 3) shows validation errors\n      3) shows validation errors\n    Accessibility\n      ✓ meets basic accessibility standards (30ms)\n      ✓ supports keyboard navigation (155ms)\n    Responsive Design\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 83 ms\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      4) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      5) works within parent containers\n\n\n  2 passing (1m)\n  5 failing\n\n  1) EmailLoginForm\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-login-form\"], [data-testid=\"emailloginform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailLoginForm.cy.tsx:47:93)\n      at getRet (http://localhost:8082/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8082/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8082/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8082/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n  2) EmailLoginForm\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-login-form\"], [data-testid=\"emailloginform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailLoginForm.cy.tsx:73:89)\n\n  3) EmailLoginForm\n       Error Handling\n         shows validation errors:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[role=\"alert\"], .error, [data-testid=\"error\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailLoginForm.cy.tsx:97:69)\n\n  4) EmailLoginForm\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-login-form\"], [data-testid=\"emailloginform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailLoginForm.cy.tsx:174:89)\n\n  5) EmailLoginForm\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-login-form\"], [data-testid=\"emailloginform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailLoginForm.cy.tsx:211:93)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 84 ms\n\n\n  EmailSignupForm\n    Core Functionality\n      ✓ renders without crashing (60ms)\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      1) displays content correctly\n    Error Handling\n      (Attempt 1 of 3) shows validation errors\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 82 ms\n      (Attempt 2 of 3) shows validation errors\n      2) shows validation errors\n    Accessibility\n      ✓ meets basic accessibility standards (29ms)\n      ✓ supports keyboard navigation (154ms)\n    User Interactions\n      (Attempt 1 of 3) handles click events\n      (Attempt 2 of 3) handles click events\n      3) handles click events\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      4) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      5) works within parent containers\n\n\n  3 passing (1m)\n  5 failing\n\n  1) EmailSignupForm\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-signup-form\"], [data-testid=\"emailsignupform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailSignupForm.cy.tsx:73:91)\n\n  2) EmailSignupForm\n       Error Handling\n         shows validation errors:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[role=\"alert\"], .error, [data-testid=\"error\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailSignupForm.cy.tsx:97:69)\n\n  3) EmailSignupForm\n       User Interactions\n         handles click events:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-signup-form\"], [data-testid=\"emailsignupform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailSignupForm.cy.tsx:175:91)\n\n  4) EmailSignupForm\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-signup-form\"], [data-testid=\"emailsignupform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailSignupForm.cy.tsx:197:91)\n\n  5) EmailSignupForm\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"email-signup-form\"], [data-testid=\"emailsignupform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/EmailSignupForm.cy.tsx:234:95)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1158 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 375 ms\n\n\n  GoogleSignInButton\n    Core Functionality\n      ✓ renders without crashing (34ms)\n      ✓ displays correct text (25ms)\n      ✓ calls onSignInStart callback when provided (103ms)\n\n\n  3 passing (190ms)\n\n18 assets\n1162 modules\n\n\u001b[1m\u001b[31mERROR\u001b[39m\u001b[22m in \u001b[1m\u001b[36m./app/components/auth/LoginForm-enhanced.cy.tsx\u001b[39m\u001b[1m:\u001b[33m6\u001b[39m\u001b[1m:\u001b[33m1\u001b[39m\u001b[1m\u001b[39m\u001b[22m\n\u001b[31m\u001b[1mModule not found\u001b[22m\u001b[39m: Can't resolve '\u001b[32m../../../../cypress/support/test-utils\u001b[39m'\n  4 |\n  5 | import \"cypress-real-events/support\";\n> 6 | import { TestUtils } from \"../../../../cypress/support/test-utils\";\n    | ^\n  7 |\n  8 | // Mock OAuth buttons for testing (no useAuth dependency)\n  9 | function MockGoogleSignInButton() {\n\nhttps://nextjs.org/docs/messages/module-not-found\n\nImport trace for requested module:\n../../Library/Caches/Cypress/15.0.0/Cypress.app/Contents/Resources/app/packages/server/node_modules/@cypress/webpack-dev-server/dist/loader.js!../../Library/Caches/Cypress/15.0.0/Cypress.app/Contents/Resources/app/packages/server/node_modules/@cypress/webpack-dev-server/dist/browser.js\n../../Library/Caches/Cypress/15.0.0/Cypress.app/Contents/Resources/app/packages/server/node_modules/@cypress/webpack-dev-server/dist/browser.js\n\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled with \u001b[1m\u001b[31m1 error\u001b[39m\u001b[22m in 247 ms\n\n\n  (Attempt 1 of 2) An uncaught error was detected outside of a test\n  1) An uncaught error was detected outside of a test\n\n  0 passing (26ms)\n  1 failing\n\n  1) An uncaught error was detected outside of a test:\n     Error: The following error originated from your test code, not from Cypress.\n\n  > Cannot find module '../../../../cypress/support/test-utils'\n\nWhen Cypress detects uncaught errors originating from your test code it will automatically fail the current test.\n\nCypress could not associate this error to any specific test.\n\nWe dynamically generated a new test to display this failure.\n      at webpackMissingModule (webpack-internal:///./app/components/auth/LoginForm-enhanced.cy.tsx:9:50)\n      at eval (webpack-internal:///./app/components/auth/LoginForm-enhanced.cy.tsx:9:163)\n      at ./app/components/auth/LoginForm-enhanced.cy.tsx (http://localhost:8082/__cypress/src/spec-0.js:18:1)\n      at __webpack_require__ (http://localhost:8082/__cypress/src/webpack.js:25:43)\n\n\n\n18 assets\n1379 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 169 ms\n\n\n  LoginForm\n    Core Functionality\n      ✓ renders without crashing (61ms)\n      ✓ displays content correctly (31ms)\n    Error Handling\n      (Attempt 1 of 3) shows validation errors\n      (Attempt 2 of 3) shows validation errors\n      1) shows validation errors\n    Accessibility\n      ✓ meets basic accessibility standards (30ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      2) supports keyboard navigation\n    Responsive Design\n      ✓ adapts to different screen sizes (41ms)\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      3) works within parent containers\n\n\n  4 passing (37s)\n  3 failing\n\n  1) LoginForm\n       Error Handling\n         shows validation errors:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button[type=\"submit\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/LoginForm.cy.tsx:99:16)\n\n  2) LoginForm\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/LoginForm.cy.tsx:149:26)\n\n  3) LoginForm\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `body`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/LoginForm.cy.tsx:214:20)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1233 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 149 ms\n18 assets\n1233 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 124 ms\n\n\n  ProtectedRoute\n    Core Functionality\n      ✓ shows loading state for unauthenticated users (43ms)\n      ✓ renders children when authenticated (27ms)\n      ✓ handles requireOnboarding prop correctly (7ms)\n      ✓ renders children when onboarding completed (13ms)\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      1) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      2) supports keyboard navigation\n    Responsive Design\n      ✓ adapts to different screen sizes (35ms)\n    Integration\n      ✓ works within parent containers (26ms)\n\n\n  6 passing (25s)\n  2 failing\n\n  1) ProtectedRoute\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/ProtectedRoute.cy.tsx:130:16)\n\n  2) ProtectedRoute\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/ProtectedRoute.cy.tsx:153:26)\n\n\n\n18 assets\n1161 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 171 ms\n\n\n  SignatureCanvas\n    Core Functionality\n      ✓ renders without crashing (52ms)\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      1) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      2) supports keyboard navigation\n    Responsive Design\n      ✓ adapts to different screen sizes (37ms)\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n18 assets\n1161 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 78 ms\n      3) works within parent containers\n\n\n  2 passing (37s)\n  3 failing\n\n  1) SignatureCanvas\n       Accessibility\n         meets basic accessibility standards:\n\n      Timed out retrying after 4000ms\n      + expected - actual\n\n\n      at Context.eval (webpack-internal:///./app/components/auth/SignatureCanvas.cy.tsx:60:43)\n      at getRet (http://localhost:8082/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8082/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8082/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8082/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n  2) SignatureCanvas\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/SignatureCanvas.cy.tsx:82:26)\n\n  3) SignatureCanvas\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `body`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/auth/SignatureCanvas.cy.tsx:145:20)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1167 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 164 ms\n18 assets\n1167 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 98 ms\n\n\n  ErrorBoundary\n    Core Functionality\n18 assets\n1167 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 57 ms\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) responds to user interactions\n      (Attempt 2 of 3) responds to user interactions\n      2) responds to user interactions\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      3) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      4) supports keyboard navigation\n    User Interactions\n      (Attempt 1 of 3) handles click events\n      (Attempt 2 of 3) handles click events\n      5) handles click events\n    Responsive Design\n18 assets\n1167 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 96 ms\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      6) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      7) works within parent containers\n\n\n  0 passing (1m)\n  7 failing\n\n  1) ErrorBoundary\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"errorboundary\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:54:77)\n\n  2) ErrorBoundary\n       Core Functionality\n         responds to user interactions:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:76:16)\n\n  3) ErrorBoundary\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:112:16)\n\n  4) ErrorBoundary\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:143:26)\n\n  5) ErrorBoundary\n       User Interactions\n         handles click events:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:173:16)\n\n  6) ErrorBoundary\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"errorboundary\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:200:77)\n\n  7) ErrorBoundary\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"errorboundary\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/ErrorBoundary.cy.tsx:239:81)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1159 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 177 ms\n\n\n  VerticalSteps\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      2) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      3) supports keyboard navigation\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      4) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      5) works within parent containers\n\n\n  0 passing (1m)\n  5 failing\n\n  1) VerticalSteps\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"verticalsteps\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/VerticalSteps.cy.tsx:57:77)\n\n  2) VerticalSteps\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/VerticalSteps.cy.tsx:81:16)\n\n  3) VerticalSteps\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/VerticalSteps.cy.tsx:112:26)\n\n  4) VerticalSteps\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"verticalsteps\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/VerticalSteps.cy.tsx:143:77)\n\n  5) VerticalSteps\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], [data-testid=\"verticalsteps\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/ui/VerticalSteps.cy.tsx:182:81)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n16 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 155 ms\n\n\n  Icons\n    Core Functionality\n      ✓ renders Logo without crashing (45ms)\n      ✓ renders SunFilledIcon correctly (29ms)\n      ✓ renders MoonFilledIcon correctly (28ms)\n    Accessibility\n      ✓ meets basic accessibility standards (28ms)\n      ✓ supports keyboard navigation (25ms)\n    Responsive Design\n      ✓ adapts to different screen sizes (29ms)\n    Integration\n      ✓ works within parent containers (26ms)\n\n\n  7 passing (242ms)\n\n17 assets\n1155 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 179 ms\n\n\n  ThemeSwitch\n    Core Functionality\n      ✓ renders without crashing (38ms)\n      ✓ has toggle input (25ms)\n      ✓ shows sun or moon icon (23ms)\n      ✓ is clickable (97ms)\n\n\n  4 passing (212ms)\n\n21 assets\n1593 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 567 ms\n\n\n  LayoutWrapper\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n21 assets\n1593 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 129 ms\n21 assets\n1593 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 198 ms\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n    Accessibility\n      ✓ meets basic accessibility standards (34ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      3) supports keyboard navigation\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      4) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      5) works within parent containers\n\n\n  1 passing (1m)\n  5 failing\n\n  1) LayoutWrapper\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: expected '[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]' to be 'visible'\n\nThis element `[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]` is not visible because it has CSS property: `position: fixed` and it's being covered by another element:\n\n`<label aria-label=\"Switch to dark mode\" class=\"group relative max-w-fit inline-flex items-center justify-start touch-none tap-highlight-transparent select-none px-px transition-opacity hover:opacity-80 cursor-pointer\" data-testid=\"theme-switch\" data-component-category=\"ui\" data-selected=\"true\">...</label>`\n      at Context.eval (webpack-internal:///./app/components/layout/LayoutWrapper.cy.tsx:34:77)\n\n  2) LayoutWrapper\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: expected '[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]' to be 'visible'\n\nThis element `[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]` is not visible because it has CSS property: `position: fixed` and it's being covered by another element:\n\n`<label aria-label=\"Switch to dark mode\" class=\"group relative max-w-fit inline-flex items-center justify-start touch-none tap-highlight-transparent select-none px-px transition-opacity hover:opacity-80 cursor-pointer\" data-testid=\"theme-switch\" data-component-category=\"ui\" data-selected=\"true\">...</label>`\n      at Context.eval (webpack-internal:///./app/components/layout/LayoutWrapper.cy.tsx:52:77)\n\n  3) LayoutWrapper\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/LayoutWrapper.cy.tsx:103:26)\n\n  4) LayoutWrapper\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: expected '[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]' to be 'visible'\n\nThis element `[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]` is not visible because its parent `<li.text-medium.whitespace-nowrap.box-border.list-none.data-[active=true]:font-semibold.hidden.sm:flex.gap-2>` has CSS property: `display: none`\n      at Context.eval (webpack-internal:///./app/components/layout/LayoutWrapper.cy.tsx:131:77)\n\n  5) LayoutWrapper\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: expected '[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]' to be 'visible'\n\nThis element `[ <input.font-inherit.text-[100%].leading-[1.15].m-0.p-0.overflow-visible.box-border.absolute.top-0.w-full.h-full.opacity-[0.0001].z-[1].cursor-pointer.disabled:cursor-default>, 1 more... ]` is not visible because it has CSS property: `position: fixed` and it's being covered by another element:\n\n`<label aria-label=\"Switch to dark mode\" class=\"group relative max-w-fit inline-flex items-center justify-start touch-none tap-highlight-transparent select-none px-px transition-opacity hover:opacity-80 cursor-pointer\" data-testid=\"theme-switch\" data-component-category=\"ui\" data-selected=\"true\">...</label>`\n      at Context.eval (webpack-internal:///./app/components/layout/LayoutWrapper.cy.tsx:168:81)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 298 ms\n\n\n  NavbarUserMenu\n    Unauthenticated State\n      ✓ renders Sign In button for unauthenticated users (101ms)\n      ✓ Sign In button links to login page (28ms)\n    Authenticated State\n      ✓ renders user dropdown for authenticated users (7ms)\n      ✓ displays user initials when no profile photo (115ms)\n      (Attempt 1 of 3) handles logout action\n      (Attempt 2 of 3) handles logout action\n      1) handles logout action\n    Accessibility\n      ✓ meets basic accessibility standards (30ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 108 ms\n      2) supports keyboard navigation\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 106 ms\n      (Attempt 1 of 3) supports keyboard navigation in authenticated state\n      (Attempt 2 of 3) supports keyboard navigation in authenticated state\n      3) supports keyboard navigation in authenticated state\n    User Interactions\n      (Attempt 1 of 3) handles click events in unauthenticated state\n      (Attempt 2 of 3) handles click events in unauthenticated state\n      4) handles click events in unauthenticated state\n      (Attempt 1 of 3) handles dropdown interactions in authenticated state\n      (Attempt 2 of 3) handles dropdown interactions in authenticated state\n      5) handles dropdown interactions in authenticated state\n    Responsive Design\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 120 ms\n      (Attempt 1 of 3) adapts to different screen sizes - unauthenticated\n      (Attempt 2 of 3) adapts to different screen sizes - unauthenticated\n      6) adapts to different screen sizes - unauthenticated\n      (Attempt 1 of 3) adapts to different screen sizes - authenticated\n      (Attempt 2 of 3) adapts to different screen sizes - authenticated\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 161 ms\n      7) adapts to different screen sizes - authenticated\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      8) works within parent containers\n18 assets\n1340 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 105 ms\n      (Attempt 1 of 3) integrates properly with authentication context\n      (Attempt 2 of 3) integrates properly with authentication context\n      9) integrates properly with authentication context\n\n\n  5 passing (2m)\n  9 failing\n\n  1) NavbarUserMenu\n       Authenticated State\n         handles logout action:\n     CypressError: `cy.get()` could not find a registered alias for: `@logout`.\nAvailable aliases are: `authSessionAuthenticated, router-back, router-forward, router-prefetch, router-push, router-replace, router-refresh`.\n      at $Cy.aliasNotFoundFor (http://localhost:8082/__cypress/runner/cypress_runner.js:135808:66)\n      at $Cy.getAlias (http://localhost:8082/__cypress/runner/cypress_runner.js:135752:12)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135313:21)\n      at Object.subjectFn (http://localhost:8082/__cypress/runner/cypress_runner.js:147404:16)\n      at $Cy.verifyUpcomingAssertions (http://localhost:8082/__cypress/runner/cypress_runner.js:146732:31)\n      at onRetry (http://localhost:8082/__cypress/runner/cypress_runner.js:147395:15)\n      at retryQuery (http://localhost:8082/__cypress/runner/cypress_runner.js:147408:10)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:147561:17)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8082/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8082/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8082/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8082/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8082/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8082/__cypress/runner/cypress_runner.js:2256:14)\n\n  2) NavbarUserMenu\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:155:26)\n\n  3) NavbarUserMenu\n       Accessibility\n         supports keyboard navigation in authenticated state:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:183:26)\n\n  4) NavbarUserMenu\n       User Interactions\n         handles click events in unauthenticated state:\n     AssertionError: Timed out retrying after 4000ms: Expected to find content: 'Sign In' but never did.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:213:16)\n\n  5) NavbarUserMenu\n       User Interactions\n         handles dropdown interactions in authenticated state:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:235:16)\n\n  6) NavbarUserMenu\n       Responsive Design\n         adapts to different screen sizes - unauthenticated:\n     AssertionError: Timed out retrying after 4000ms: Expected to find content: 'Sign In' but never did.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:263:36)\n\n  7) NavbarUserMenu\n       Responsive Design\n         adapts to different screen sizes - authenticated:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"], button, div, span, svg`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:292:20)\n      at getRet (http://localhost:8082/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8082/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8082/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8082/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n  8) NavbarUserMenu\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"wrapper\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:335:16)\n\n  9) NavbarUserMenu\n       Integration\n         integrates properly with authentication context:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar-user-menu.cy.tsx:357:16)\n\n\n\n18 assets\n1543 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 187 ms\n\n\n  navbar\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n    Accessibility\n      ✓ meets basic accessibility standards (28ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      3) supports keyboard navigation\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      4) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      5) works within parent containers\n\n\n  1 passing (1m)\n  5 failing\n\n  1) navbar\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"navbar\"], [data-testid=\"navbar\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar.cy.tsx:27:70)\n\n  2) navbar\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"navbar\"], [data-testid=\"navbar\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar.cy.tsx:38:70)\n\n  3) navbar\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar.cy.tsx:75:26)\n\n  4) navbar\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"navbar\"], [data-testid=\"navbar\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar.cy.tsx:96:70)\n\n  5) navbar\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"navbar\"], [data-testid=\"navbar\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/layout/navbar.cy.tsx:133:74)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n16 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 486 ms\n\n\n  HeritLogo\n    Core Functionality\n      ✓ renders without crashing (39ms)\n      ✓ displays content correctly (28ms)\n      ✓ handles props correctly (27ms)\n    Accessibility\n      ✓ meets basic accessibility standards (27ms)\n      ✓ is not focusable (decorative element) (9ms)\n    Responsive Design\n      ✓ adapts to different screen sizes (31ms)\n    Integration\n      ✓ works within parent containers (28ms)\n\n\n  7 passing (219ms)\n\n17 assets\n1141 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 159 ms\n\n\n  HomePageClient\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n17 assets\n1141 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 61 ms\n      1) renders without crashing\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      3) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      4) supports keyboard navigation\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      5) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      6) works within parent containers\n\n\n  0 passing (1m)\n  6 failing\n\n  1) HomePageClient\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"home-page-client\"], [data-testid=\"homepageclient\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:46:93)\n      at getRet (http://localhost:8082/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8082/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8082/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8082/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8082/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n  2) HomePageClient\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"home-page-client\"], [data-testid=\"homepageclient\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:72:89)\n\n  3) HomePageClient\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:95:16)\n\n  4) HomePageClient\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:123:26)\n\n  5) HomePageClient\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"home-page-client\"], [data-testid=\"homepageclient\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:151:89)\n\n  6) HomePageClient\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid*=\"home-page-client\"], [data-testid=\"homepageclient\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/pages/HomePageClient.cy.tsx:188:93)\n      at withinFn (http://localhost:8082/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8082/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8082/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8082/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8082/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1156 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 285 ms\n\n\n  Counter\n    Core Functionality\n      ✓ renders without crashing (48ms)\n      ✓ displays content correctly (27ms)\n    Accessibility\n      ✓ meets basic accessibility standards (27ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n18 assets\n1156 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 52 ms\n      1) supports keyboard navigation\n    User Interactions\n      ✓ handles click events (107ms)\n    Responsive Design\n      ✓ adapts to different screen sizes (34ms)\n    Integration\n      ✓ works within parent containers (29ms)\n\n\n  6 passing (13s)\n  1 failing\n\n  1) Counter\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/examples/counter.cy.tsx:103:26)\n\n\n\n[1253:0904/185117.275978:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n[1253:0904/185117.275989:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n\nDevTools listening on ws://127.0.0.1:65185/devtools/browser/7dc335d3-07b0-4b9e-85e7-bbb612b0dfcc\n<<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Project is running at:\n<i> [webpack-dev-server] Loopback: \u001b[36mhttp://127.0.0.1:8082/\u001b[39m\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Content not from webpack is served from '\u001b[36m/Users/dean/code/Herit/public\u001b[39m' directory\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/main.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/main.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>>",
      "startTime": 1757008276523,
      "endTime": 1757009237394,
      "duration": 960871,
      "error": "Process exited with code 89",
      "individualTests": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "passRate": 0,
        "progress": 0
      }
    },
    "componentTestsCore": {
      "command": "npm run test:ct:core",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:ct:core\n> cypress run --component --config video=false,screenshotOnRunFailure=false --quiet --spec 'app/components/beneficiaries/**/*.cy.tsx,app/components/documents/**/*.cy.tsx,app/components/shared/**/*.cy.tsx,app/components/dashboard/**/*.cy.tsx,app/(dashboard)/**/*.cy.tsx,app/(auth)/**/*.cy.tsx,components/**/*.cy.tsx'\n\nYour configFile threw an error from: cypress.config.js\n\nWe stopped running your tests because your config file crashed.\n\nError: listen EADDRINUSE: address already in use 127.0.0.1:8082\n    at Server.setupListenHandle [as _listen2] (node:net:1937:16)\n    at listenInCluster (node:net:1994:12)\n    at node:net:2203:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n[1251:0904/185117.275906:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n[1251:0904/185117.275923:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n\nDevTools listening on ws://127.0.0.1:65184/devtools/browser/db35288b-58fb-4eec-802e-b7e95924461c\n",
      "startTime": 1757008276523,
      "endTime": 1757008281544,
      "duration": 5021,
      "error": "Process exited with code 1",
      "individualTests": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "passRate": 0,
        "progress": 0
      }
    }
  }
}