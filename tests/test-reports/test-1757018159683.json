{
  "executionId": "test-1757018159683",
  "timestamp": "2025-09-04T20:35:59.738Z",
  "status": "failed",
  "overallSuccess": false,
  "results": {
    "backendTests": {
      "command": "npm run test:unit -- tests/api",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:unit\n> NODE_ENV=test vitest run tests/api\n\n\n RUN  v3.2.4 /Users/dean/code/Herit\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nReceived data: {\n  firstName: \u001b[32m'John'\u001b[39m,\n  lastName: \u001b[32m'Doe'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  ppsNumber: \u001b[32m'1234567T'\u001b[39m,\n  addressLine1: \u001b[32m'123 Test Street'\u001b[39m,\n  addressLine2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  photo_url: \u001b[1mnull\u001b[22m,\n  photoMarkedForDeletion: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nCurrent user query result: {\n  id: \u001b[32m'ad9556bc-a4c2-45d7-b173-ec9315f001e7'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018169199-a95544dc@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:09.278Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:09.278Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'John Doe'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018169199-a95544dc@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'John Doe'\u001b[39m,\n    email: \u001b[32m'test-auth-1757018169199-a95544dc@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m'1234567T'\u001b[39m,\n    address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n    address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'John'\u001b[39m,\n  last_name: \u001b[32m'Doe'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'John'\u001b[39m,\n  last_name: \u001b[32m'Doe'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m'Apt 4'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Error States > validates required personal info fields\nReceived data: {\n  firstName: \u001b[32m''\u001b[39m,\n  lastName: \u001b[32m''\u001b[39m,\n  phoneNumber: \u001b[32m'invalid-phone'\u001b[39m,\n  dateOfBirth: \u001b[32m'invalid-date'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Error States > validates required personal info fields\nCurrent user query result: {\n  id: \u001b[32m'd380fab6-266b-470d-a8bf-351beda608eb'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018170137-e60fc049@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:10.210Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:10.210Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m''\u001b[39m,\n  email: \u001b[32m'test-auth-1757018170137-e60fc049@example.com'\u001b[39m,\n  phone: \u001b[32m'invalid-phone'\u001b[39m,\n  date_of_birth: \u001b[32m'invalid-date'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mfalse\u001b[39m,\n  error: ZodError: [\n    {\n      \"origin\": \"string\",\n      \"code\": \"too_small\",\n      \"minimum\": 1,\n      \"inclusive\": true,\n      \"path\": [\n        \"name\"\n      ],\n      \"message\": \"Name is required\"\n    },\n    {\n      \"origin\": \"string\",\n      \"code\": \"invalid_format\",\n      \"format\": \"regex\",\n      \"pattern\": \"/^(\\\\+353|0)[1-9]\\\\d{7,9}$/\",\n      \"path\": [\n        \"phone\"\n      ],\n      \"message\": \"Invalid Irish phone number (e.g., +353 1 234 5678)\"\n    }\n  ]\n      at new ZodError \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/core.js:30:39\u001b[90m)\u001b[39m\n      at Module.<anonymous> \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/parse.js:40:20\u001b[90m)\u001b[39m\n      at _.inst.safeParse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/classic/schemas.js:30:46\u001b[90m)\u001b[39m\n      at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:288:49\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n      at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:142:24\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n}\n\n ❯ tests/api/beneficiaries/count/count.test.ts (10 tests | 1 failed) 3260ms\n   ✓ /api/beneficiaries/count > Core Functionality > handles GET requests with valid authentication  814ms\n   ✓ /api/beneficiaries/count > Core Functionality > returns consistent response format  455ms\n   ✓ /api/beneficiaries/count > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/beneficiaries/count > Security > requires valid JWT authentication 2ms\n   ✓ /api/beneficiaries/count > Security > validates JWT signature integrity 2ms\n   ✓ /api/beneficiaries/count > Performance > responds within acceptable time with real authentication  485ms\n   ✓ /api/beneficiaries/count > Database Integrity > maintains data consistency with real database operations  497ms\n   ✓ /api/beneficiaries/count > Integration Scenarios > integrates with authentication workflow  509ms\n   ✓ /api/beneficiaries/count > Compliance > meets API standards with proper authentication  481ms\n   × /api/beneficiaries/count > Edge Cases > handles edge cases appropriately 7ms\n     → expected 500 to be less than 500\n ❯ tests/api/auth/google/callback/callback.test.ts (10 tests | 6 failed) 3626ms\n   × /api/auth/google/callback > Core Functionality > handles GET requests with valid authentication 806ms\n     → expected 307 to be less than 300\n   × /api/auth/google/callback > Core Functionality > handles POST requests with valid data 357ms\n     → POST is not a function\n   × /api/auth/google/callback > Error States > returns proper error for unauthenticated requests 82ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google/callback > Security > requires valid JWT authentication 82ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google/callback > Security > validates JWT signature integrity 75ms\n     → expected 307 to be greater than or equal to 400\n   ✓ /api/auth/google/callback > Performance > responds within acceptable time with real authentication  483ms\n   ✓ /api/auth/google/callback > Database Integrity > maintains data consistency with real database operations  453ms\n   ✓ /api/auth/google/callback > Integration Scenarios > integrates with authentication workflow  473ms\n   ✓ /api/auth/google/callback > Compliance > meets API standards with proper authentication  451ms\n   × /api/auth/google/callback > Edge Cases > handles malformed JSON appropriately 356ms\n     → POST is not a function\n ❯ tests/api/will/status/status.test.ts (10 tests | 1 failed) 3654ms\n   ✓ /api/will/status > Core Functionality > handles GET requests with valid authentication  819ms\n   × /api/will/status > Core Functionality > handles POST requests with valid data 476ms\n     → expected 404 to be less than 300\n   ✓ /api/will/status > Error States > returns proper error for unauthenticated requests 3ms\n   ✓ /api/will/status > Security > requires valid JWT authentication 1ms\n   ✓ /api/will/status > Security > validates JWT signature integrity 1ms\n   ✓ /api/will/status > Performance > responds within acceptable time with real authentication  486ms\n   ✓ /api/will/status > Database Integrity > maintains data consistency with real database operations  480ms\n   ✓ /api/will/status > Integration Scenarios > integrates with authentication workflow  498ms\n   ✓ /api/will/status > Compliance > meets API standards with proper authentication  508ms\n   ✓ /api/will/status > Edge Cases > handles malformed JSON appropriately  376ms\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts (10 tests | 4 failed) 3735ms\n   ✓ /api/auth/create-test-user > Core Functionality > handles GET requests with valid authentication  813ms\n   ✓ /api/auth/create-test-user > Core Functionality > handles POST requests with valid data  414ms\n   × /api/auth/create-test-user > Error States > returns proper error for unauthenticated requests 56ms\n     → expected 200 to be greater than or equal to 400\n   × /api/auth/create-test-user > Security > requires valid JWT authentication 63ms\n     → expected 200 to be greater than or equal to 400\n   × /api/auth/create-test-user > Security > validates JWT signature integrity 51ms\n     → expected 200 to be greater than or equal to 400\n   ✓ /api/auth/create-test-user > Performance > responds within acceptable time with real authentication  472ms\n   ✓ /api/auth/create-test-user > Database Integrity > maintains data consistency with real database operations  451ms\n   ✓ /api/auth/create-test-user > Integration Scenarios > integrates with authentication workflow  445ms\n   ✓ /api/auth/create-test-user > Compliance > meets API standards with proper authentication  483ms\n   × /api/auth/create-test-user > Edge Cases > handles malformed JSON appropriately 483ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/beneficiaries/beneficiaries.test.ts (10 tests | 1 failed) 3796ms\n   ✓ /api/beneficiaries > Core Functionality > handles authenticated requests with real JWT tokens  996ms\n   × /api/beneficiaries > Core Functionality > handles POST requests with valid data 383ms\n     → expected 400 to be less than 300\n   ✓ /api/beneficiaries > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/beneficiaries > Security > requires valid JWT authentication 1ms\n   ✓ /api/beneficiaries > Security > validates JWT signature integrity 1ms\n   ✓ /api/beneficiaries > Performance > responds within acceptable time with real authentication  514ms\n   ✓ /api/beneficiaries > Database Integrity > maintains data consistency with real database operations  511ms\n   ✓ /api/beneficiaries > Integration Scenarios > integrates with authentication workflow  497ms\n   ✓ /api/beneficiaries > Compliance > meets API standards with proper authentication  498ms\n   ✓ /api/beneficiaries > Edge Cases > handles malformed requests appropriately  390ms\n ❯ tests/api/rules/rules.test.ts (10 tests | 1 failed) 4110ms\n   ✓ /api/rules > Core Functionality > handles GET requests with valid authentication  930ms\n   × /api/rules > Core Functionality > handles POST requests with valid data 438ms\n     → expected 400 to be less than 300\n   ✓ /api/rules > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/rules > Security > requires valid JWT authentication 1ms\n   ✓ /api/rules > Security > validates JWT signature integrity 1ms\n   ✓ /api/rules > Performance > responds within acceptable time with real authentication  576ms\n   ✓ /api/rules > Database Integrity > maintains data consistency with real database operations  586ms\n   ✓ /api/rules > Integration Scenarios > integrates with authentication workflow  566ms\n   ✓ /api/rules > Compliance > meets API standards with proper authentication  575ms\n   ✓ /api/rules > Edge Cases > handles malformed JSON appropriately  431ms\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles POST requests with valid data\nOnboarding completion check: {\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  allStepsCompleted: \u001b[33mtrue\u001b[39m,\n  alreadyCompleted: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles POST requests with valid data\nMarked onboarding complete for user 3d51fbc0-17ae-4421-9eac-aef013966706\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nReceived data: {\n  firstName: \u001b[32m'Updated'\u001b[39m,\n  lastName: \u001b[32m'Name'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  addressLine1: \u001b[32m'123 New Street'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nCurrent user query result: {\n  id: \u001b[32m'ccc5b1b5-1d38-4b08-90d5-d27064fbaa15'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018172838-51c3376f@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:12.913Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:12.913Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Updated Name'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018172838-51c3376f@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Updated Name'\u001b[39m,\n    email: \u001b[32m'test-auth-1757018172838-51c3376f@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Updated'\u001b[39m,\n  last_name: \u001b[32m'Name'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\n=== CONSENT SIGNATURE API HIT ===\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\nSession check: {\n  isAuthenticated: \u001b[33mtrue\u001b[39m,\n  userId: \u001b[32m'ab6e770c-6b49-4d36-9af5-9e8281acea48'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Updated'\u001b[39m,\n  last_name: \u001b[32m'Name'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 New Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  addressLine1: \u001b[32m'123 Test Street'\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nCurrent user query result: {\n  id: \u001b[32m'94137164-69da-4a0c-ab16-06928c692b33'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018174177-1a29760d@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mfalse\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mfalse\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mfalse\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mfalse\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:14.252Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:14.252Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018174177-1a29760d@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757018174177-1a29760d@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m'Dublin'\u001b[39m,\n    county: \u001b[32m'Dublin'\u001b[39m,\n    eircode: \u001b[32m'D01 X123'\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mfalse\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[32m'123 Test Street'\u001b[39m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[32m'Dublin'\u001b[39m,\n  county: \u001b[32m'Dublin'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\n ❯ tests/api/debug/verification/verification.test.ts (10 tests | 3 failed) 3123ms\n   ✓ /api/debug/verification > Core Functionality > handles GET requests with valid authentication  602ms\n   × /api/debug/verification > Core Functionality > handles POST requests with valid data 357ms\n     → POST is not a function\n   × /api/debug/verification > Error States > returns proper error for unauthenticated requests 1ms\n     → POST is not a function\n   ✓ /api/debug/verification > Security > requires valid JWT authentication 0ms\n   ✓ /api/debug/verification > Security > validates JWT signature integrity 0ms\n   ✓ /api/debug/verification > Performance > responds within acceptable time with real authentication  429ms\n   ✓ /api/debug/verification > Database Integrity > maintains data consistency with real database operations  450ms\n   ✓ /api/debug/verification > Integration Scenarios > integrates with authentication workflow  482ms\n   ✓ /api/debug/verification > Compliance > meets API standards with proper authentication  426ms\n   × /api/debug/verification > Edge Cases > handles malformed JSON appropriately 371ms\n     → POST is not a function\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nOnboarding completion check: {\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  allStepsCompleted: \u001b[33mtrue\u001b[39m,\n  alreadyCompleted: \u001b[33mfalse\u001b[39m\n}\n\nstdout | tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nMarked onboarding complete for user 1eea2dd0-310f-4efa-8816-bd6873527b1e\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\n=== CONSENT SIGNATURE API HIT ===\n\nstdout | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\nSession check: {\n  isAuthenticated: \u001b[33mtrue\u001b[39m,\n  userId: \u001b[32m'8876ce03-4729-489b-9257-8a6a61766176'\u001b[39m\n}\n\n ❯ tests/api/onboarding/complete/complete.test.ts (10 tests | 9 failed) 3097ms\n   × /api/onboarding/complete > Core Functionality > handles GET requests with valid authentication 546ms\n     → GET is not a function\n   ✓ /api/onboarding/complete > Core Functionality > handles POST requests with valid data  474ms\n   × /api/onboarding/complete > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/onboarding/complete > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/onboarding/complete > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/onboarding/complete > Performance > responds within acceptable time with real authentication 415ms\n     → GET is not a function\n   × /api/onboarding/complete > Database Integrity > maintains data consistency with real database operations 417ms\n     → GET is not a function\n   × /api/onboarding/complete > Integration Scenarios > integrates with authentication workflow 386ms\n     → GET is not a function\n   × /api/onboarding/complete > Compliance > meets API standards with proper authentication 387ms\n     → GET is not a function\n   × /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately 468ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/rules/[id]/[id].test.ts (11 tests | 3 failed) 3031ms\n   × /api/rules/[id] > Core Functionality > handles GET requests with valid authentication 700ms\n     → expected 500 to be less than 300\n   × /api/rules/[id] > Core Functionality > handles PUT requests with valid data 375ms\n     → expected 500 to be less than 300\n   × /api/rules/[id] > Core Functionality > handles DELETE requests with authentication 396ms\n     → expected 500 to be less than 500\n   ✓ /api/rules/[id] > Error States > returns proper error for unauthenticated requests 3ms\n   ✓ /api/rules/[id] > Security > requires valid JWT authentication 2ms\n   ✓ /api/rules/[id] > Security > validates JWT signature integrity 2ms\n   ✓ /api/rules/[id] > Performance > responds within acceptable time with real authentication  392ms\n   ✓ /api/rules/[id] > Database Integrity > maintains data consistency with real database operations  402ms\n   ✓ /api/rules/[id] > Integration Scenarios > integrates with authentication workflow  373ms\n   ✓ /api/rules/[id] > Compliance > meets API standards with proper authentication  382ms\n   ✓ /api/rules/[id] > Edge Cases > handles edge cases appropriately 0ms\n ❯ tests/api/onboarding/signature/signature.test.ts (10 tests | 1 failed) 3112ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  601ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 401ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 0ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 1ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  474ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  431ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  427ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication  405ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  367ms\n ❯ tests/api/onboarding/verification/verification.test.ts (10 tests | 1 failed) 3141ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  607ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 403ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 1ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 1ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  481ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  441ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  407ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication  429ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  367ms\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts (10 tests | 9 failed) 2946ms\n   × /api/onboarding/consent-signature > Core Functionality > handles GET requests with valid authentication 557ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data 401ms\n     → expected 400 to be less than 300\n   × /api/onboarding/consent-signature > Error States > returns proper error for unauthenticated requests 2ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Security > requires valid JWT authentication 2ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Security > validates JWT signature integrity 2ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Performance > responds within acceptable time with real authentication 419ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Database Integrity > maintains data consistency with real database operations 392ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Integration Scenarios > integrates with authentication workflow 403ms\n     → GET is not a function\n   × /api/onboarding/consent-signature > Compliance > meets API standards with proper authentication 394ms\n     → GET is not a function\n   ✓ /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately  371ms\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nReceived data: {\n  firstName: \u001b[32m'Seán'\u001b[39m,\n  lastName: \u001b[32m'Ó Súilleabháin'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  ppsNumber: \u001b[32m'1234567T'\u001b[39m,\n  addressLine1: \u001b[32m'123 Sráid na hÉireann'\u001b[39m,\n  city: \u001b[32m'Baile Átha Cliath'\u001b[39m,\n  county: \u001b[32m'Átha Cliath'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nCurrent user query result: {\n  id: \u001b[32m'2cd26aca-7104-4054-a1a5-de9a69f08c7e'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018175965-92540776@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:16.049Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:16.049Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Seán Ó Súilleabháin'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018175965-92540776@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m'1234567T'\u001b[39m,\n  address_line_1: \u001b[32m'123 Sráid na hÉireann'\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m'Baile Átha Cliath'\u001b[39m,\n  county: \u001b[32m'Átha Cliath'\u001b[39m,\n  eircode: \u001b[32m'D01 X123'\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mfalse\u001b[39m,\n  error: ZodError: [\n    {\n      \"code\": \"invalid_value\",\n      \"values\": [\n        \"\",\n        \"Antrim\",\n        \"Armagh\",\n        \"Carlow\",\n        \"Cavan\",\n        \"Clare\",\n        \"Cork\",\n        \"Derry\",\n        \"Donegal\",\n        \"Down\",\n        \"Dublin\",\n        \"Fermanagh\",\n        \"Galway\",\n        \"Kerry\",\n        \"Kildare\",\n        \"Kilkenny\",\n        \"Laois\",\n        \"Leitrim\",\n        \"Limerick\",\n        \"Longford\",\n        \"Louth\",\n        \"Mayo\",\n        \"Meath\",\n        \"Monaghan\",\n        \"Offaly\",\n        \"Roscommon\",\n        \"Sligo\",\n        \"Tipperary\",\n        \"Tyrone\",\n        \"Waterford\",\n        \"Westmeath\",\n        \"Wexford\",\n        \"Wicklow\"\n      ],\n      \"path\": [\n        \"county\"\n      ],\n      \"message\": \"Invalid option: expected one of \\\"\\\"|\\\"Antrim\\\"|\\\"Armagh\\\"|\\\"Carlow\\\"|\\\"Cavan\\\"|\\\"Clare\\\"|\\\"Cork\\\"|\\\"Derry\\\"|\\\"Donegal\\\"|\\\"Down\\\"|\\\"Dublin\\\"|\\\"Fermanagh\\\"|\\\"Galway\\\"|\\\"Kerry\\\"|\\\"Kildare\\\"|\\\"Kilkenny\\\"|\\\"Laois\\\"|\\\"Leitrim\\\"|\\\"Limerick\\\"|\\\"Longford\\\"|\\\"Louth\\\"|\\\"Mayo\\\"|\\\"Meath\\\"|\\\"Monaghan\\\"|\\\"Offaly\\\"|\\\"Roscommon\\\"|\\\"Sligo\\\"|\\\"Tipperary\\\"|\\\"Tyrone\\\"|\\\"Waterford\\\"|\\\"Westmeath\\\"|\\\"Wexford\\\"|\\\"Wicklow\\\"\"\n    }\n  ]\n      at new ZodError \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/core.js:30:39\u001b[90m)\u001b[39m\n      at Module.<anonymous> \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/core/parse.js:40:20\u001b[90m)\u001b[39m\n      at _.inst.safeParse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/zod@4.0.17/node_modules/\u001b[4mzod\u001b[24m/v4/classic/schemas.js:30:46\u001b[90m)\u001b[39m\n      at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:288:49\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n      at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:397:24\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m,\n  photoMarkedForDeletion: \u001b[33mtrue\u001b[39m,\n  photo_url: \u001b[1mnull\u001b[22m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nCurrent user query result: {\n  id: \u001b[32m'8c2de895-7ef3-49a2-92f1-c916129c60be'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018176973-4bcde783@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:17.047Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:17.047Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018176973-4bcde783@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757018176973-4bcde783@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m''\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m''\u001b[39m,\n    county: \u001b[32m''\u001b[39m,\n    eircode: \u001b[32m''\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\n ❯ tests/api/onboarding/photo/photo.test.ts (10 tests | 1 failed) 2821ms\n   ✓ /api/onboarding > Core Functionality > handles authenticated requests with real JWT tokens  529ms\n   × /api/onboarding > Core Functionality > handles POST requests with valid data 367ms\n     → expected 500 to be less than 300\n   ✓ /api/onboarding > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/onboarding > Security > requires valid JWT authentication 0ms\n   ✓ /api/onboarding > Security > validates JWT signature integrity 0ms\n   ✓ /api/onboarding > Performance > responds within acceptable time with real authentication  373ms\n   ✓ /api/onboarding > Database Integrity > maintains data consistency with real database operations  367ms\n   ✓ /api/onboarding > Integration Scenarios > integrates with authentication workflow  402ms\n   ✓ /api/onboarding > Compliance > meets API standards with proper authentication  395ms\n   ✓ /api/onboarding > Edge Cases > handles malformed requests appropriately  383ms\n ❯ tests/api/audit/log-event/log-event.test.ts (10 tests | 9 failed) 2892ms\n   × /api/audit/log-event > Core Functionality > handles GET requests with valid authentication 540ms\n     → GET is not a function\n   ✓ /api/audit/log-event > Core Functionality > handles POST requests with valid data  433ms\n   × /api/audit/log-event > Error States > returns proper error for unauthenticated requests 1ms\n     → GET is not a function\n   × /api/audit/log-event > Security > requires valid JWT authentication 1ms\n     → GET is not a function\n   × /api/audit/log-event > Security > validates JWT signature integrity 1ms\n     → GET is not a function\n   × /api/audit/log-event > Performance > responds within acceptable time with real authentication 393ms\n     → GET is not a function\n   × /api/audit/log-event > Database Integrity > maintains data consistency with real database operations 373ms\n     → GET is not a function\n   × /api/audit/log-event > Integration Scenarios > integrates with authentication workflow 400ms\n     → GET is not a function\n   × /api/audit/log-event > Compliance > meets API standards with proper authentication 404ms\n     → GET is not a function\n   × /api/audit/log-event > Edge Cases > handles malformed JSON appropriately 341ms\n     → expected 200 to be greater than or equal to 400\n ❯ tests/api/beneficiaries/photo/photo.test.ts (10 tests | 9 failed) 2860ms\n   × /api/beneficiaries/photo > Core Functionality > handles GET requests with valid authentication 532ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data 403ms\n     → expected 500 to be less than 300\n   × /api/beneficiaries/photo > Error States > returns proper error for unauthenticated requests 2ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Security > requires valid JWT authentication 2ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Security > validates JWT signature integrity 1ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Performance > responds within acceptable time with real authentication 404ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Database Integrity > maintains data consistency with real database operations 388ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Integration Scenarios > integrates with authentication workflow 396ms\n     → GET is not a function\n   × /api/beneficiaries/photo > Compliance > meets API standards with proper authentication 386ms\n     → GET is not a function\n   ✓ /api/beneficiaries/photo > Edge Cases > handles malformed JSON appropriately  343ms\n ❯ tests/api/auth/google/google.test.ts (10 tests | 6 failed) 2829ms\n   × /api/auth/google > Core Functionality > handles GET requests with valid authentication 540ms\n     → expected 307 to be less than 300\n   × /api/auth/google > Core Functionality > handles POST requests with valid data 390ms\n     → POST is not a function\n   × /api/auth/google > Error States > returns proper error for unauthenticated requests 2ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google > Security > requires valid JWT authentication 1ms\n     → expected 307 to be greater than or equal to 400\n   × /api/auth/google > Security > validates JWT signature integrity 1ms\n     → expected 307 to be greater than or equal to 400\n   ✓ /api/auth/google > Performance > responds within acceptable time with real authentication  382ms\n   ✓ /api/auth/google > Database Integrity > maintains data consistency with real database operations  376ms\n   ✓ /api/auth/google > Integration Scenarios > integrates with authentication workflow  370ms\n   ✓ /api/auth/google > Compliance > meets API standards with proper authentication  386ms\n   × /api/auth/google > Edge Cases > handles malformed JSON appropriately 377ms\n     → POST is not a function\n ❯ tests/api/auth/refresh/refresh.test.ts (10 tests | 1 failed) 2807ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  540ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 386ms\n     → expected 401 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/auth > Security > requires valid JWT authentication 0ms\n   ✓ /api/auth > Security > validates JWT signature integrity 1ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  387ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations  400ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow  379ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  373ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately  335ms\n ❯ tests/api/auth/logout/logout.test.ts (10 tests | 9 failed) 2865ms\n   × /api/auth/logout > Core Functionality > handles GET requests with valid authentication 566ms\n     → GET is not a function\n   ✓ /api/auth/logout > Core Functionality > handles POST requests with valid data  379ms\n   × /api/auth/logout > Error States > returns proper error for unauthenticated requests 2ms\n     → GET is not a function\n   × /api/auth/logout > Security > requires valid JWT authentication 1ms\n     → GET is not a function\n   × /api/auth/logout > Security > validates JWT signature integrity 1ms\n     → GET is not a function\n   × /api/auth/logout > Performance > responds within acceptable time with real authentication 386ms\n     → GET is not a function\n   × /api/auth/logout > Database Integrity > maintains data consistency with real database operations 377ms\n     → GET is not a function\n   × /api/auth/logout > Integration Scenarios > integrates with authentication workflow 379ms\n     → GET is not a function\n   × /api/auth/logout > Compliance > meets API standards with proper authentication 381ms\n     → GET is not a function\n   × /api/auth/logout > Edge Cases > handles malformed JSON appropriately 390ms\n     → expected 200 to be greater than or equal to 400\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nReceived data: {\n  firstName: \u001b[32m'Test'\u001b[39m,\n  lastName: \u001b[32m'User'\u001b[39m,\n  phoneNumber: \u001b[32m'+353871234567'\u001b[39m,\n  dateOfBirth: \u001b[32m'1990-01-01'\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nCurrent user query result: {\n  id: \u001b[32m'75d7572b-d1a6-4cf4-b747-e8506c06149e'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018178912-eaa5e645@example.com'\u001b[39m,\n  password_hash: \u001b[1mnull\u001b[22m,\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  onboarding_status: \u001b[32m'not_started'\u001b[39m,\n  onboarding_current_step: \u001b[32m'personal_info'\u001b[39m,\n  onboarding_completed_at: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m,\n  personal_info_completed_at: \u001b[1mnull\u001b[22m,\n  signature_completed: \u001b[33mtrue\u001b[39m,\n  signature_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consent_completed: \u001b[33mtrue\u001b[39m,\n  legal_consent_completed_at: \u001b[1mnull\u001b[22m,\n  legal_consents: \u001b[1mnull\u001b[22m,\n  verification_completed: \u001b[33mtrue\u001b[39m,\n  verification_completed_at: \u001b[1mnull\u001b[22m,\n  verification_session_id: \u001b[1mnull\u001b[22m,\n  verification_status: \u001b[32m'verified'\u001b[39m,\n  onboarding_completed: \u001b[33mtrue\u001b[39m,\n  auth_provider: \u001b[1mnull\u001b[22m,\n  auth_provider_id: \u001b[1mnull\u001b[22m,\n  created_at: \u001b[35m2025-09-04T20:36:18.984Z\u001b[39m,\n  updated_at: \u001b[35m2025-09-04T20:36:18.984Z\u001b[39m\n}\nValidation data: {\n  name: \u001b[32m'Test User'\u001b[39m,\n  email: \u001b[32m'test-auth-1757018178912-eaa5e645@example.com'\u001b[39m,\n  phone: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[32m''\u001b[39m,\n  address_line_1: \u001b[32m''\u001b[39m,\n  address_line_2: \u001b[32m''\u001b[39m,\n  city: \u001b[32m''\u001b[39m,\n  county: \u001b[32m''\u001b[39m,\n  eircode: \u001b[32m''\u001b[39m,\n  country: \u001b[32m'Ireland'\u001b[39m\n}\nValidation result: {\n  success: \u001b[33mtrue\u001b[39m,\n  data: {\n    name: \u001b[32m'Test User'\u001b[39m,\n    email: \u001b[32m'test-auth-1757018178912-eaa5e645@example.com'\u001b[39m,\n    phone: \u001b[32m'+353871234567'\u001b[39m,\n    pps_number: \u001b[32m''\u001b[39m,\n    address_line_1: \u001b[32m''\u001b[39m,\n    address_line_2: \u001b[32m''\u001b[39m,\n    city: \u001b[32m''\u001b[39m,\n    county: \u001b[32m''\u001b[39m,\n    eircode: \u001b[32m''\u001b[39m,\n    country: \u001b[32m'Ireland'\u001b[39m,\n    date_of_birth: \u001b[32m'1990-01-01'\u001b[39m\n  }\n}\nOld data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nNew data: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\nstdout | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Token Management > maintains session consistency across operations\nAbout to compare fields - oldData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[1mnull\u001b[22m,\n  date_of_birth: \u001b[1mnull\u001b[22m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\nAbout to compare fields - newData: {\n  first_name: \u001b[32m'Test'\u001b[39m,\n  last_name: \u001b[32m'User'\u001b[39m,\n  phone_number: \u001b[32m'+353871234567'\u001b[39m,\n  date_of_birth: \u001b[32m'1990-01-01'\u001b[39m,\n  pps_number: \u001b[1mnull\u001b[22m,\n  address_line_1: \u001b[1mnull\u001b[22m,\n  address_line_2: \u001b[1mnull\u001b[22m,\n  city: \u001b[1mnull\u001b[22m,\n  county: \u001b[1mnull\u001b[22m,\n  eircode: \u001b[1mnull\u001b[22m,\n  profile_photo_url: \u001b[1mnull\u001b[22m,\n  personal_info_completed: \u001b[33mtrue\u001b[39m\n}\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts (25 tests | 4 failed) 11885ms\n   ✓ /api/onboarding/personal-info > Core Functionality > handles GET requests with valid authentication  889ms\n   ✓ /api/onboarding/personal-info > Core Functionality > returns completion status correctly  570ms\n   ✓ /api/onboarding/personal-info > Core Functionality > handles POST requests with valid personal info data  776ms\n   ✓ /api/onboarding/personal-info > Error States > returns 401 for unauthenticated GET requests 79ms\n   ✓ /api/onboarding/personal-info > Error States > returns 401 for unauthenticated POST requests 82ms\n   ✓ /api/onboarding/personal-info > Error States > validates required personal info fields  537ms\n   ✓ /api/onboarding/personal-info > Security > requires valid JWT authentication for GET 75ms\n   ✓ /api/onboarding/personal-info > Security > requires valid JWT authentication for POST 90ms\n   ✓ /api/onboarding/personal-info > Security > validates JWT signature integrity 83ms\n   × /api/onboarding/personal-info > Security > prevents OAuth email tampering 73ms\n     → Failed query: insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"\nparams: 37eb0bb3-5662-4f3c-9efc-e0265b8ba98c,original@example.com,Test,User,true,true,true,true,verified\n   ✓ /api/onboarding/personal-info > Performance > responds within acceptable time with real authentication  576ms\n   ✓ /api/onboarding/personal-info > Performance > handles concurrent requests efficiently  715ms\n   ✓ /api/onboarding/personal-info > Database Integrity > maintains user data consistency with real database operations  552ms\n   ✓ /api/onboarding/personal-info > Database Integrity > creates proper audit trail for personal info updates  765ms\n   × /api/onboarding/personal-info > Integration Scenarios > integrates with OAuth data source tracking 575ms\n     → expected false to be true // Object.is equality\n   ✓ /api/onboarding/personal-info > Integration Scenarios > handles complete onboarding workflow progression  746ms\n   ✓ /api/onboarding/personal-info > Compliance > meets API standards with proper authentication  526ms\n   ✓ /api/onboarding/personal-info > Compliance > follows REST API conventions  516ms\n   × /api/onboarding/personal-info > Compliance > validates Irish compliance requirements 531ms\n     → expected 400 to be less than 300\n   ✓ /api/onboarding/personal-info > Edge Cases > handles requests with malformed JSON  477ms\n   ✓ /api/onboarding/personal-info > Edge Cases > handles photo deletion workflow  734ms\n   × /api/onboarding/personal-info > Edge Cases > handles users with incomplete profile data 564ms\n     → expected 'Test' to be '' // Object.is equality\n   ✓ /api/onboarding/personal-info > Token Management > validates access token structure and claims  556ms\n   ✓ /api/onboarding/personal-info > Token Management > handles expired tokens appropriately 85ms\n   ✓ /api/onboarding/personal-info > Token Management > maintains session consistency across operations  710ms\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts (10 tests | 9 failed) 2969ms\n   × /api/rules/validate-allocation > Core Functionality > handles GET requests with valid authentication 558ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Core Functionality > handles POST requests with valid data 395ms\n     → expected 400 to be less than 300\n   × /api/rules/validate-allocation > Error States > returns proper error for unauthenticated requests 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Security > requires valid JWT authentication 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Security > validates JWT signature integrity 0ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Performance > responds within acceptable time with real authentication 383ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Database Integrity > maintains data consistency with real database operations 416ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Integration Scenarios > integrates with authentication workflow 410ms\n     → GET is not a function\n   × /api/rules/validate-allocation > Compliance > meets API standards with proper authentication 406ms\n     → GET is not a function\n   ✓ /api/rules/validate-allocation > Edge Cases > handles malformed JSON appropriately  398ms\n ❯ tests/api/stripe/webhook/webhook.test.ts (9 tests | 1 failed) 2487ms\n   × /api/stripe/webhook > Core Functionality > handles POST requests with valid data 540ms\n     → expected 400 to be less than 300\n   ✓ /api/stripe/webhook > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/stripe/webhook > Security > requires valid JWT authentication 0ms\n   ✓ /api/stripe/webhook > Security > validates JWT signature integrity 0ms\n   ✓ /api/stripe/webhook > Performance > responds within acceptable time with real authentication  397ms\n   ✓ /api/stripe/webhook > Database Integrity > maintains data consistency with real database operations  377ms\n   ✓ /api/stripe/webhook > Integration Scenarios > integrates with authentication workflow  394ms\n   ✓ /api/stripe/webhook > Compliance > meets API standards with proper authentication  392ms\n   ✓ /api/stripe/webhook > Edge Cases > handles malformed JSON appropriately  385ms\n ❯ tests/api/assets/categories/categories.test.ts (10 tests | 1 failed) 2539ms\n   ✓ /api/assets/categories > Core Functionality > handles GET requests with valid authentication  567ms\n   ✓ /api/assets/categories > Core Functionality > returns consistent response format  411ms\n   ✓ /api/assets/categories > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/assets/categories > Security > requires valid JWT authentication 1ms\n   ✓ /api/assets/categories > Security > validates JWT signature integrity 1ms\n   ✓ /api/assets/categories > Performance > responds within acceptable time with real authentication  406ms\n   ✓ /api/assets/categories > Database Integrity > maintains data consistency with real database operations  385ms\n   ✓ /api/assets/categories > Integration Scenarios > integrates with authentication workflow  377ms\n   ✓ /api/assets/categories > Compliance > meets API standards with proper authentication  385ms\n   × /api/assets/categories > Edge Cases > handles edge cases appropriately 2ms\n     → expected 500 to be less than 500\n ❯ tests/api/auth/register/register.test.ts (10 tests | 1 failed) 2855ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  571ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 399ms\n     → expected 400 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 1ms\n   ✓ /api/auth > Security > requires valid JWT authentication 0ms\n   ✓ /api/auth > Security > validates JWT signature integrity 1ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  382ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations  382ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow  374ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  372ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately  370ms\n ❯ tests/api/debug-user/debug-user.test.ts (10 tests | 4 failed) 2866ms\n   × /api/debug-user > Core Functionality > handles GET requests with valid authentication 554ms\n     → expected 400 to be less than 300\n   × /api/debug-user > Core Functionality > handles POST requests with valid data 399ms\n     → POST is not a function\n   × /api/debug-user > Error States > returns proper error for unauthenticated requests 1ms\n     → POST is not a function\n   ✓ /api/debug-user > Security > requires valid JWT authentication 1ms\n   ✓ /api/debug-user > Security > validates JWT signature integrity 1ms\n   ✓ /api/debug-user > Performance > responds within acceptable time with real authentication  394ms\n   ✓ /api/debug-user > Database Integrity > maintains data consistency with real database operations  395ms\n   ✓ /api/debug-user > Integration Scenarios > integrates with authentication workflow  369ms\n   ✓ /api/debug-user > Compliance > meets API standards with proper authentication  379ms\n   × /api/debug-user > Edge Cases > handles malformed JSON appropriately 370ms\n     → POST is not a function\n ❯ tests/api/auth/login/login.test.ts (10 tests | 1 failed) 2867ms\n   ✓ /api/auth > Core Functionality > handles authenticated requests with real JWT tokens  590ms\n   × /api/auth > Core Functionality > handles POST requests with valid data 411ms\n     → expected 400 to be less than 300\n   ✓ /api/auth > Error States > returns proper error for unauthenticated requests 2ms\n   ✓ /api/auth > Security > requires valid JWT authentication 0ms\n   ✓ /api/auth > Security > validates JWT signature integrity 1ms\n   ✓ /api/auth > Performance > responds within acceptable time with real authentication  391ms\n   ✓ /api/auth > Database Integrity > maintains data consistency with real database operations  388ms\n   ✓ /api/auth > Integration Scenarios > integrates with authentication workflow  381ms\n   ✓ /api/auth > Compliance > meets API standards with proper authentication  354ms\n   ✓ /api/auth > Edge Cases > handles malformed requests appropriately  346ms\n ❯ tests/api/documents/requirements/[type]/[type].test.ts (10 tests | 3 failed) 2456ms\n   ✓ /api/documents/requirements/[type] > Core Functionality > handles GET requests with valid authentication  617ms\n   ✓ /api/documents/requirements/[type] > Core Functionality > returns consistent response format  388ms\n   × /api/documents/requirements/[type] > Error States > returns proper error for unauthenticated requests 6ms\n     → expected 200 to be greater than or equal to 400\n   × /api/documents/requirements/[type] > Security > requires valid JWT authentication 1ms\n     → expected 200 to be greater than or equal to 400\n   × /api/documents/requirements/[type] > Security > validates JWT signature integrity 1ms\n     → expected 200 to be greater than or equal to 400\n   ✓ /api/documents/requirements/[type] > Performance > responds within acceptable time with real authentication  365ms\n   ✓ /api/documents/requirements/[type] > Database Integrity > maintains data consistency with real database operations  361ms\n   ✓ /api/documents/requirements/[type] > Integration Scenarios > integrates with authentication workflow  347ms\n   ✓ /api/documents/requirements/[type] > Compliance > meets API standards with proper authentication  367ms\n   ✓ /api/documents/requirements/[type] > Edge Cases > handles edge cases appropriately 0ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > handles POST requests with valid authentication\nOnboarding step 0 completed for user c3e4dfda-9f66-4699-8442-c0e04420c7bb\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > saves step completion data correctly\nOnboarding step 1 completed for user d7f7117e-533e-4146-bf76-79449e6ab1ec\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Core Functionality > handles final step completion\nOnboarding step 3 completed for user 1fd020de-9da5-43c5-8e86-95a063bca1ac\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Security > prevents data injection through step data\nOnboarding step 0 completed for user ce46cb0f-7321-4aa6-b5eb-cf8dc06f22f5\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > responds within acceptable time with real authentication\nOnboarding step 1 completed for user ccfc5230-ec92-4e8e-b778-06eecd484e07\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 0 completed for user 9e095cd2-a6c7-4207-9b59-99ea309ed4a2\n\n ✓ tests/api/will/will.test.ts (10 tests) 3616ms\n   ✓ /api/will > Core Functionality > handles GET requests with valid authentication  746ms\n   ✓ /api/will > Core Functionality > handles POST requests with valid data  497ms\n   ✓ /api/will > Performance > responds within acceptable time with real authentication  519ms\n   ✓ /api/will > Database Integrity > maintains data consistency with real database operations  498ms\n   ✓ /api/will > Integration Scenarios > integrates with authentication workflow  490ms\n   ✓ /api/will > Compliance > meets API standards with proper authentication  500ms\n   ✓ /api/will > Edge Cases > handles malformed JSON appropriately  354ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 1 completed for user 9e095cd2-a6c7-4207-9b59-99ea309ed4a2\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Performance > handles concurrent requests efficiently\nOnboarding step 2 completed for user 9e095cd2-a6c7-4207-9b59-99ea309ed4a2\n\n ✓ tests/api/assets/[id]/[id].test.ts (11 tests) 4166ms\n   ✓ /api/assets/[id] > Core Functionality > handles GET requests with valid authentication  702ms\n   ✓ /api/assets/[id] > Core Functionality > handles PUT requests with valid data  630ms\n   ✓ /api/assets/[id] > Core Functionality > handles DELETE requests with authentication  623ms\n   ✓ /api/assets/[id] > Performance > responds within acceptable time with real authentication  549ms\n   ✓ /api/assets/[id] > Database Integrity > maintains data consistency with real database operations  523ms\n   ✓ /api/assets/[id] > Integration Scenarios > integrates with authentication workflow  575ms\n   ✓ /api/assets/[id] > Compliance > meets API standards with proper authentication  553ms\n ✓ tests/api/beneficiaries/[id]/[id].test.ts (11 tests) 4163ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles GET requests with valid authentication  781ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles PUT requests with valid data  613ms\n   ✓ /api/beneficiaries/[id] > Core Functionality > handles DELETE requests with authentication  527ms\n   ✓ /api/beneficiaries/[id] > Performance > responds within acceptable time with real authentication  591ms\n   ✓ /api/beneficiaries/[id] > Database Integrity > maintains data consistency with real database operations  540ms\n   ✓ /api/beneficiaries/[id] > Integration Scenarios > integrates with authentication workflow  556ms\n   ✓ /api/beneficiaries/[id] > Compliance > meets API standards with proper authentication  546ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Database Integrity > maintains user data consistency with real database operations\nOnboarding step 0 completed for user c2749274-684a-4282-a865-a659a0f3985e\n\n ✓ tests/api/onboarding/legal-consent/legal-consent.test.ts (12 tests) 4576ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > handles GET requests with authentication  645ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > handles POST requests with valid consent data  477ms\n   ✓ /api/onboarding/legal-consent > Core Functionality > returns user's consent data correctly  477ms\n   ✓ /api/onboarding/legal-consent > Error States > validates required consent fields  389ms\n   ✓ /api/onboarding/legal-consent > Error States > validates consent data format  401ms\n   ✓ /api/onboarding/legal-consent > Security > handles malicious consent data safely  443ms\n   ✓ /api/onboarding/legal-consent > Security > stores IP address and user agent for audit trail  436ms\n   ✓ /api/onboarding/legal-consent > Performance & Edge Cases > responds within acceptable time  451ms\n   ✓ /api/onboarding/legal-consent > Performance & Edge Cases > handles concurrent requests safely  567ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Database Integrity > creates proper audit trail for step completions\nOnboarding step 2 completed for user 33785b25-8d04-4061-a1c6-ed59d6c7f4c1\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > integrates with onboarding progression workflow\nOnboarding step 0 completed for user 2630054d-9ced-43c5-8873-f81ec127b5fa\n\n ✓ tests/api/auth/session/session.test.ts (21 tests) 5483ms\n   ✓ /api/auth/session > Core Functionality > handles GET requests with valid session  525ms\n   ✓ /api/auth/session > Core Functionality > returns user session data correctly  395ms\n   ✓ /api/auth/session > Security > prevents session fixation attacks  445ms\n   ✓ /api/auth/session > Performance > responds within acceptable time with real authentication  390ms\n   ✓ /api/auth/session > Performance > handles concurrent authenticated requests efficiently  379ms\n   ✓ /api/auth/session > Database Integrity > maintains user data consistency with real database queries  411ms\n   ✓ /api/auth/session > Integration Scenarios > integrates with onboarding status workflow  377ms\n   ✓ /api/auth/session > Integration Scenarios > provides complete user context for authenticated requests  389ms\n   ✓ /api/auth/session > Compliance > meets API standards with proper authentication  383ms\n   ✓ /api/auth/session > Compliance > follows REST API conventions  374ms\n   ✓ /api/auth/session > Edge Cases > handles users with incomplete profile data  356ms\n   ✓ /api/auth/session > Token Management > validates access token structure and claims  331ms\n   ✓ /api/auth/session > Token Management > handles refresh token scenarios appropriately  348ms\n   ✓ /api/auth/session > Token Management > maintains session consistency across requests  365ms\n ✓ tests/api/test-db/test-db.test.ts (12 tests) 8ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 1 completed for user 60d91e9d-582e-49ad-845e-7f5c3ff66ae7\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 2 completed for user 60d91e9d-582e-49ad-845e-7f5c3ff66ae7\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow\nOnboarding step 3 completed for user 60d91e9d-582e-49ad-845e-7f5c3ff66ae7\n\n ✓ tests/api/health/health.test.ts (12 tests) 7ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Compliance > meets API standards with proper authentication\nOnboarding step 1 completed for user cfe32523-8081-44a4-9650-361143aed7d1\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Compliance > follows REST API conventions\nOnboarding step 0 completed for user 9ef26bdb-760f-4ccb-9b28-4dd2512de9b5\n\n ✓ tests/api/onboarding/verification/sync/sync.test.ts (10 tests) 2840ms\n   ✓ /api/onboarding/verification/sync > Core Functionality > handles GET requests with valid authentication  573ms\n   ✓ /api/onboarding/verification/sync > Core Functionality > handles POST requests with valid data  450ms\n   ✓ /api/onboarding/verification/sync > Performance > responds within acceptable time with real authentication  448ms\n   ✓ /api/onboarding/verification/sync > Database Integrity > maintains data consistency with real database operations  457ms\n   ✓ /api/onboarding/verification/sync > Integration Scenarios > integrates with authentication workflow  459ms\n   ✓ /api/onboarding/verification/sync > Compliance > meets API standards with proper authentication  446ms\n ✓ tests/api/documents/[id]/[id].test.ts (10 tests) 2509ms\n   ✓ /api/documents/[id] > Core Functionality > handles GET requests with valid authentication  539ms\n   ✓ /api/documents/[id] > Core Functionality > handles DELETE requests with authentication  389ms\n   ✓ /api/documents/[id] > Performance > responds within acceptable time with real authentication  407ms\n   ✓ /api/documents/[id] > Database Integrity > maintains data consistency with real database operations  387ms\n   ✓ /api/documents/[id] > Integration Scenarios > integrates with authentication workflow  402ms\n   ✓ /api/documents/[id] > Compliance > meets API standards with proper authentication  380ms\n ✓ tests/api/assets/[id]/documents/documents.test.ts (9 tests) 2443ms\n   ✓ /api/assets/[id]/documents > Core Functionality > handles GET requests with valid authentication  622ms\n   ✓ /api/assets/[id]/documents > Performance > responds within acceptable time with real authentication  464ms\n   ✓ /api/assets/[id]/documents > Database Integrity > maintains data consistency with real database operations  445ms\n   ✓ /api/assets/[id]/documents > Integration Scenarios > integrates with authentication workflow  438ms\n   ✓ /api/assets/[id]/documents > Compliance > meets API standards with proper authentication  469ms\n ✓ tests/api/onboarding/status/status.test.ts (10 tests) 2913ms\n   ✓ /api/onboarding/status > Core Functionality > handles GET requests with valid authentication  564ms\n   ✓ /api/onboarding/status > Core Functionality > returns consistent onboarding status data  392ms\n   ✓ /api/onboarding/status > Performance > responds within acceptable time with real authentication  395ms\n   ✓ /api/onboarding/status > Database Integrity > maintains data consistency with real database operations  397ms\n   ✓ /api/onboarding/status > Integration Scenarios > integrates with authentication workflow  399ms\n   ✓ /api/onboarding/status > Compliance > meets API standards with proper authentication  383ms\n   ✓ /api/onboarding/status > Edge Cases > handles edge cases appropriately  378ms\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Edge Cases > handles null data for non-personal info steps\nOnboarding step 1 completed for user a08d946a-a9f4-44a2-865e-87694f978dd5\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > validates access token structure and claims\nOnboarding step 1 completed for user a68b2d45-99e3-4cf3-8304-26dfd6900150\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > maintains session consistency across step saves\nOnboarding step 2 completed for user 6d54046f-1916-4053-85cb-9b35496619b8\n\nstdout | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Token Management > maintains session consistency across step saves\nOnboarding step 1 completed for user 6d54046f-1916-4053-85cb-9b35496619b8\n\n ✓ tests/api/onboarding/save-step/save-step.test.ts (23 tests) 9857ms\n   ✓ /api/onboarding/save-step > Core Functionality > handles POST requests with valid authentication  691ms\n   ✓ /api/onboarding/save-step > Core Functionality > saves step completion data correctly  536ms\n   ✓ /api/onboarding/save-step > Core Functionality > handles final step completion  539ms\n   ✓ /api/onboarding/save-step > Error States > validates step number range  398ms\n   ✓ /api/onboarding/save-step > Error States > validates step number type  420ms\n   ✓ /api/onboarding/save-step > Security > prevents data injection through step data  517ms\n   ✓ /api/onboarding/save-step > Performance > responds within acceptable time with real authentication  503ms\n   ✓ /api/onboarding/save-step > Performance > handles concurrent requests efficiently  702ms\n   ✓ /api/onboarding/save-step > Database Integrity > maintains user data consistency with real database operations  512ms\n   ✓ /api/onboarding/save-step > Database Integrity > creates proper audit trail for step completions  490ms\n   ✓ /api/onboarding/save-step > Integration Scenarios > integrates with onboarding progression workflow  478ms\n   ✓ /api/onboarding/save-step > Integration Scenarios > handles step progression through onboarding flow  817ms\n   ✓ /api/onboarding/save-step > Compliance > meets API standards with proper authentication  526ms\n   ✓ /api/onboarding/save-step > Compliance > follows REST API conventions  519ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles requests with malformed JSON  376ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles requests with missing step parameter  357ms\n   ✓ /api/onboarding/save-step > Edge Cases > handles null data for non-personal info steps  512ms\n   ✓ /api/onboarding/save-step > Token Management > validates access token structure and claims  471ms\n   ✓ /api/onboarding/save-step > Token Management > maintains session consistency across step saves  480ms\n ✓ tests/api/assets/assets.test.ts (21 tests) 11698ms\n   ✓ /api/assets > Core Functionality > handles GET requests to retrieve user assets  858ms\n   ✓ /api/assets > Core Functionality > handles POST requests to create new assets  468ms\n   ✓ /api/assets > Error States > returns 400 for POST with missing required fields  493ms\n   ✓ /api/assets > Error States > handles database errors gracefully  498ms\n   ✓ /api/assets > Security > prevents access to other users' assets  603ms\n   ✓ /api/assets > Security > validates asset type enum values  503ms\n   ✓ /api/assets > Security > prevents XSS in asset metadata  436ms\n   ✓ /api/assets > Performance > responds within acceptable time for asset retrieval  1742ms\n   ✓ /api/assets > Performance > handles concurrent asset creation efficiently  643ms\n   ✓ /api/assets > Database Integrity > maintains asset-user relationship integrity  531ms\n   ✓ /api/assets > Database Integrity > handles asset metadata JSON storage correctly  526ms\n   ✓ /api/assets > Integration Scenarios > integrates with asset categorization system  811ms\n   ✓ /api/assets > Integration Scenarios > supports asset valuation workflow  485ms\n   ✓ /api/assets > Compliance > meets API standards for asset management  566ms\n   ✓ /api/assets > Compliance > follows REST API conventions for assets  656ms\n   ✓ /api/assets > Edge Cases > handles assets with zero value  493ms\n   ✓ /api/assets > Edge Cases > handles very long asset names  406ms\n   ✓ /api/assets > Edge Cases > handles empty asset lists gracefully  521ms\n   ✓ /api/assets > Edge Cases > handles unicode characters in asset names  451ms\n\n Test Files  26 failed | 13 passed (39)\n      Tests  99 failed | 348 passed (447)\n   Start at  21:36:06\n   Duration  27.48s (transform 635ms, setup 6.22s, collect 11.22s, tests 142.91s, environment 6.79s, prepare 1.59s)\n\nstderr | tests/api/beneficiaries/beneficiaries.test.ts > /api/beneficiaries > Edge Cases > handles malformed requests appropriately\nError creating beneficiary: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/route.ts:107:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/beneficiaries.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/rules.test.ts > /api/rules > Edge Cases > handles malformed JSON appropriately\nError creating rule: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/route.ts:130:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/rules.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles GET requests with valid authentication\nError fetching rule: DrizzleQueryError: Failed query: select \"id\", \"user_id\", \"name\", \"description\", \"rule_definition\", \"priority\", \"is_active\", \"created_at\", \"updated_at\" from \"inheritance_rules\" where (\"inheritance_rules\".\"id\" = $1 and \"inheritance_rules\".\"user_id\" = $2)\nparams: test-id-123,\n    at PostgresJsPreparedQuery.queryWithCache \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/pg-core/session.ts:73:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/postgres-js/session.ts:58:17\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:54:20\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:27:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  query: \u001b[32m'select \"id\", \"user_id\", \"name\", \"description\", \"rule_definition\", \"priority\", \"is_active\", \"created_at\", \"updated_at\" from \"inheritance_rules\" where (\"inheritance_rules\".\"id\" = $1 and \"inheritance_rules\".\"user_id\" = $2)'\u001b[39m,\n  params: [ \u001b[32m'test-id-123'\u001b[39m, \u001b[90mundefined\u001b[39m ],\n  cause: Error: UNDEFINED_VALUE: Undefined values are not allowed\n      at handleValue \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/types.js:83:20\u001b[90m)\u001b[39m\n      at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:225:38\n      at Array.forEach (<anonymous>)\n      at build \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:225:25\u001b[90m)\u001b[39m\n      at Object.execute \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:167:7\u001b[90m)\u001b[39m\n      at go \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/index.js:345:14\u001b[90m)\u001b[39m\n      at Query.handler \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/index.js:334:14\u001b[90m)\u001b[39m\n      at Query.handle \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/query.js:140:65\u001b[90m)\u001b[39m\n  \u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m {\n    code: \u001b[32m'UNDEFINED_VALUE'\u001b[39m\n  }\n}\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles PUT requests with valid data\nError updating rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.PUT \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:108:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:43:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles DELETE requests with authentication\nError deleting rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.DELETE \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:267:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:52:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Error States > returns proper error for unauthenticated requests\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:64:27\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Security > requires valid JWT authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:74:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Security > validates JWT signature integrity\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:87:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Performance > responds within acceptable time with real authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:99:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Database Integrity > maintains data consistency with real database operations\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:112:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Integration Scenarios > integrates with authentication workflow\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:123:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Compliance > meets API standards with proper authentication\nError fetching rule: TypeError: Cannot read properties of undefined (reading 'id')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/[id]/route.ts:58:76\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/[id]/[id].test.ts:134:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/signature/signature.test.ts > /api/onboarding > Edge Cases > handles malformed requests appropriately\nSignature save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/signature/route.ts:74:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/signature/signature.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Edge Cases > handles malformed JSON appropriately\nConsent signature save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/consent-signature/route.ts:27:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/consent-signature/consent-signature.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/photo/photo.test.ts:52:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/photo/photo.test.ts:42:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Core Functionality > handles POST requests with valid data\nAudit logging error: DrizzleQueryError: Failed query: insert into \"audit_events\" (\"id\", \"user_id\", \"event_type\", \"event_action\", \"resource_type\", \"resource_id\", \"event_data\", \"old_data\", \"new_data\", \"ip_address\", \"user_agent\", \"session_id\", \"event_time\") values (default, $1, default, default, default, default, $2, default, default, $3, $4, default, default)\nparams: a0295009-c62f-473e-909d-48281a722e14,{},unknown,unknown\n    at PostgresJsPreparedQuery.queryWithCache \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/\u001b[4msrc\u001b[24m/pg-core/session.ts:73:11\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/audit/log-event/route.ts:33:5\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/audit/log-event/log-event.test.ts:42:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20 {\n  query: \u001b[32m'insert into \"audit_events\" (\"id\", \"user_id\", \"event_type\", \"event_action\", \"resource_type\", \"resource_id\", \"event_data\", \"old_data\", \"new_data\", \"ip_address\", \"user_agent\", \"session_id\", \"event_time\") values (default, $1, default, default, default, default, $2, default, default, $3, $4, default, default)'\u001b[39m,\n  params: [\n    \u001b[32m'a0295009-c62f-473e-909d-48281a722e14'\u001b[39m,\n    \u001b[32m'{}'\u001b[39m,\n    \u001b[32m'unknown'\u001b[39m,\n    \u001b[32m'unknown'\u001b[39m\n  ],\n  cause: PostgresError: null value in column \"event_type\" of relation \"audit_events\" violates not-null constraint\n      at ErrorResponse \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:794:26\u001b[90m)\u001b[39m\n      at handle \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:480:6\u001b[90m)\u001b[39m\n      at Socket.data \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/postgres@3.4.7/node_modules/\u001b[4mpostgres\u001b[24m/src/connection.js:315:9\u001b[90m)\u001b[39m\n  \u001b[90m    at Socket.emit (node:events:507:28)\u001b[39m\n  \u001b[90m    at addChunk (node:internal/streams/readable:559:12)\u001b[39m\n  \u001b[90m    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\u001b[39m\n  \u001b[90m    at Socket.Readable.push (node:internal/streams/readable:390:5)\u001b[39m\n  \u001b[90m    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)\u001b[39m {\n    severity_local: \u001b[32m'ERROR'\u001b[39m,\n    severity: \u001b[32m'ERROR'\u001b[39m,\n    code: \u001b[32m'23502'\u001b[39m,\n    detail: \u001b[32m'Failing row contains (5e7583cb-bc24-43a3-8475-c3c6349460e2, a0295009-c62f-473e-909d-48281a722e14, null, null, null, null, {}, null, null, unknown, unknown, null, 2025-09-04 20:36:16.581042).'\u001b[39m,\n    schema_name: \u001b[32m'public'\u001b[39m,\n    table_name: \u001b[32m'audit_events'\u001b[39m,\n    column_name: \u001b[32m'event_type'\u001b[39m,\n    file: \u001b[32m'execMain.c'\u001b[39m,\n    line: \u001b[32m'1982'\u001b[39m,\n    routine: \u001b[32m'ExecConstraints'\u001b[39m\n  }\n}\n\nstderr | tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles requests with malformed JSON\nPersonal info save error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/personal-info/route.ts:184:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/personal-info/personal-info.test.ts:412:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Edge Cases > handles malformed requests appropriately\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/photo/photo.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Edge Cases > handles malformed JSON appropriately\nPhoto upload error: DOMException [InvalidStateError]: Failed to construct FormData object: The \"content-type\" header is neither \"application/x-www-form-urlencoded\" nor \"multipart/form-data\".\n    at NextRequest.formData \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:473:9\u001b[90m)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/beneficiaries/photo/route.ts:18:36\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/beneficiaries/photo/photo.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Edge Cases > handles malformed JSON appropriately\nAudit logging error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/audit/log-event/route.ts:10:7\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/audit/log-event/log-event.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Edge Cases > handles malformed JSON appropriately\nError validating allocation: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/rules/validate-allocation/route.ts:45:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/rules/validate-allocation/validate-allocation.test.ts:148:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/auth/register/register.test.ts > /api/auth > Edge Cases > handles malformed requests appropriately\nRegistration error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at registerHandler \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/auth/register/route.ts:11:54\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/lib/rate-limit.ts:111:22\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/auth/register/register.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/auth/login/login.test.ts > /api/auth > Edge Cases > handles malformed requests appropriately\nLogin error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at loginHandler \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/auth/login/route.ts:11:33\u001b[90m)\u001b[39m\n    at Module.<anonymous> \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/lib/rate-limit.ts:111:22\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/auth/login/login.test.ts:188:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/assets/categories/categories.test.ts > /api/assets/categories > Edge Cases > handles edge cases appropriately\nAsset categories fetch error: TypeError: Cannot read properties of undefined (reading 'isAuthenticated')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/assets/categories/route.ts:16:18\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/assets/categories/categories.test.ts:134:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Error States > handles database failures gracefully\nDatabase connection test failed: Error: Database connection failed\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:112:23\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:155:11\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:26\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1863:10\u001b[90m)\u001b[39m\n    at runTest \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1574:12\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at runSuite \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n    at runSuite \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:1729:8\u001b[90m)\u001b[39m\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Security > validates authentication when required\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:144:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Compliance > meets API standards\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:223:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/test-db/test-db.test.ts > /api/test-db > Edge Cases > handles empty requests\nDatabase connection test failed: TypeError: Cannot read properties of undefined (reading '0')\n    at Module.GET \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/test-db/route.ts:14:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/test-db/test-db.test.ts:236:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\nstderr | tests/api/onboarding/save-step/save-step.test.ts > /api/onboarding/save-step > Edge Cases > handles requests with malformed JSON\nSave step error: SyntaxError: Unexpected token 'j', \"{\"malformed\": json}\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at NextRequest.json \u001b[90m(file:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/happy-dom@18.0.1/node_modules/\u001b[4mhappy-dom\u001b[24m/src/fetch/Request.ts:419:15\u001b[90m)\u001b[39m\n\u001b[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)\u001b[39m\n    at Module.POST \u001b[90m(/Users/dean/code/Herit/\u001b[39mapp/api/onboarding/save-step/route.ts:20:18\u001b[90m)\u001b[39m\n    at \u001b[90m/Users/dean/code/Herit/\u001b[39mtests/api/onboarding/save-step/save-step.test.ts:383:24\n    at \u001b[90mfile:///Users/dean/code/Herit/\u001b[39mnode_modules/\u001b[4m.pnpm\u001b[24m/@vitest+runner@3.2.4/node_modules/\u001b[4m@vitest\u001b[24m/runner/dist/chunk-hooks.js:752:20\n\n\n⎯⎯⎯⎯⎯⎯ Failed Tests 99 ⎯⎯⎯⎯⎯⎯⎯\n\n FAIL  tests/api/beneficiaries/beneficiaries.test.ts > /api/beneficiaries > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/beneficiaries/beneficiaries.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/debug-user/debug-user.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Error States > returns proper error for unauthenticated requests\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:61:48\n     59|         body: JSON.stringify({}),\n     60|       });\n     61|       const postResponse = await routeHandlers.POST(postRequest);\n       |                                                ^\n     62|       expect(postResponse.status).toBeGreaterThanOrEqual(400);\n     63|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/99]⎯\n\n FAIL  tests/api/debug-user/debug-user.test.ts > /api/debug-user > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/debug-user/debug-user.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/99]⎯\n\n FAIL  tests/api/rules/rules.test.ts > /api/rules > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/rules.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/99]⎯\n\n FAIL  tests/api/assets/categories/categories.test.ts > /api/assets/categories > Edge Cases > handles edge cases appropriately\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/assets/categories/categories.test.ts:136:31\n    134|       const response = await routeHandlers.GET(new NextRequest('http:/…\n    135|       expect(response).toBeDefined();\n    136|       expect(response.status).toBeLessThan(500); // Should not crash\n       |                               ^\n    137|     });\n    138|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/audit/log-event/log-event.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/99]⎯\n\n FAIL  tests/api/audit/log-event/log-event.test.ts > /api/audit/log-event > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/audit/log-event/log-event.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Error States > returns proper error for unauthenticated requests\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:61:48\n     59|         body: JSON.stringify({}),\n     60|       });\n     61|       const postResponse = await routeHandlers.POST(postRequest);\n       |                                                ^\n     62|       expect(postResponse.status).toBeGreaterThanOrEqual(400);\n     63|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/99]⎯\n\n FAIL  tests/api/debug/verification/verification.test.ts > /api/debug/verification > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/debug/verification/verification.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/99]⎯\n\n FAIL  tests/api/beneficiaries/count/count.test.ts > /api/beneficiaries/count > Edge Cases > handles edge cases appropriately\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/beneficiaries/count/count.test.ts:136:31\n    134|       const response = await routeHandlers.GET(new NextRequest('http:/…\n    135|       expect(response).toBeDefined();\n    136|       expect(response.status).toBeLessThan(500); // Should not crash\n       |                               ^\n    137|     });\n    138|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Core Functionality > handles POST requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/beneficiaries/photo/photo.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/99]⎯\n\n FAIL  tests/api/beneficiaries/photo/photo.test.ts > /api/beneficiaries/photo > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/beneficiaries/photo/photo.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Security > requires valid JWT authentication\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Security > validates JWT signature integrity\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/99]⎯\n\n FAIL  tests/api/auth/create-test-user/create-test-user.test.ts > /api/auth/create-test-user > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/create-test-user/create-test-user.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/99]⎯\n\n FAIL  tests/api/auth/login/login.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/login/login.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 307 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/google/google.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/auth/google/google.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Security > requires valid JWT authentication\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Security > validates JWT signature integrity\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/google.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/99]⎯\n\n FAIL  tests/api/auth/google/google.test.ts > /api/auth/google > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/auth/google/google.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/auth/logout/logout.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/99]⎯\n\n FAIL  tests/api/auth/logout/logout.test.ts > /api/auth/logout > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/auth/logout/logout.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/99]⎯\n\n FAIL  tests/api/auth/refresh/refresh.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 401 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/refresh/refresh.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/99]⎯\n\n FAIL  tests/api/auth/register/register.test.ts > /api/auth > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/register/register.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/complete/complete.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/99]⎯\n\n FAIL  tests/api/onboarding/complete/complete.test.ts > /api/onboarding/complete > Edge Cases > handles malformed JSON appropriately\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/onboarding/complete/complete.test.ts:150:31\n    148|       const response = await routeHandlers.POST(request);\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n    151|     });\n    152|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/99]⎯\n\n FAIL  tests/api/onboarding/consent-signature/consent-signature.test.ts > /api/onboarding/consent-signature > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/onboarding/consent-signature/consent-signature.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Security > prevents OAuth email tampering\nError: Failed query: insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"\nparams: 37eb0bb3-5662-4f3c-9efc-e0265b8ba98c,original@example.com,Test,User,true,true,true,true,verified\n ❯ PostgresJsPreparedQuery.queryWithCache node_modules/.pnpm/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/src/pg-core/session.ts:73:11\n ❯ node_modules/.pnpm/drizzle-orm@0.44.4_@types+pg@8.15.5_postgres@3.4.7/node_modules/src/postgres-js/session.ts:58:17\n ❯ Function.createTestUser tests/test-database-utils.ts:35:20\n     33|     verification_status?: string;\n     34|   }) {\n     35|     const [user] = await db.insert(users).values({\n       |                    ^\n     36|       id: randomUUID(),\n     37|       email: userData.email,\n ❯ Function.createAuthenticatedTestUser tests/test-auth-utils.ts:55:18\n ❯ setupAuthenticatedTest tests/test-setup-real-auth.ts:30:23\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:191:27\n\nCaused by: PostgresError: duplicate key value violates unique constraint \"app_users_email_unique\"\n ❯ ErrorResponse node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:794:26\n ❯ handle node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:480:6\n ❯ Socket.data node_modules/.pnpm/postgres@3.4.7/node_modules/postgres/src/connection.js:315:9\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯\nSerialized Error: { severity_local: 'ERROR', severity: 'ERROR', code: '23505', detail: 'Key (email)=(original@example.com) already exists.', schema_name: 'public', table_name: 'app_users', constraint_name: 'app_users_email_unique', file: 'nbtinsert.c', routine: '_bt_check_unique', query: 'insert into \"app_users\" (\"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\") values ($1, $2, default, $3, $4, default, default, default, default, default, default, default, default, default, default, default, default, $5, default, $6, default, $7, default, default, $8, default, default, $9, default, default, default, default) returning \"id\", \"email\", \"password_hash\", \"first_name\", \"last_name\", \"phone_number\", \"date_of_birth\", \"pps_number\", \"profile_photo_url\", \"address_line_1\", \"address_line_2\", \"city\", \"county\", \"eircode\", \"onboarding_status\", \"onboarding_current_step\", \"onboarding_completed_at\", \"personal_info_completed\", \"personal_info_completed_at\", \"signature_completed\", \"signature_completed_at\", \"legal_consent_completed\", \"legal_consent_completed_at\", \"legal_consents\", \"verification_completed\", \"verification_completed_at\", \"verification_session_id\", \"verification_status\", \"onboarding_completed\", \"auth_provider\", \"auth_provider_id\", \"created_at\", \"updated_at\"', parameters: [ '37eb0bb3-5662-4f3c-9efc-e0265b8ba98c', 'original@example.com', 'Test', 'User', 't', 't', 't', 't', 'verified' ], args: [ '37eb0bb3-5662-4f3c-9efc-e0265b8ba98c', 'original@example.com', 'Test', 'User', true, true, true, true, 'verified' ], types: [ 2950, 1043, 1043, 1043, 16, 16, 16, 16, 46250 ] }\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Integration Scenarios > integrates with OAuth data source tracking\nAssertionError: expected false to be true // Object.is equality\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[32m- true\u001b[39m\n\u001b[31m+ false\u001b[39m\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:315:42\n    313|       \n    314|       const data = await response.json();\n    315|       expect(data.dataSource.from_oauth).toBe(true);\n       |                                          ^\n    316|       expect(data.dataSource.provider).toBe('google');\n    317|       expect(data.dataSource.has_profile_photo).toBe(true);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Compliance > validates Irish compliance requirements\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:399:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/99]⎯\n\n FAIL  tests/api/onboarding/personal-info/personal-info.test.ts > /api/onboarding/personal-info > Edge Cases > handles users with incomplete profile data\nAssertionError: expected 'Test' to be '' // Object.is equality\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n\u001b[31m+ Test\u001b[39m\n\n ❯ tests/api/onboarding/personal-info/personal-info.test.ts:461:44\n    459|       \n    460|       const data = await response.json();\n    461|       expect(data.personalInfo.first_name).toBe('');\n       |                                            ^\n    462|       expect(data.personalInfo.last_name).toBe('');\n    463|       expect(data.personalInfo.phone_number).toBe('');\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/99]⎯\n\n FAIL  tests/api/onboarding/photo/photo.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/photo/photo.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/99]⎯\n\n FAIL  tests/api/onboarding/signature/signature.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/signature/signature.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/[id]/[id].test.ts:29:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles PUT requests with valid data\nAssertionError: expected 500 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/[id]/[id].test.ts:45:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/99]⎯\n\n FAIL  tests/api/rules/[id]/[id].test.ts > /api/rules/[id] > Core Functionality > handles DELETE requests with authentication\nAssertionError: expected 500 to be less than 500\n ❯ tests/api/rules/[id]/[id].test.ts:55:31\n     53|       \n     54|       expect(response).toBeDefined();\n     55|       expect(response.status).toBeLessThan(500);\n       |                               ^\n     56|     });\n     57|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/99]⎯\n\n FAIL  tests/api/onboarding/verification/verification.test.ts > /api/onboarding > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/onboarding/verification/verification.test.ts:53:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Core Functionality > handles GET requests with valid authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:26:44\n     24|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n     25| \n     26|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     27|       \n     28|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Error States > returns proper error for unauthenticated requests\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:53:47\n     51|       \n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n       |                                               ^\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n     55|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Security > requires valid JWT authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:71:44\n     69|       \n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n     73|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Security > validates JWT signature integrity\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:84:44\n     82|         }\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n     86|     });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Performance > responds within acceptable time with real authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:96:44\n     94| \n     95|       const startTime = performance.now();\n     96|       const response = await routeHandlers.GET(request);\n       |                                            ^\n     97|       const responseTime = performance.now() - startTime;\n     98|       \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Database Integrity > maintains data consistency with real database operations\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:109:44\n    107|       \n    108|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    109|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    110|       \n    111|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Integration Scenarios > integrates with authentication workflow\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:120:44\n    118|       \n    119|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    120|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    121|       \n    122|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/99]⎯\n\n FAIL  tests/api/rules/validate-allocation/validate-allocation.test.ts > /api/rules/validate-allocation > Compliance > meets API standards with proper authentication\nTypeError: GET is not a function\n ❯ tests/api/rules/validate-allocation/validate-allocation.test.ts:131:44\n    129|       \n    130|       const request = createAuthenticatedRequest(url, { method: 'GET' …\n    131|       const response = await routeHandlers.GET(request);\n       |                                            ^\n    132|       \n    133|       expect(response).toBeDefined();\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/99]⎯\n\n FAIL  tests/api/stripe/webhook/webhook.test.ts > /api/stripe/webhook > Core Functionality > handles POST requests with valid data\nAssertionError: expected 400 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/stripe/webhook/webhook.test.ts:33:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/99]⎯\n\n FAIL  tests/api/will/status/status.test.ts > /api/will/status > Core Functionality > handles POST requests with valid data\nAssertionError: expected 404 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/will/status/status.test.ts:44:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Core Functionality > handles GET requests with valid authentication\nAssertionError: expected 307 to be less than 300\n ❯ Object.expectSuccessfulResponse tests/test-setup-real-auth.ts:238:29\n    236|   expectSuccessfulResponse(response: Response) {\n    237|     expect(response.status).toBeGreaterThanOrEqual(200);\n    238|     expect(response.status).toBeLessThan(300);\n       |                             ^\n    239|   },\n    240|   \n ❯ tests/api/auth/google/callback/callback.test.ts:28:22\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Core Functionality > handles POST requests with valid data\nTypeError: POST is not a function\n ❯ tests/api/auth/google/callback/callback.test.ts:42:44\n     40|       }, authContext);\n     41| \n     42|       const response = await routeHandlers.POST(request);\n       |                                            ^\n     43|       \n     44|       TestAssertions.expectSuccessfulResponse(response);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest);\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       const postRequest = new NextRequest(url, {\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Security > requires valid JWT authentication\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:72:31\n     70|       const request = new NextRequest(url, { method: 'GET' });\n     71|       const response = await routeHandlers.GET(request);\n     72|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     73|     });\n     74| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Security > validates JWT signature integrity\nAssertionError: expected 307 to be greater than or equal to 400\n ❯ tests/api/auth/google/callback/callback.test.ts:85:31\n     83|       });\n     84|       const response = await routeHandlers.GET(request);\n     85|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     86|     });\n     87|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/99]⎯\n\n FAIL  tests/api/auth/google/callback/callback.test.ts > /api/auth/google/callback > Edge Cases > handles malformed JSON appropriately\nTypeError: POST is not a function\n ❯ tests/api/auth/google/callback/callback.test.ts:148:44\n    146|       }, authContext);\n    147| \n    148|       const response = await routeHandlers.POST(request);\n       |                                            ^\n    149|       expect(response).toBeDefined();\n    150|       expect(response.status).toBeGreaterThanOrEqual(400);\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Error States > returns proper error for unauthenticated requests\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:54:34\n     52|       const getRequest = new NextRequest(url, { method: 'GET' });\n     53|       const getResponse = await routeHandlers.GET(getRequest, { params…\n     54|       expect(getResponse.status).toBeGreaterThanOrEqual(400);\n       |                                  ^\n     55|       \n     56|       // This route only supports GET\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Security > requires valid JWT authentication\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:66:31\n     64|       const request = new NextRequest(url, { method: 'GET' });\n     65|       const response = await routeHandlers.GET(request, { params: Prom…\n     66|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     67|     });\n     68| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/99]⎯\n\n FAIL  tests/api/documents/requirements/[type]/[type].test.ts > /api/documents/requirements/[type] > Security > validates JWT signature integrity\nAssertionError: expected 200 to be greater than or equal to 400\n ❯ tests/api/documents/requirements/[type]/[type].test.ts:79:31\n     77|       });\n     78|       const response = await routeHandlers.GET(request, { params: Prom…\n     79|       expect(response.status).toBeGreaterThanOrEqual(400);\n       |                               ^\n     80|     });\n     81|   });\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/99]⎯\n\n",
      "startTime": 1757018166123,
      "endTime": 1757018193996,
      "duration": 27873,
      "total": 464,
      "passed": 295,
      "failed": 99,
      "skipped": 0,
      "passRate": 64,
      "progress": 85,
      "error": "Process exited with code 1",
      "currentTest": "Starting tests...",
      "individualTests": {
        "total": 464,
        "passed": 295,
        "failed": 99,
        "skipped": 0,
        "passRate": 64,
        "progress": 85
      }
    },
    "linting": {
      "command": "npm run lint",
      "status": "completed",
      "output": "\n> herit@0.1.0 lint\n> eslint --fix\n\n\n/Users/dean/code/Herit/app/(auth)/layout.tsx\n  1:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(auth)/login/page.tsx\n  22:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/LegalConsentStep.tsx\n  199:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/PersonalInfoStep.cy.tsx\n  23:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/PersonalInfoStep.tsx\n  120:11  warning  Unexpected console statement  no-console\n  142:25  warning  Unexpected console statement  no-console\n  224:27  warning  Unexpected console statement  no-console\n  252:25  warning  Unexpected console statement  no-console\n  273:25  warning  Unexpected console statement  no-console\n  278:7   warning  Unexpected console statement  no-console\n  296:25  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/SignatureStamp-optimized.cy.tsx\n   9:3  warning  'timestamp' is defined but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                          @typescript-eslint/no-unused-vars\n  41:9  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/SignatureStep.tsx\n   29:3  warning  'onChange' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  113:9  warning  'handleBackToCreation' is assigned a value but never used                       @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(auth)/onboarding/components/VerificationStep.tsx\n   59:5  warning  Unexpected console statement  no-console\n   68:9  warning  Unexpected console statement  no-console\n   82:9  warning  Unexpected console statement  no-console\n   88:7  warning  Unexpected console statement  no-console\n  137:5  warning  Unexpected console statement  no-console\n  153:9  warning  Unexpected console statement  no-console\n  163:9  warning  Unexpected console statement  no-console\n  183:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(auth)/onboarding/page.tsx\n   48:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   86:5   warning  Unexpected console statement                                                           no-console\n  101:9   warning  Unexpected console statement                                                           no-console\n  110:9   warning  Unexpected console statement                                                           no-console\n  135:5   warning  Unexpected console statement                                                           no-console\n  142:5   warning  Unexpected console statement                                                           no-console\n  149:5   warning  Unexpected console statement                                                           no-console\n  153:7   warning  Unexpected console statement                                                           no-console\n  159:9   warning  Unexpected console statement                                                           no-console\n  174:11  warning  Unexpected console statement                                                           no-console\n  182:11  warning  Unexpected console statement                                                           no-console\n  193:13  warning  Unexpected console statement                                                           no-console\n  198:9   warning  Unexpected console statement                                                           no-console\n  206:7   warning  Unexpected console statement                                                           no-console\n  212:9   warning  Unexpected console statement                                                           no-console\n  216:11  warning  Unexpected console statement                                                           no-console\n  219:9   warning  Unexpected console statement                                                           no-console\n  227:7   warning  Unexpected console statement                                                           no-console\n  233:9   warning  Unexpected console statement                                                           no-console\n  241:11  warning  Unexpected console statement                                                           no-console\n  244:9   warning  Unexpected console statement                                                           no-console\n  251:7   warning  Unexpected console statement                                                           no-console\n  283:7   warning  Unexpected console statement                                                           no-console\n  322:7   warning  Unexpected console statement                                                           no-console\n  350:7   warning  Unexpected console statement                                                           no-console\n  355:7   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(auth)/signup/page.tsx\n  14:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  82:15  warning  'confirmPassword' is assigned a value but never used                                   @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/assets/[id]/edit/page.tsx\n  8:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/assets/add/page.tsx\n    62:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   160:5   warning  Unexpected console statement                                                           no-console\n   161:5   warning  Unexpected console statement                                                           no-console\n   166:9   warning  Unexpected console statement                                                           no-console\n   167:9   warning  Unexpected console statement                                                           no-console\n   171:11  warning  Unexpected console statement                                                           no-console\n   176:13  warning  Unexpected console statement                                                           no-console\n   179:11  warning  Unexpected console statement                                                           no-console\n   185:9   warning  Unexpected console statement                                                           no-console\n   189:7   warning  Unexpected console statement                                                           no-console\n   194:5   warning  Unexpected console statement                                                           no-console\n   202:9   warning  Unexpected console statement                                                           no-console\n   203:9   warning  Unexpected console statement                                                           no-console\n   204:9   warning  Unexpected console statement                                                           no-console\n   205:9   warning  Unexpected console statement                                                           no-console\n   209:9   warning  Unexpected console statement                                                           no-console\n   219:9   warning  Unexpected console statement                                                           no-console\n   237:7   warning  Unexpected console statement                                                           no-console\n   238:7   warning  Unexpected console statement                                                           no-console\n   241:7   warning  Unexpected console statement                                                           no-console\n   248:7   warning  Unexpected console statement                                                           no-console\n   249:7   warning  Unexpected console statement                                                           no-console\n   254:9   warning  Unexpected console statement                                                           no-console\n   255:9   warning  Unexpected console statement                                                           no-console\n   260:9   warning  Unexpected console statement                                                           no-console\n   268:9   warning  Unexpected console statement                                                           no-console\n   275:7   warning  Unexpected console statement                                                           no-console\n   288:5   warning  Unexpected console statement                                                           no-console\n   289:5   warning  Unexpected console statement                                                           no-console\n   290:5   warning  Unexpected console statement                                                           no-console\n   303:7   warning  Unexpected console statement                                                           no-console\n   811:21  warning  Unexpected console statement                                                           no-console\n   815:21  warning  Unexpected console statement                                                           no-console\n  1037:17  warning  Unexpected console statement                                                           no-console\n  1038:17  warning  Unexpected console statement                                                           no-console\n  1039:17  warning  Unexpected console statement                                                           no-console\n  1040:17  warning  Unexpected console statement                                                           no-console\n  1041:17  warning  Unexpected console statement                                                           no-console\n  1045:21  warning  Unexpected console statement                                                           no-console\n  1048:21  warning  Unexpected console statement                                                           no-console\n  1054:19  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/assets/page.tsx\n  39:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  46:21  warning  'setSortOrder' is assigned a value but never used                                      @typescript-eslint/no-unused-vars\n  75:9   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/[id]/edit/page.tsx\n  20:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/add/page.tsx\n  13:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/beneficiaries/page.tsx\n  29:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/dashboard/DashboardClient.tsx\n  29:11  warning  'DashboardStats' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/dashboard/page.tsx\n  8:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/layout.tsx\n  4:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/CreateRuleModal.cy.tsx\n  20:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/CreateRuleModal.tsx\n  213:9  warning  Unexpected console statement  no-console\n  270:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/EditRuleModal.cy.tsx\n  21:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/EditRuleModal.tsx\n  216:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/components/ViewRuleModal.tsx\n  46:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/(dashboard)/rules/page.tsx\n  27:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  64:9  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/test-shared-form/page.tsx\n   9:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n  13:5  warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/(dashboard)/will/WillClient.tsx\n  22:12  warning  'willError' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/(dashboard)/will/page.tsx\n  7:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/_lib/QueryProvider.cy.tsx\n  16:9   warning  'queryClient' is assigned a value but never used  @typescript-eslint/no-unused-vars\n  39:17  warning  'queryClient' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/_lib/error.tsx\n  5:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/api/assets/[id]/documents/route.ts\n   73:5   warning  Unexpected console statement                 no-console\n   75:7   warning  Unexpected console statement                 no-console\n  121:7   warning  Unexpected console statement                 no-console\n  125:7   warning  Unexpected console statement                 no-console\n  166:5   warning  Unexpected console statement                 no-console\n  167:5   warning  Unexpected console statement                 no-console\n  196:11  warning  'filter' is assigned a value but never used  @typescript-eslint/no-unused-vars\n  221:5   warning  Unexpected console statement                 no-console\n\n/Users/dean/code/Herit/app/api/assets/[id]/route.ts\n   52:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  146:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  210:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/assets/categories/route.ts\n  12:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  37:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/assets/route.ts\n  164:5   warning  Unexpected console statement       no-console\n  277:12  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/audit/log-event/route.ts\n  45:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/create-test-user/route.ts\n  75:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/google/callback/route.ts\n   39:7  warning  Unexpected console statement  no-console\n  166:7  warning  Unexpected console statement  no-console\n  216:7  warning  Unexpected console statement  no-console\n  505:7  warning  Unexpected console statement  no-console\n  534:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/google/route.ts\n   6:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  56:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/auth/login/route.ts\n  70:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/logout/route.ts\n   5:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  12:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/auth/refresh/route.ts\n  51:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/register/route.ts\n  85:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/auth/session/route.ts\n   5:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  27:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/[id]/route.ts\n   49:5  warning  Unexpected console statement  no-console\n  127:5  warning  Unexpected console statement  no-console\n  180:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/count/route.ts\n   8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  40:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/beneficiaries/photo/route.ts\n  75:7  warning  Unexpected console statement  no-console\n  83:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/beneficiaries/route.ts\n   90:5  warning  Unexpected console statement  no-console\n  154:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/debug-user/route.ts\n  68:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/debug/verification/route.ts\n  147:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/documents/[id]/route.ts\n  24:5  warning  Unexpected console statement  no-console\n  55:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/documents/requirements/[type]/route.ts\n  25:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/health/route.ts\n  34:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  55:11  warning  'result' is assigned a value but never used                                    @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/onboarding/complete/route.ts\n    9:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   48:9   warning  Unexpected console statement                                                   no-console\n   61:11  warning  Unexpected console statement                                                   no-console\n   78:9   warning  Unexpected console statement                                                   no-console\n   91:5   warning  Unexpected console statement                                                   no-console\n  127:7   warning  Unexpected console statement                                                   no-console\n  136:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/consent-signature/route.ts\n   9:3  warning  Unexpected console statement  no-console\n  13:5  warning  Unexpected console statement  no-console\n  19:7  warning  Unexpected console statement  no-console\n  91:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/legal-consent/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   38:5   warning  Unexpected console statement                                                   no-console\n  110:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/personal-info/route.ts\n  127:5   warning  Unexpected console statement  no-console\n  186:5   warning  Unexpected console statement  no-console\n  210:5   warning  Unexpected console statement  no-console\n  283:5   warning  Unexpected console statement  no-console\n  289:7   warning  Unexpected console statement  no-console\n  291:7   warning  Unexpected console statement  no-console\n  341:5   warning  Unexpected console statement  no-console\n  349:7   warning  Unexpected console statement  no-console\n  369:5   warning  Unexpected console statement  no-console\n  405:13  warning  Unexpected console statement  no-console\n  406:13  warning  Unexpected console statement  no-console\n  412:13  warning  Unexpected console statement  no-console\n  432:5   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/photo/route.ts\n  75:7  warning  Unexpected console statement  no-console\n  83:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/save-step/route.ts\n   91:5  warning  Unexpected console statement  no-console\n  100:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/onboarding/signature/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   54:5   warning  Unexpected console statement                                                   no-console\n  173:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/status/route.ts\n   5:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  23:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/verification/route.ts\n   9:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  93:7   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/onboarding/verification/sync/route.ts\n    9:28  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   66:11  warning  Unexpected console statement                                                   no-console\n   96:9   warning  Unexpected console statement                                                   no-console\n  139:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/rules/[id]/route.ts\n   86:5  warning  Unexpected console statement  no-console\n  248:5  warning  Unexpected console statement  no-console\n  284:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/rules/route.ts\n   40:6   warning  'CreateRuleRequest' is defined but never used                                  @typescript-eslint/no-unused-vars\n   42:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  105:5   warning  Unexpected console statement                                                   no-console\n  247:5   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/api/rules/validate-allocation/route.ts\n   22:6  warning  'ValidateAllocationRequest' is defined but never used  @typescript-eslint/no-unused-vars\n  195:5  warning  Unexpected console statement                           no-console\n\n/Users/dean/code/Herit/app/api/stripe/webhook/route.ts\n   22:7   warning  Unexpected console statement                           no-console\n   39:14  warning  'error' is defined but never used                      @typescript-eslint/no-unused-vars\n   57:12  warning  'error' is defined but never used                      @typescript-eslint/no-unused-vars\n   72:7   warning  Unexpected console statement                           no-console\n   77:29  warning  'verificationData' is assigned a value but never used  @typescript-eslint/no-unused-vars\n  113:7   warning  Unexpected console statement                           no-console\n  128:5   warning  Unexpected console statement                           no-console\n  151:7   warning  Unexpected console statement                           no-console\n  160:5   warning  Unexpected console statement                           no-console\n  168:5   warning  Unexpected console statement                           no-console\n\n/Users/dean/code/Herit/app/api/test-counts/route.ts\n  18:5  warning  Unexpected console statement  no-console\n  25:5  warning  Unexpected console statement  no-console\n  26:5  warning  Unexpected console statement  no-console\n  33:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-db/route.ts\n  18:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-reports/route.ts\n  25:11  warning  Unexpected console statement  no-console\n  43:5   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/api/test-runner/route.ts\n   23:5   warning  Unexpected console statement       no-console\n   49:7   warning  Unexpected console statement       no-console\n   83:11  warning  Unexpected console statement       no-console\n  114:24  warning  'error' is defined but never used  @typescript-eslint/no-unused-vars\n  165:13  warning  Unexpected console statement       no-console\n  177:13  warning  Unexpected console statement       no-console\n  196:15  warning  Unexpected console statement       no-console\n  207:11  warning  Unexpected console statement       no-console\n  232:5   warning  Unexpected console statement       no-console\n  248:5   warning  Unexpected console statement       no-console\n  253:7   warning  Unexpected console statement       no-console\n  267:5   warning  Unexpected console statement       no-console\n\n/Users/dean/code/Herit/app/api/will/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   58:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n  116:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/api/will/status/route.ts\n    8:27  warning  'request' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   61:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n  136:12  warning  'error' is defined but never used                                              @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.tsx\n  31:7  warning  Unexpected console statement  no-console\n  40:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/auth/EmailSignupForm.tsx\n  62:15  warning  'confirmPassword' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/LoginForm-enhanced.cy.tsx\n  555:13  warning  'currentMode' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/auth/ProtectedRoute.tsx\n  25:5  warning  Unexpected console statement  no-console\n  41:9  warning  Unexpected console statement  no-console\n  50:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/auth/SignatureCanvas.tsx\n  24:11  warning  'theme' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryForm.cy.tsx\n  22:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryList.tsx\n  59:3  warning  'onPageSizeChange' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryPhotoInput.cy.tsx\n  22:7  warning  'mockCallbacks' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/beneficiaries/BeneficiaryPhotoInput.tsx\n  24:3  warning  'isInvalid' is assigned a value but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  25:3  warning  'errorMessage' is defined but never used. Allowed unused args must match /^_.*?$/u        @typescript-eslint/no-unused-vars\n  91:7  warning  Unexpected console statement                                                              no-console\n\n/Users/dean/code/Herit/app/components/documents/DocumentManager.tsx\n   53:1   warning  Prefer named exports over default exports for React components to improve testability                                                                                                                                                                                                    storybook-cypress-compliance/require-named-export\n   60:10  warning  'viewMode' is assigned a value but never used                                                                                                                                                                                                                                            @typescript-eslint/no-unused-vars\n   60:20  warning  'setViewMode' is assigned a value but never used                                                                                                                                                                                                                                         @typescript-eslint/no-unused-vars\n  122:5   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  130:11  warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  144:9   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  162:9   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  404:17  warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  430:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/components/documents/DocumentUploadZone.tsx\n   49:1   warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n   51:3   warning  'assetType' is defined but never used. Allowed unused args must match /^_.*?$/u        @typescript-eslint/no-unused-vars\n  118:11  warning  'uploadId' is assigned a value but never used                                          @typescript-eslint/no-unused-vars\n  171:13  warning  Unexpected console statement                                                           no-console\n  228:7   warning  Unexpected console statement                                                           no-console\n\n/Users/dean/code/Herit/app/components/layout/navbar.tsx\n  23:17  warning  'isSessionLoading' is assigned a value but never used  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/pages/HomePageClient.tsx\n  31:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/shared/DependencyInjectionExample.tsx\n   60:13  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n   60:18  warning  'value' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   63:13  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n   64:16  warning  'key' is defined but never used. Allowed unused args must match /^_.*?$/u    @typescript-eslint/no-unused-vars\n  141:7   warning  Unexpected console statement                                                 no-console\n  161:7   warning  Unexpected console statement                                                 no-console\n  182:7   warning  Unexpected console statement                                                 no-console\n  303:14  warning  'error' is defined but never used                                            @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/components/shared/SharedPersonalInfoFormProvider.tsx\n  65:7  warning  Unexpected console statement  no-console\n  69:7  warning  Unexpected console statement  no-console\n  86:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/components/shared/SharedPhotoUpload.tsx\n   27:3   warning  'name' is assigned a value but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                      @typescript-eslint/no-unused-vars\n   28:3   warning  'isInvalid' is assigned a value but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                 @typescript-eslint/no-unused-vars\n   29:3   warning  'errorMessage' is defined but never used. Allowed unused args must match /^_.*?$/u                                                                                                                                                                                                       @typescript-eslint/no-unused-vars\n  129:7   warning  Unexpected console statement                                                                                                                                                                                                                                                             no-console\n  171:9   warning  'markPhotoForDeletion' is assigned a value but never used                                                                                                                                                                                                                                @typescript-eslint/no-unused-vars\n  183:9   warning  'restorePhoto' is assigned a value but never used                                                                                                                                                                                                                                        @typescript-eslint/no-unused-vars\n  209:9   warning  'getTitle' is assigned a value but never used                                                                                                                                                                                                                                            @typescript-eslint/no-unused-vars\n  231:9   warning  'getDescription' is assigned a value but never used                                                                                                                                                                                                                                      @typescript-eslint/no-unused-vars\n  313:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element\n\n/Users/dean/code/Herit/app/components/ui/ErrorBoundary.tsx\n   29:5  warning  Unexpected console statement  no-console\n  101:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/hooks/useAssets.ts\n  220:22  warning  'assetId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/hooks/useDocuments.ts\n  79:20  warning  'documentId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/hooks/useRules.ts\n  109:7  warning  Unexpected console statement  no-console\n  152:7  warning  Unexpected console statement  no-console\n  185:7  warning  Unexpected console statement  no-console\n  218:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/layout.tsx\n  48:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/lib/audit-middleware.ts\n   66:7   warning  Unexpected console statement                 no-console\n   84:11  warning  'action' is assigned a value but never used  @typescript-eslint/no-unused-vars\n   99:14  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n  185:14  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n  202:16  warning  'error' is defined but never used            @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/app/lib/auth-client.ts\n  28:7  warning  Unexpected console statement  no-console\n  40:5  warning  Unexpected console statement  no-console\n  74:5  warning  Unexpected console statement  no-console\n  93:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/auth.ts\n   70:5  warning  Unexpected console statement  no-console\n   89:5  warning  Unexpected console statement  no-console\n  108:5  warning  Unexpected console statement  no-console\n  128:5  warning  Unexpected console statement  no-console\n  150:7  warning  Unexpected console statement  no-console\n  174:7  warning  Unexpected console statement  no-console\n  246:5  warning  Unexpected console statement  no-console\n  302:7  warning  Unexpected console statement  no-console\n  361:7  warning  Unexpected console statement  no-console\n  407:5  warning  Unexpected console statement  no-console\n  517:5  warning  Unexpected console statement  no-console\n  533:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/document-storage.ts\n  103:7   warning  Unexpected console statement                                                   no-console\n  115:7   warning  Unexpected console statement                                                   no-console\n  140:7   warning  Unexpected console statement                                                   no-console\n  219:27  warning  'assetId' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  225:7   warning  Unexpected console statement                                                   no-console\n  240:7   warning  Unexpected console statement                                                   no-console\n\n/Users/dean/code/Herit/app/lib/logger.ts\n  42:11  warning  Unexpected console statement  no-console\n  46:9   warning  Unexpected console statement  no-console\n  49:9   warning  Unexpected console statement  no-console\n  52:9   warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/photo-utils.ts\n   54:7  warning  Unexpected console statement  no-console\n   60:5  warning  Unexpected console statement  no-console\n   64:7  warning  Unexpected console statement  no-console\n   73:7  warning  Unexpected console statement  no-console\n   80:7  warning  Unexpected console statement  no-console\n   97:5  warning  Unexpected console statement  no-console\n  101:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/query-error-handling.ts\n  78:9  warning  Unexpected console statement  no-console\n  92:9  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/signature-extract.ts\n  496:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/stripe.ts\n   51:9  warning  Unexpected console statement  no-console\n  102:9  warning  Unexpected console statement  no-console\n  144:7  warning  Unexpected console statement  no-console\n  168:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/lib/svg-sanitizer.ts\n  80:7  warning  Unexpected console statement  no-console\n  87:5  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/app/page.tsx\n  6:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/app/test-status/page.tsx\n  3:1  warning  Prefer named exports over default exports for React components to improve testability  storybook-cypress-compliance/require-named-export\n\n/Users/dean/code/Herit/components/TestStatusDashboard.tsx\n    54:7   warning  'SSE_CHUNK_TIMEOUT' is assigned a value but never used                               @typescript-eslint/no-unused-vars\n    59:3   warning  'error' is defined but never used. Allowed unused args must match /^_.*?$/u          @typescript-eslint/no-unused-vars\n   181:5   warning  Unexpected console statement                                                         no-console\n   531:9   warning  Unexpected console statement                                                         no-console\n   654:9   warning  'calculateWeightedProgress' is assigned a value but never used                       @typescript-eslint/no-unused-vars\n   704:7   warning  Unexpected console statement                                                         no-console\n   706:7   warning  Unexpected console statement                                                         no-console\n   717:7   warning  Unexpected console statement                                                         no-console\n   724:7   warning  Unexpected console statement                                                         no-console\n   729:5   warning  Unexpected console statement                                                         no-console\n   769:7   warning  Unexpected console statement                                                         no-console\n   784:11  warning  Unexpected console statement                                                         no-console\n   965:5   warning  Unexpected console statement                                                         no-console\n   979:9   warning  Unexpected console statement                                                         no-console\n   981:9   warning  Unexpected console statement                                                         no-console\n   987:7   warning  Unexpected console statement                                                         no-console\n  1022:9   warning  Unexpected console statement                                                         no-console\n  1028:7   warning  Unexpected console statement                                                         no-console\n  1153:11  warning  Unexpected console statement                                                         no-console\n  1167:9   warning  Unexpected console statement                                                         no-console\n  1470:19  warning  Unexpected console statement                                                         no-console\n  1521:17  warning  Unexpected console statement                                                         no-console\n  1688:5   warning  'scannedCounts' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n  1795:9   warning  'getSuccessRate' is assigned a value but never used                                  @typescript-eslint/no-unused-vars\n  1817:9   warning  'liveTestStats' is assigned a value but never used                                   @typescript-eslint/no-unused-vars\n  2150:23  warning  'totalTests' is assigned a value but never used                                      @typescript-eslint/no-unused-vars\n  2151:23  warning  'passedTests' is assigned a value but never used                                     @typescript-eslint/no-unused-vars\n  2152:23  warning  'failedTests' is assigned a value but never used                                     @typescript-eslint/no-unused-vars\n  2155:23  warning  'passRate' is assigned a value but never used                                        @typescript-eslint/no-unused-vars\n  2649:59  warning  'index' is defined but never used. Allowed unused args must match /^_.*?$/u          @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/lib/test-counter.ts\n  145:7  warning  Unexpected console statement  no-console\n\n/Users/dean/code/Herit/lib/test-output-parser.ts\n  123:9  warning  Unexpected console statement                                                      no-console\n  135:9  warning  Unexpected console statement                                                      no-console\n  305:5  warning  'testCounts' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n\n/Users/dean/code/Herit/lib/test-runner.ts\n   108:7   warning  Unexpected console statement                                                       no-console\n   128:7   warning  Unexpected console statement                                                       no-console\n   132:7   warning  Unexpected console statement                                                       no-console\n   147:11  warning  Unexpected console statement                                                       no-console\n   171:14  warning  'error' is defined but never used                                                  @typescript-eslint/no-unused-vars\n   172:7   warning  Unexpected console statement                                                       no-console\n   304:5   warning  'abortSignal' is defined but never used. Allowed unused args must match /^_.*?$/u  @typescript-eslint/no-unused-vars\n   310:5   warning  Unexpected console statement                                                       no-console\n   319:7   warning  Unexpected console statement                                                       no-console\n   324:7   warning  Unexpected console statement                                                       no-console\n   433:7   warning  Unexpected console statement                                                       no-console\n   438:9   warning  Unexpected console statement                                                       no-console\n   448:9   warning  Unexpected console statement                                                       no-console\n   452:11  warning  Unexpected console statement                                                       no-console\n   467:15  warning  Unexpected console statement                                                       no-console\n   478:13  warning  Unexpected console statement                                                       no-console\n   481:13  warning  Unexpected console statement                                                       no-console\n   496:11  warning  Unexpected console statement                                                       no-console\n   511:15  warning  Unexpected console statement                                                       no-console\n   520:13  warning  Unexpected console statement                                                       no-console\n   523:13  warning  Unexpected console statement                                                       no-console\n   543:9   warning  Unexpected console statement                                                       no-console\n   580:13  warning  Unexpected console statement                                                       no-console\n   593:17  warning  Unexpected console statement                                                       no-console\n   599:17  warning  Unexpected console statement                                                       no-console\n   609:13  warning  Unexpected console statement                                                       no-console\n   636:13  warning  Unexpected console statement                                                       no-console\n   669:13  warning  Unexpected console statement                                                       no-console\n   680:17  warning  Unexpected console statement                                                       no-console\n   686:17  warning  Unexpected console statement                                                       no-console\n   694:13  warning  Unexpected console statement                                                       no-console\n   719:13  warning  Unexpected console statement                                                       no-console\n   753:7   warning  Unexpected console statement                                                       no-console\n   757:7   warning  Unexpected console statement                                                       no-console\n   781:5   warning  Unexpected console statement                                                       no-console\n   800:9   warning  Unexpected console statement                                                       no-console\n   846:11  warning  Unexpected console statement                                                       no-console\n   849:11  warning  Unexpected console statement                                                       no-console\n   851:11  warning  Unexpected console statement                                                       no-console\n   873:13  warning  Unexpected console statement                                                       no-console\n   877:13  warning  Unexpected console statement                                                       no-console\n   950:13  warning  Unexpected console statement                                                       no-console\n   957:13  warning  Unexpected console statement                                                       no-console\n   965:7   warning  Unexpected console statement                                                       no-console\n   989:7   warning  Unexpected console statement                                                       no-console\n  1007:11  warning  Unexpected console statement                                                       no-console\n  1092:11  warning  Unexpected console statement                                                       no-console\n  1095:11  warning  Unexpected console statement                                                       no-console\n  1097:11  warning  Unexpected console statement                                                       no-console\n  1189:7   warning  Unexpected console statement                                                       no-console\n  1191:7   warning  Unexpected console statement                                                       no-console\n\n✖ 443 problems (0 errors, 443 warnings)\n\n",
      "startTime": 1757018159738,
      "endTime": 1757018163710,
      "duration": 3972,
      "total": 1,
      "passed": 1,
      "failed": 0,
      "skipped": 0,
      "passRate": 100,
      "progress": 100,
      "individualTests": {
        "total": 1,
        "passed": 1,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    },
    "build": {
      "command": "npm run typecheck",
      "status": "completed",
      "output": "\n> herit@0.1.0 typecheck\n> tsc --noEmit --skipLibCheck\n\n",
      "startTime": 1757018163711,
      "endTime": 1757018166122,
      "duration": 2411,
      "total": 1,
      "passed": 1,
      "failed": 0,
      "skipped": 0,
      "passRate": 100,
      "progress": 100,
      "individualTests": {
        "total": 1,
        "passed": 1,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    },
    "componentTestsAccessibility": {
      "command": "npm run test:ct:accessibility",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:ct:accessibility\n> cypress run --component --config video=false,screenshotOnRunFailure=false --quiet --spec 'app/_lib/**/*.cy.tsx,app/components/auth/**/*.cy.tsx,app/components/ui/**/*.cy.tsx,app/components/layout/**/*.cy.tsx,app/components/branding/**/*.cy.tsx,app/components/pages/**/*.cy.tsx,app/components/examples/**/*.cy.tsx'\n\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 796 ms\n16 assets\n970 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 75 ms\n\n\n  QueryProvider\n    Core Functionality\n      ✓ renders without crashing (49ms)\n      ✓ provides QueryClient context to children (27ms)\n    Error Handling\n      ✓ handles component errors gracefully (26ms)\n    Accessibility\n      ✓ provides accessible context (28ms)\n    Responsive Design\n      ✓ works at different screen sizes (33ms)\n    Integration\n      ✓ works within parent containers (31ms)\n\n\n  6 passing (234ms)\n\n17 assets\n969 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 205 ms\n\n\n  Error Component\n    Core Functionality\n      ✓ renders error message and try again button (47ms)\n      (Attempt 1 of 3) calls reset callback when try again button is clicked\n      (Attempt 2 of 3) calls reset callback when try again button is clicked\n      1) calls reset callback when try again button is clicked\n      ✓ logs error to console on component mount (28ms)\n      ✓ handles different error types and messages (30ms)\n    Error States\n      ✓ handles missing error object gracefully (29ms)\n      (Attempt 1 of 3) handles missing reset callback gracefully\n      (Attempt 2 of 3) handles missing reset callback gracefully\n      2) handles missing reset callback gracefully\n      ✓ handles complex error objects (33ms)\n      (Attempt 1 of 3) handles multiple rapid error occurrences\n      (Attempt 2 of 3) handles multiple rapid error occurrences\n      3) handles multiple rapid error occurrences\n    Accessibility\n      (Attempt 1 of 3) should be accessible\n      (Attempt 2 of 3) should be accessible\n      4) should be accessible\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      5) supports keyboard navigation\n      (Attempt 1 of 3) has proper semantic structure\n      (Attempt 2 of 3) has proper semantic structure\n      6) has proper semantic structure\n      ✓ provides clear user guidance (39ms)\n    Performance\n      (Attempt 1 of 3) should render quickly\n      (Attempt 2 of 3) should render quickly\n      7) should render quickly\n      (Attempt 1 of 3) handles large error objects efficiently\n      (Attempt 2 of 3) handles large error objects efficiently\n      8) handles large error objects efficiently\n      (Attempt 1 of 3) handles rapid reset button clicks efficiently\n      (Attempt 2 of 3) handles rapid reset button clicks efficiently\n      9) handles rapid reset button clicks efficiently\n    Responsive Design\n      ✓ should work on all screen sizes (39ms)\n      ✓ maintains proper spacing on mobile (33ms)\n      ✓ handles long error messages on narrow screens (32ms)\n    Integration Scenarios\n      (Attempt 1 of 3) integrates with error boundary workflow\n      (Attempt 2 of 3) integrates with error boundary workflow\n      10) integrates with error boundary workflow\n      ✓ handles error reporting service integration (9ms)\n      (Attempt 1 of 3) works within Next.js app router context\n      (Attempt 2 of 3) works within Next.js app router context\n      11) works within Next.js app router context\n    Edge Cases\n      ✓ handles circular reference errors (46ms)\n      ✓ handles error objects without message (29ms)\n      ✓ handles non-Error objects passed as error (28ms)\n      ✓ handles rapid component remounting (39ms)\n    Security\n      (Attempt 1 of 3) safely handles malicious error messages\n      (Attempt 2 of 3) safely handles malicious error messages\n      12) safely handles malicious error messages\n      ✓ safely handles error properties with XSS attempts (37ms)\n      (Attempt 1 of 3) prevents reset callback injection attacks\n      (Attempt 2 of 3) prevents reset callback injection attacks\n      13) prevents reset callback injection attacks\n      (Attempt 1 of 3) handles error stack traces safely\n      (Attempt 2 of 3) handles error stack traces safely\n      14) handles error stack traces safely\n    Quality Checks\n      (Attempt 1 of 3) should meet performance standards\n      (Attempt 2 of 3) should meet performance standards\n      15) should meet performance standards\n      (Attempt 1 of 3) should be accessible\n      (Attempt 2 of 3) should be accessible\n      16) should be accessible\n      ✓ should handle responsive layouts (16ms)\n\n\n  16 passing (1m)\n  16 failing\n\n  1) Error Component\n       Core Functionality\n         calls reset callback when try again button is clicked:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8080/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8080/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8080/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8080/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8080/__cypress/runner/cypress_runner.js:146695:53)\n\n  2) Error Component\n       Error States\n         handles missing reset callback gracefully:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  3) Error Component\n       Error States\n         handles multiple rapid error occurrences:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  4) Error Component\n       Accessibility\n         should be accessible:\n     CypressError: `cy.within()` can only be called on a single element. Your subject contained 2 elements. Narrow down your subject to a single element (using `.first()`, for example) before calling `.within()`.\n\nTo run `.within()` over multiple subjects, use `.each()`.\n\n  `cy.get('div').each($div => {`\n  `  cy.wrap($div).within(() => { ... })`\n  `})`\n\nhttps://on.cypress.io/within\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:135977:72)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8080/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8080/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8080/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8080/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8080/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8080/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8080/__cypress/runner/cypress_runner.js:146695:53)\n\n  5) Error Component\n       Accessibility\n         supports keyboard navigation:\n     CypressError: `cy.focus()` can only be called on a single element. Your subject contained 2 elements.\n\nhttps://on.cypress.io/focus\n      at Context.focus (http://localhost:8080/__cypress/runner/cypress_runner.js:114705:70)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n  From Your Spec Code:\n      at Object.proxyGetter [as get] (http://localhost:8080/__cypress/runner/cypress_runner.js:80426:22)\n      at exists (http://localhost:8080/__cypress/runner/cypress_runner.js:146470:26)\n      at elExists (http://localhost:8080/__cypress/runner/cypress_runner.js:146485:10)\n      at ensureExistence (http://localhost:8080/__cypress/runner/cypress_runner.js:146666:22)\n      at onFailFn (http://localhost:8080/__cypress/runner/cypress_runner.js:146695:53)\n\n  6) Error Component\n       Accessibility\n         has proper semantic structure:\n\n      Timed out retrying after 4000ms\n      + expected - actual\n\n      -'DIV'\n      +'BUTTON'\n      \n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:344:46)\n\n  7) Error Component\n       Performance\n         should render quickly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:374:80)\n\n  8) Error Component\n       Performance\n         handles large error objects efficiently:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:400:80)\n\n  9) Error Component\n       Performance\n         handles rapid reset button clicks efficiently:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  10) Error Component\n       Integration Scenarios\n         integrates with error boundary workflow:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  11) Error Component\n       Integration Scenarios\n         works within Next.js app router context:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  12) Error Component\n       Security\n         safely handles malicious error messages:\n     AssertionError: Timed out retrying after 4000ms: Expected [ <script>, 3 more... ] not to exist in the DOM, but it was continuously found.\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:835:30)\n\n  13) Error Component\n       Security\n         prevents reset callback injection attacks:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  14) Error Component\n       Security\n         handles error stack traces safely:\n     AssertionError: Timed out retrying after 4000ms: Expected [ <script>, 3 more... ] not to exist in the DOM, but it was continuously found.\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:905:30)\n\n  15) Error Component\n       Quality Checks\n         should meet performance standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"button\"]`, but never found it.\n      at Object.measureRenderTime (webpack-internal:///./cypress/support/test-utils.ts:272:31)\n      at Context.eval (webpack-internal:///./app/_lib/error.cy.tsx:913:80)\n\n  16) Error Component\n       Quality Checks\n         should be accessible:\n     CypressError: `cy.within()` can only be called on a single element. Your subject contained 2 elements. Narrow down your subject to a single element (using `.first()`, for example) before calling `.within()`.\n\nTo run `.within()` over multiple subjects, use `.each()`.\n\n  `cy.get('div').each($div => {`\n  `  cy.wrap($div).within(() => { ... })`\n  `})`\n\nhttps://on.cypress.io/within\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:135977:72)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8080/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8080/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n\n\n16 assets\n968 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 292 ms\n\n\n  providers\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) displays content correctly\n      (Attempt 2 of 3) displays content correctly\n      2) displays content correctly\n      (Attempt 1 of 3) handles props correctly\n      (Attempt 2 of 3) handles props correctly\n      3) handles props correctly\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      4) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      5) supports keyboard navigation\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      6) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      7) works within parent containers\n\n\n  0 passing (1m)\n  7 failing\n\n  1) providers\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:38:76)\n\n  2) providers\n       Core Functionality\n         displays content correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:58:76)\n\n  3) providers\n       Core Functionality\n         handles props correctly:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:81:76)\n\n  4) providers\n       Accessibility\n         meets basic accessibility standards:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button, input, [tabindex], [role=\"button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:104:16)\n\n  5) providers\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:134:26)\n\n  6) providers\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:164:76)\n\n  7) providers\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"providers\"], [data-testid=\"providers\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/_lib/providers.cy.tsx:203:80)\n      at withinFn (http://localhost:8080/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8080/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8080/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n15 assets\n969 modules\n\n\u001b[1m\u001b[31mERROR\u001b[39m\u001b[22m in \u001b[1m./app/components/auth/AuthErrorHandler.cy.tsx\u001b[39m\u001b[22m\nModule build failed (from ./node_modules/.pnpm/next@15.4.6_@babel+core@7.28.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   \u001b[31mx\u001b[0m Expected '}', got '<eof>'\n     ,-[\u001b[36;1;4m/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx\u001b[0m:131:1]\n \u001b[2m128\u001b[0m |       });\n \u001b[2m129\u001b[0m |     });\n \u001b[2m130\u001b[0m |   });\n \u001b[2m131\u001b[0m | });\n     : \u001b[35;1m ^\u001b[0m\n     `----\n  \u001b[31mx\u001b[0m Unexpected eof\n     ,-[\u001b[36;1;4m/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx\u001b[0m:131:5]\n \u001b[2m129\u001b[0m |     });\n \u001b[2m130\u001b[0m |   });\n \u001b[2m131\u001b[0m | });\n     `----\n\n\nCaused by:\n    Syntax Error\n\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled with \u001b[1m\u001b[31m1 error\u001b[39m\u001b[22m in 301 ms\n\n\n  (Attempt 1 of 2) An uncaught error was detected outside of a test\n  1) An uncaught error was detected outside of a test\n\n  0 passing (18ms)\n  1 failing\n\n  1) An uncaught error was detected outside of a test:\n     Error: The following error originated from your test code, not from Cypress.\n\n  > Module build failed (from ./node_modules/.pnpm/next@15.4.6_@babel+core@7.28.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   x Expected '}', got '<eof>'\n     ,-[/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx:131:1]\n 128 |       });\n 129 |     });\n 130 |   });\n 131 | });\n     :  ^\n     `----\n  x Unexpected eof\n     ,-[/Users/dean/code/Herit/app/components/auth/AuthErrorHandler.cy.tsx:131:5]\n 129 |     });\n 130 |   });\n 131 | });\n     `----\n\nCaused by:\n    Syntax Error\n\nWhen Cypress detects uncaught errors originating from your test code it will automatically fail the current test.\n\nCypress could not associate this error to any specific test.\n\nWe dynamically generated a new test to display this failure.\n      at ./app/components/auth/AuthErrorHandler.cy.tsx (http://localhost:8080/__cypress/src/spec-0.js:17:7)\n      at __webpack_require__ (http://localhost:8080/__cypress/src/webpack.js:25:43)\n      at __webpack_require__.t (http://localhost:8080/__cypress/src/webpack.js:97:38)\n\n\n\n18 assets\n1269 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 307 ms\n\n\n  EmailLoginForm\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\nwrite EPIPE\nError: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at execSync (node:child_process:967:20)\n    at node:electron/js2c/node_init:2:17313\n    at <embedded>:1245:1069694\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n[73586:0904/213634.646609:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n[73586:0904/213634.646625:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n\nDevTools listening on ws://127.0.0.1:54705/devtools/browser/3ae3420b-c696-4956-85f0-30cd872157d4\n<<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Project is running at:\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Loopback: \u001b[36mhttp://127.0.0.1:8080/\u001b[39m\n<i> [webpack-dev-server] Content not from webpack is served from '\u001b[36m/Users/dean/code/Herit/public\u001b[39m' directory\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/main.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/main.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>>",
      "startTime": 1757018194195,
      "endTime": 1757018374475,
      "duration": 180280,
      "total": 6,
      "passed": 6,
      "failed": 0,
      "skipped": 0,
      "passRate": 100,
      "progress": 100,
      "error": "Process was terminated (SIGTERM) due to timeout",
      "individualTests": {
        "total": 6,
        "passed": 6,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    },
    "componentTestsCore": {
      "command": "npm run test:ct:core",
      "status": "failed",
      "output": "\n> herit@0.1.0 test:ct:core\n> cypress run --component --config video=false,screenshotOnRunFailure=false --quiet --spec 'app/components/beneficiaries/**/*.cy.tsx,app/components/documents/**/*.cy.tsx,app/components/shared/**/*.cy.tsx,app/components/dashboard/**/*.cy.tsx,app/(dashboard)/**/*.cy.tsx,app/(auth)/**/*.cy.tsx,components/**/*.cy.tsx'\n\n18 assets\n1439 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 1090 ms\n18 assets\n1439 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 79 ms\n\n\n  BeneficiaryCard\n    Core Functionality\n      (Attempt 1 of 2) renders without crashing\n      1) renders without crashing\n      ✓ displays beneficiary name (33ms)\n      ✓ displays beneficiary email (26ms)\n      ✓ displays relationship type (26ms)\n      (Attempt 1 of 2) shows menu dropdown\n      2) shows menu dropdown\n\n\n  3 passing (16s)\n  2 failing\n\n  1) BeneficiaryCard\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-cy=\"beneficiary-card\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryCard.cy.tsx:44:52)\n\n  2) BeneficiaryCard\n       Core Functionality\n         shows menu dropdown:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `button[aria-haspopup=\"menu\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryCard.cy.tsx:84:52)\n\n\n\n18 assets\n1574 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 475 ms\n\n\n  BeneficiaryForm\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) responds to user interactions\n      (Attempt 2 of 3) responds to user interactions\n      2) responds to user interactions\n    Error Handling\n      (Attempt 1 of 3) shows validation errors\n      (Attempt 2 of 3) shows validation errors\n      3) shows validation errors\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      4) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      5) supports keyboard navigation\n    User Interactions\n      (Attempt 1 of 3) handles click events\n      (Attempt 2 of 3) handles click events\n      6) handles click events\n    Responsive Design\n      (Attempt 1 of 3) adapts to different screen sizes\n      (Attempt 2 of 3) adapts to different screen sizes\n      7) adapts to different screen sizes\n    Integration\n      (Attempt 1 of 3) works within parent containers\n      (Attempt 2 of 3) works within parent containers\n      8) works within parent containers\n\n\n  0 passing (2m)\n  8 failing\n\n  1) BeneficiaryForm\n       Core Functionality\n         renders without crashing:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"beneficiary-button\"], [data-testid=\"beneficiaryform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:65:95)\n      at getRet (http://localhost:8080/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8080/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8080/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8080/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n\n  2) BeneficiaryForm\n       Core Functionality\n         responds to user interactions:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"beneficiary-button\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:94:16)\n\n  3) BeneficiaryForm\n       Error Handling\n         shows validation errors:\n     CypressError: Timed out retrying after 4050ms: `cy.click()` failed because this element is `disabled`:\n\n`<button data-disabled=\"true\" data-loading=\"true\" type=\"submit\" disabled=\"\" data-react-aria-pressable=\"true\" data-component-category=\"input\" data-testid=\"beneficiary-submit\" class=\"z-0 group relative inline-flex items-center justify-center box-border appearance-none select-none whitespace-nowrap font-normal subpixel-antialiased overflow-hidden tap-highlight-transparent transform-gpu data-[pressed=true]:scale-[0.97] cursor-pointer outline-solid outline-transparent data-[focus-visible=true]:z-10 data-[focus-visible=true]:outline-2 data-[focus-visible=true]:outline-focus data-[focus-visible=true]:outline-offset-2 px-4 min-w-20 h-10 text-small gap-2 rounded-medium opacity-disabled pointer-events-none [&amp;>svg]:max-w-[theme(spacing.8)] transition-transform-colors-opacity motion-reduce:transition-none bg-primary text-primary-foreground data-[hover=true]:opacity-hover\">...</button>`\n\nFix this problem, or use `{force: true}` to disable error checking.\n\nhttps://on.cypress.io/element-cannot-be-interacted-with\n      at Object.isNotDisabled (http://localhost:8080/__cypress/runner/cypress_runner.js:148421:58)\n      at runAllChecks (http://localhost:8080/__cypress/runner/cypress_runner.js:114522:26)\n      at retryActionability (http://localhost:8080/__cypress/runner/cypress_runner.js:114611:16)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8080/__cypress/runner/cypress_runner.js:4285:29)\n      at whenStable (http://localhost:8080/__cypress/runner/cypress_runner.js:147282:68)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147223:14)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromise0 (http://localhost:8080/__cypress/runner/cypress_runner.js:1591:10)\n      at Promise._settlePromises (http://localhost:8080/__cypress/runner/cypress_runner.js:1671:18)\n      at Promise._fulfill (http://localhost:8080/__cypress/runner/cypress_runner.js:1615:18)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:5420:46)\n\n  4) BeneficiaryForm\n       Accessibility\n         meets basic accessibility standards:\n\n      Timed out retrying after 4000ms\n      + expected - actual\n\n\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:147:43)\n      at getRet (http://localhost:8080/__cypress/runner/cypress_runner.js:120768:20)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise.attempt.Promise.try (http://localhost:8080/__cypress/runner/cypress_runner.js:4285:29)\n      at Context.thenFn (http://localhost:8080/__cypress/runner/cypress_runner.js:120779:66)\n      at Context.then (http://localhost:8080/__cypress/runner/cypress_runner.js:121030:21)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n\n  5) BeneficiaryForm\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:175:26)\n\n  6) BeneficiaryForm\n       User Interactions\n         handles click events:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"beneficiary-button\"], [data-testid=\"beneficiaryform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:206:91)\n\n  7) BeneficiaryForm\n       Responsive Design\n         adapts to different screen sizes:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"beneficiary-button\"], [data-testid=\"beneficiaryform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:230:91)\n\n  8) BeneficiaryForm\n       Integration\n         works within parent containers:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `[data-testid=\"beneficiary-button\"], [data-testid=\"beneficiaryform\"]`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryForm.cy.tsx:269:95)\n      at withinFn (http://localhost:8080/__cypress/runner/cypress_runner.js:135903:8)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:135984:16)\n      at __WEBPACK_DEFAULT_EXPORT__ (http://localhost:8080/__cypress/runner/cypress_runner.js:133819:10)\n      at Context.within (http://localhost:8080/__cypress/runner/cypress_runner.js:135970:67)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n\n\n\n18 assets\n1654 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 384 ms\n\n\n  BeneficiaryList\n    Core Functionality\n      ✓ renders without crashing (61ms)\n      (Attempt 1 of 3) responds to user interactions\n      (Attempt 2 of 3) responds to user interactions\n      1) responds to user interactions\n    Accessibility\n      ✓ meets basic accessibility standards (25ms)\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\n      2) supports keyboard navigation\n    User Interactions\n      ✓ handles click events (135ms)\n    Responsive Design\n      ✓ adapts to different screen sizes (34ms)\n    Integration\n      ✓ works within parent containers (29ms)\n\n\n  5 passing (13s)\n  2 failing\n\n  1) BeneficiaryList\n       Core Functionality\n         responds to user interactions:\n     CypressError: `cy.click()` can only be called on a single element. Your subject contained 2 elements. Pass `{ multiple: true }` if you want to serially click each element.\n\nhttps://on.cypress.io/click\n      at mouseAction (http://localhost:8080/__cypress/runner/cypress_runner.js:113780:68)\n      at Context.click (http://localhost:8080/__cypress/runner/cypress_runner.js:113947:14)\n      at wrapped (http://localhost:8080/__cypress/runner/cypress_runner.js:141618:19)\n      at <unknown> (http://localhost:8080/__cypress/runner/cypress_runner.js:147554:15)\n      at tryCatcher (http://localhost:8080/__cypress/runner/cypress_runner.js:1777:23)\n      at Promise._settlePromiseFromHandler (http://localhost:8080/__cypress/runner/cypress_runner.js:1489:31)\n      at Promise._settlePromise (http://localhost:8080/__cypress/runner/cypress_runner.js:1546:18)\n      at Promise._settlePromiseCtx (http://localhost:8080/__cypress/runner/cypress_runner.js:1583:10)\n      at _drainQueueStep (http://localhost:8080/__cypress/runner/cypress_runner.js:2381:12)\n      at _drainQueue (http://localhost:8080/__cypress/runner/cypress_runner.js:2370:9)\n      at Async._drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2386:5)\n      at Async.drainQueues (http://localhost:8080/__cypress/runner/cypress_runner.js:2256:14)\n\n  2) BeneficiaryList\n       Accessibility\n         supports keyboard navigation:\n     AssertionError: Timed out retrying after 4000ms: Expected to find element: `focused`, but never found it.\n      at Context.eval (webpack-internal:///./app/components/beneficiaries/BeneficiaryList.cy.tsx:124:26)\n\n\n\n18 assets\n1175 modules\n\u001b[1mclient\u001b[39m\u001b[22m (webpack 5.98.0) compiled \u001b[1m\u001b[32msuccessfully\u001b[39m\u001b[22m in 164 ms\n\n\n  BeneficiaryPhotoInput\n    Core Functionality\n      (Attempt 1 of 3) renders without crashing\n      (Attempt 2 of 3) renders without crashing\n      1) renders without crashing\n      (Attempt 1 of 3) responds to user interactions\n      (Attempt 2 of 3) responds to user interactions\n      2) responds to user interactions\n    Accessibility\n      (Attempt 1 of 3) meets basic accessibility standards\n      (Attempt 2 of 3) meets basic accessibility standards\n      3) meets basic accessibility standards\n      (Attempt 1 of 3) supports keyboard navigation\n      (Attempt 2 of 3) supports keyboard navigation\nwrite EPIPE\nError: write EPIPE\n    at afterWriteDispatched (node:internal/stream_base_commons:159:15)\n    at writeGeneric (node:internal/stream_base_commons:150:3)\n    at Socket._writeGeneric (node:net:971:11)\n    at Socket._write (node:net:983:8)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at Writable.write (node:internal/streams/writable:510:10)\n    at execSync (node:child_process:967:20)\n    at node:electron/js2c/node_init:2:17313\n    at <embedded>:1245:1069694\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)\n[78994:0904/213934.964091:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n[78994:0904/213934.964107:ERROR:electron/shell/common/node_bindings.cc:411] Most NODE_OPTIONs are not supported in packaged apps. See documentation for more details.\n\nDevTools listening on ws://127.0.0.1:55465/devtools/browser/df108030-4795-4ef5-8877-234076807ede\n<<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Project is running at:\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-server] Loopback: \u001b[36mhttp://127.0.0.1:8080/\u001b[39m\n<i> [webpack-dev-server] Content not from webpack is served from '\u001b[36m/Users/dean/code/Herit/public\u001b[39m' directory\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/webpack.js\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>><<<CYPRESS.STDERR.START>>><i> [webpack-dev-middleware] wait until bundle finished: /__cypress/src/index.html\n<<<CYPRESS.STDERR.END>>>",
      "startTime": 1757018374596,
      "endTime": 1757018555645,
      "duration": 181049,
      "total": 3,
      "passed": 3,
      "failed": 0,
      "skipped": 0,
      "passRate": 100,
      "progress": 100,
      "error": "Process was terminated (SIGTERM) due to timeout",
      "individualTests": {
        "total": 3,
        "passed": 3,
        "failed": 0,
        "skipped": 0,
        "passRate": 100,
        "progress": 100
      }
    }
  },
  "overall": {
    "total": 0,
    "passed": 0,
    "failed": 0,
    "skipped": 0,
    "passRate": 0
  },
  "testCounts": {
    "componentTests": {
      "total": 369,
      "files": 46,
      "fileDetails": {
        "components/TestStatusDashboard.cy.tsx": 7,
        "app/_lib/providers.cy.tsx": 7,
        "app/_lib/error.cy.tsx": 32,
        "app/_lib/QueryProvider.cy.tsx": 6,
        "cypress/component/integration/onboarding-flow.cy.tsx": 10,
        "app/components/ui/theme-switch.cy.tsx": 4,
        "app/components/ui/icons.cy.tsx": 7,
        "app/components/ui/VerticalSteps.cy.tsx": 5,
        "app/components/ui/ErrorBoundary.cy.tsx": 7,
        "app/components/pages/HomePageClient.cy.tsx": 6,
        "app/components/shared/SharedPhotoUpload.cy.tsx": 7,
        "app/components/shared/SharedPersonalInfoFormProvider.cy.tsx": 8,
        "app/components/shared/SharedPersonalInfoForm.cy.tsx": 8,
        "app/components/shared/DependencyInjectionExample.cy.tsx": 7,
        "app/components/layout/navbar.cy.tsx": 6,
        "app/components/layout/navbar-user-menu.cy.tsx": 14,
        "app/components/layout/LayoutWrapper.cy.tsx": 6,
        "app/components/examples/counter.cy.tsx": 7,
        "app/components/documents/DocumentUploadZone.cy.tsx": 7,
        "app/components/documents/DocumentManager.cy.tsx": 7,
        "app/components/dashboard/DashboardLayout.cy.tsx": 5,
        "app/components/branding/HeritLogo.cy.tsx": 7,
        "app/components/beneficiaries/BeneficiaryPhotoInput.cy.tsx": 7,
        "app/components/beneficiaries/BeneficiaryList.cy.tsx": 7,
        "app/components/beneficiaries/BeneficiaryForm.cy.tsx": 8,
        "app/components/beneficiaries/BeneficiaryCard.cy.tsx": 5,
        "app/components/auth/SignatureCanvas.cy.tsx": 5,
        "app/components/auth/ProtectedRoute.cy.tsx": 8,
        "app/components/auth/LoginForm.cy.tsx": 7,
        "app/components/auth/LoginForm-enhanced.cy.tsx": 23,
        "app/components/auth/GoogleSignInButton.cy.tsx": 3,
        "app/components/auth/EmailSignupForm.cy.tsx": 8,
        "app/components/auth/EmailLoginForm.cy.tsx": 7,
        "app/components/auth/AuthErrorHandler.cy.tsx": 5,
        "app/(dashboard)/will/WillClient.cy.tsx": 8,
        "app/(dashboard)/dashboard/DashboardClient.cy.tsx": 6,
        "app/(dashboard)/rules/components/ViewRuleModal.cy.tsx": 7,
        "app/(dashboard)/rules/components/RuleConditionsDisplay.cy.tsx": 7,
        "app/(dashboard)/rules/components/EditRuleModal.cy.tsx": 9,
        "app/(dashboard)/rules/components/CreateRuleModal.cy.tsx": 9,
        "app/(auth)/onboarding/components/VerificationStep.cy.tsx": 5,
        "app/(auth)/onboarding/components/SignatureStep.cy.tsx": 7,
        "app/(auth)/onboarding/components/SignatureStamp.cy.tsx": 7,
        "app/(auth)/onboarding/components/SignatureStamp-optimized.cy.tsx": 16,
        "app/(auth)/onboarding/components/PersonalInfoStep.cy.tsx": 8,
        "app/(auth)/onboarding/components/LegalConsentStep.cy.tsx": 7
      }
    },
    "backendTests": {
      "total": 464,
      "files": 40,
      "fileDetails": {
        "tests/utils.test.ts": 17,
        "tests/api/will/will.test.ts": 10,
        "tests/api/test-db/test-db.test.ts": 12,
        "tests/api/rules/rules.test.ts": 10,
        "tests/api/health/health.test.ts": 12,
        "tests/api/debug-user/debug-user.test.ts": 10,
        "tests/api/beneficiaries/beneficiaries.test.ts": 10,
        "tests/api/assets/assets.test.ts": 21,
        "tests/api/will/status/status.test.ts": 10,
        "tests/api/stripe/webhook/webhook.test.ts": 9,
        "tests/api/rules/validate-allocation/validate-allocation.test.ts": 10,
        "tests/api/rules/[id]/[id].test.ts": 11,
        "tests/api/onboarding/verification/verification.test.ts": 10,
        "tests/api/onboarding/status/status.test.ts": 10,
        "tests/api/onboarding/signature/signature.test.ts": 10,
        "tests/api/onboarding/save-step/save-step.test.ts": 23,
        "tests/api/onboarding/photo/photo.test.ts": 10,
        "tests/api/onboarding/personal-info/personal-info.test.ts": 25,
        "tests/api/onboarding/legal-consent/legal-consent.test.ts": 12,
        "tests/api/onboarding/consent-signature/consent-signature.test.ts": 10,
        "tests/api/onboarding/complete/complete.test.ts": 10,
        "tests/api/documents/[id]/[id].test.ts": 10,
        "tests/api/beneficiaries/photo/photo.test.ts": 10,
        "tests/api/beneficiaries/count/count.test.ts": 10,
        "tests/api/beneficiaries/[id]/[id].test.ts": 11,
        "tests/api/audit/log-event/log-event.test.ts": 10,
        "tests/api/auth/session/session.test.ts": 21,
        "tests/api/auth/register/register.test.ts": 10,
        "tests/api/auth/refresh/refresh.test.ts": 10,
        "tests/api/auth/logout/logout.test.ts": 10,
        "tests/api/auth/login/login.test.ts": 10,
        "tests/api/auth/create-test-user/create-test-user.test.ts": 10,
        "tests/api/auth/google/google.test.ts": 10,
        "tests/api/debug/verification/verification.test.ts": 10,
        "tests/api/assets/categories/categories.test.ts": 10,
        "tests/api/assets/[id]/[id].test.ts": 11,
        "tests/api/onboarding/verification/sync/sync.test.ts": 10,
        "tests/api/documents/requirements/[type]/[type].test.ts": 10,
        "tests/api/auth/google/callback/callback.test.ts": 10,
        "tests/api/assets/[id]/documents/documents.test.ts": 9
      }
    },
    "totalTests": 833,
    "totalFiles": 86,
    "lastScan": "2025-09-04T20:35:59.738Z",
    "scanDuration": 52
  },
  "individualTests": {
    "total": 475,
    "passed": 306,
    "failed": 99,
    "skipped": 0,
    "passRate": 64,
    "progress": 93
  }
}